<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>U.Codebase.Sqlite.Operations</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">unison-codebase-sqlite-0.0.0</span><ul class="links" id="page-menu"><li><a href="src/U.Codebase.Sqlite.Operations.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">U.Codebase.Sqlite.Operations</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">branches</a></li><li><a href="#g:2">terms</a></li><li><a href="#g:3">decls</a></li><li><a href="#g:4">terms/decls</a></li><li><a href="#g:5">patches</a></li><li><a href="#g:6">test for stuff in codebase</a></li><li><a href="#g:7">watch expression cache</a></li><li><a href="#g:8">indexes</a><ul><li><a href="#g:9">nearest common ancestor</a></li><li><a href="#g:10">prefix index</a></li><li><a href="#g:11">dependents index</a></li><li><a href="#g:12">type index</a></li><li><a href="#g:13">type mentions index</a></li><li><a href="#g:14">name lookup index</a></li></ul></li><li><a href="#g:15">reflog</a></li><li><a href="#g:16">low-level stuff</a></li><li><a href="#g:17">somewhat unexpectedly unused definitions</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:saveRootBranch">saveRootBranch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a>, <a href="U-Codebase-Sqlite-DbId.html#t:CausalHashId" title="U.Codebase.Sqlite.DbId">CausalHashId</a>)</li><li class="src short"><a href="#v:loadRootCausalHash">loadRootCausalHash</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>)</li><li class="src short"><a href="#v:expectRootCausalHash">expectRootCausalHash</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a></li><li class="src short"><a href="#v:expectRootCausal">expectRootCausal</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>)</li><li class="src short"><a href="#v:expectRootBranchHash">expectRootBranchHash</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a></li><li class="src short"><a href="#v:loadCausalHashAtPath">loadCausalHashAtPath</a> :: [<a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>)</li><li class="src short"><a href="#v:expectCausalHashAtPath">expectCausalHashAtPath</a> :: [<a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a></li><li class="src short"><a href="#v:saveBranch">saveBranch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a>, <a href="U-Codebase-Sqlite-DbId.html#t:CausalHashId" title="U.Codebase.Sqlite.DbId">CausalHashId</a>)</li><li class="src short"><a href="#v:loadCausalBranchByCausalHash">loadCausalBranchByCausalHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>))</li><li class="src short"><a href="#v:expectCausalBranchByCausalHash">expectCausalBranchByCausalHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>)</li><li class="src short"><a href="#v:expectBranchByBranchHash">expectBranchByBranchHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:Branch" title="U.Codebase.Branch.Type">Branch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>)</li><li class="src short"><a href="#v:expectNamespaceStatsByHash">expectNamespaceStatsByHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a></li><li class="src short"><a href="#v:expectNamespaceStatsByHashId">expectNamespaceStatsByHashId</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:BranchHashId" title="U.Codebase.Sqlite.DbId">BranchHashId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a></li><li class="src short"><a href="#v:saveTermComponent">saveTermComponent</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../bytestring-0.10.12.0/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; [(<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:ObjectId" title="U.Codebase.Sqlite.DbId">ObjectId</a></li><li class="src short"><a href="#v:loadTermComponent">loadTermComponent</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [(<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)]</li><li class="src short"><a href="#v:loadTermByReference">loadTermByReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:loadTypeOfTermByTermReference">loadTypeOfTermByTermReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:saveDeclComponent">saveDeclComponent</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../bytestring-0.10.12.0/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; [<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:ObjectId" title="U.Codebase.Sqlite.DbId">ObjectId</a></li><li class="src short"><a href="#v:loadDeclComponent">loadDeclComponent</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>]</li><li class="src short"><a href="#v:loadDeclByReference">loadDeclByReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:expectDeclTypeById">expectDeclTypeById</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:DeclType" title="U.Codebase.Decl">DeclType</a></li><li class="src short"><a href="#v:getCycleLen">getCycleLen</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>)</li><li class="src short"><a href="#v:savePatch">savePatch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:PatchHash" title="U.Codebase.HashTags">PatchHash</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:Patch" title="U.Codebase.Branch.Type">Patch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a></li><li class="src short"><a href="#v:expectPatch">expectPatch</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:Patch" title="U.Codebase.Branch.Type">Patch</a></li><li class="src short"><a href="#v:objectExistsForHash">objectExistsForHash</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:saveWatch">saveWatch</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-WatchKind.html#t:WatchKind" title="U.Codebase.WatchKind">WatchKind</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</li><li class="src short"><a href="#v:loadWatch">loadWatch</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-WatchKind.html#t:WatchKind" title="U.Codebase.WatchKind">WatchKind</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:listWatches">listWatches</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-WatchKind.html#t:WatchKind" title="U.Codebase.WatchKind">WatchKind</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>]</li><li class="src short"><a href="#v:clearWatches">clearWatches</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</li><li class="src short"><a href="#v:before">before</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:lca">lca</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>)</li><li class="src short"><a href="#v:componentReferencesByPrefix">componentReferencesByPrefix</a> :: <a href="U-Codebase-Sqlite-ObjectType.html#t:ObjectType" title="U.Codebase.Sqlite.ObjectType">ObjectType</a> -&gt; <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="U-Codebase-Sqlite-Reference.html#t:Id" title="U.Codebase.Sqlite.Reference">Id</a>]</li><li class="src short"><a href="#v:termReferentsByPrefix">termReferentsByPrefix</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a>]</li><li class="src short"><a href="#v:declReferentsByPrefix">declReferentsByPrefix</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:ConstructorId" title="U.Codebase.Decl">ConstructorId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [(<a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:DeclType" title="U.Codebase.Decl">DeclType</a>, [<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:ConstructorId" title="U.Codebase.Decl">ConstructorId</a>])]</li><li class="src short"><a href="#v:causalHashesByPrefix">causalHashesByPrefix</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-ShortHash.html#t:ShortCausalHash" title="U.Codebase.ShortHash">ShortCausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>)</li><li class="src short"><a href="#v:dependents">dependents</a> :: <a href="U-Codebase-Sqlite-Queries.html#t:DependentsSelector" title="U.Codebase.Sqlite.Queries">DependentsSelector</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>)</li><li class="src short"><a href="#v:dependentsOfComponent">dependentsOfComponent</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>)</li><li class="src short"><a href="#v:addTypeToIndexForTerm">addTypeToIndexForTerm</a> :: <a href="U-Codebase-Sqlite-Referent.html#t:Id" title="U.Codebase.Sqlite.Referent">Id</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</li><li class="src short"><a href="#v:termsHavingType">termsHavingType</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a>)</li><li class="src short"><a href="#v:addTypeMentionsToIndexForTerm">addTypeMentionsToIndexForTerm</a> :: <a href="U-Codebase-Sqlite-Referent.html#t:Id" title="U.Codebase.Sqlite.Referent">Id</a> -&gt; <a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</li><li class="src short"><a href="#v:termsMentioningType">termsMentioningType</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a>)</li><li class="src short"><a href="#v:rootNamesByPath">rootNamesByPath</a> :: <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Operations.html#t:NamesByPath" title="U.Codebase.Sqlite.Operations">NamesByPath</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:NamesByPath">NamesByPath</a> = <a href="#v:NamesByPath">NamesByPath</a> {<ul class="subs"><li><a href="#v:termNamesInPath">termNamesInPath</a> :: [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Referent" title="U.Codebase.Referent">Referent</a>, <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:ConstructorType" title="U.Codebase.Referent">ConstructorType</a>)]</li><li><a href="#v:typeNamesInPath">typeNamesInPath</a> :: [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a>]</li></ul>}</li><li class="src short"><a href="#v:checkBranchHashNameLookupExists">checkBranchHashNameLookupExists</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:buildNameLookupForBranchHash">buildNameLookupForBranchHash</a> :: <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; ([<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Referent" title="U.Codebase.Referent">Referent</a>, <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:ConstructorType" title="U.Codebase.Referent">ConstructorType</a>)], [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Referent" title="U.Codebase.Referent">Referent</a>]) -&gt; ([<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a>], [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a>]) -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</li><li class="src short"><a href="#v:getReflog">getReflog</a> :: <a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Reflog.html#t:Entry" title="U.Codebase.Reflog">Entry</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>]</li><li class="src short"><a href="#v:appendReflog">appendReflog</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reflog.html#t:Entry" title="U.Codebase.Reflog">Entry</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</li><li class="src short"><a href="#v:expectDbBranch">expectDbBranch</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a></li><li class="src short"><a href="#v:saveDbBranch">saveDbBranch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> -&gt; <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a></li><li class="src short"><a href="#v:saveDbBranchUnderHashId">saveDbBranchUnderHashId</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="U-Codebase-Sqlite-DbId.html#t:BranchHashId" title="U.Codebase.Sqlite.DbId">BranchHashId</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> -&gt; <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a></li><li class="src short"><a href="#v:expectDbPatch">expectDbPatch</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Patch-Full.html#t:Patch" title="U.Codebase.Sqlite.Patch.Full">Patch</a></li><li class="src short"><a href="#v:saveDbPatch">saveDbPatch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:PatchHash" title="U.Codebase.HashTags">PatchHash</a> -&gt; <a href="U-Codebase-Sqlite-Patch-Format.html#t:PatchFormat" title="U.Codebase.Sqlite.Patch.Format">PatchFormat</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a></li><li class="src short"><a href="#v:expectDbBranchByCausalHashId">expectDbBranchByCausalHashId</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:CausalHashId" title="U.Codebase.Sqlite.DbId">CausalHashId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a></li><li class="src short"><a href="#v:namespaceStatsForDbBranch">namespaceStatsForDbBranch</a> :: <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a></li><li class="src short"><a href="#v:c2sReferenceId">c2sReferenceId</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Reference.html#t:Id" title="U.Codebase.Sqlite.Reference">Id</a></li><li class="src short"><a href="#v:c2sReferentId">c2sReferentId</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Referent.html#t:Id" title="U.Codebase.Sqlite.Referent">Id</a></li><li class="src short"><a href="#v:diffPatch">diffPatch</a> :: <a href="U-Codebase-Sqlite-Patch-Full.html#t:LocalPatch" title="U.Codebase.Sqlite.Patch.Full">LocalPatch</a> -&gt; <a href="U-Codebase-Sqlite-Patch-Full.html#t:LocalPatch" title="U.Codebase.Sqlite.Patch.Full">LocalPatch</a> -&gt; <a href="U-Codebase-Sqlite-Patch-Diff.html#t:LocalPatchDiff" title="U.Codebase.Sqlite.Patch.Diff">LocalPatchDiff</a></li><li class="src short"><a href="#v:decodeTermElementWithType">decodeTermElementWithType</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a> -&gt; <a href="../bytestring-0.10.12.0/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="U-Codebase-Sqlite-Decode.html#t:DecodeError" title="U.Codebase.Sqlite.Decode">DecodeError</a> (<a href="U-Codebase-Sqlite-LocalIds.html#t:LocalIds" title="U.Codebase.Sqlite.LocalIds">LocalIds</a>, <a href="U-Codebase-Sqlite-Term-Format.html#t:Term" title="U.Codebase.Sqlite.Term.Format">Term</a>, <a href="U-Codebase-Sqlite-Term-Format.html#t:Type" title="U.Codebase.Sqlite.Term.Format">Type</a>)</li><li class="src short"><a href="#v:loadTermWithTypeByReference">loadTermWithTypeByReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:s2cTermWithType">s2cTermWithType</a> :: <a href="U-Codebase-Sqlite-LocalIds.html#t:LocalIds" title="U.Codebase.Sqlite.LocalIds">LocalIds</a> -&gt; <a href="U-Codebase-Sqlite-Term-Format.html#t:Term" title="U.Codebase.Sqlite.Term.Format">Term</a> -&gt; <a href="U-Codebase-Sqlite-Term-Format.html#t:Type" title="U.Codebase.Sqlite.Term.Format">Type</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:s2cDecl">s2cDecl</a> :: <a href="U-Codebase-Sqlite-LocalIds.html#t:LocalIds" title="U.Codebase.Sqlite.LocalIds">LocalIds</a> -&gt; <a href="U-Codebase-Sqlite-Decl-Format.html#t:Decl" title="U.Codebase.Sqlite.Decl.Format">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)</li><li class="src short"><a href="#v:declReferencesByPrefix">declReferencesByPrefix</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>]</li><li class="src short"><a href="#v:namespaceHashesByPrefix">namespaceHashesByPrefix</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-ShortHash.html#t:ShortNamespaceHash" title="U.Codebase.ShortHash">ShortNamespaceHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a>)</li><li class="src short"><a href="#v:derivedDependencies">derivedDependencies</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>branches</h1></a><div class="top"><p class="src"><a id="v:saveRootBranch" class="def">saveRootBranch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a>, <a href="U-Codebase-Sqlite-DbId.html#t:CausalHashId" title="U.Codebase.Sqlite.DbId">CausalHashId</a>) <a href="src/U.Codebase.Sqlite.Operations.html#saveRootBranch" class="link">Source</a> <a href="#v:saveRootBranch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadRootCausalHash" class="def">loadRootCausalHash</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadRootCausalHash" class="link">Source</a> <a href="#v:loadRootCausalHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectRootCausalHash" class="def">expectRootCausalHash</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectRootCausalHash" class="link">Source</a> <a href="#v:expectRootCausalHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectRootCausal" class="def">expectRootCausal</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>) <a href="src/U.Codebase.Sqlite.Operations.html#expectRootCausal" class="link">Source</a> <a href="#v:expectRootCausal" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectRootBranchHash" class="def">expectRootBranchHash</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectRootBranchHash" class="link">Source</a> <a href="#v:expectRootBranchHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadCausalHashAtPath" class="def">loadCausalHashAtPath</a> :: [<a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadCausalHashAtPath" class="link">Source</a> <a href="#v:loadCausalHashAtPath" class="selflink">#</a></p><div class="doc"><p>Load the causal hash at the given path from the root.</p><p>FIXME should we move some Path type here?</p></div></div><div class="top"><p class="src"><a id="v:expectCausalHashAtPath" class="def">expectCausalHashAtPath</a> :: [<a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectCausalHashAtPath" class="link">Source</a> <a href="#v:expectCausalHashAtPath" class="selflink">#</a></p><div class="doc"><p>Expect the causal hash at the given path from the root.</p><p>FIXME should we move some Path type here?</p></div></div><div class="top"><p class="src"><a id="v:saveBranch" class="def">saveBranch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a>, <a href="U-Codebase-Sqlite-DbId.html#t:CausalHashId" title="U.Codebase.Sqlite.DbId">CausalHashId</a>) <a href="src/U.Codebase.Sqlite.Operations.html#saveBranch" class="link">Source</a> <a href="#v:saveBranch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadCausalBranchByCausalHash" class="def">loadCausalBranchByCausalHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>)) <a href="src/U.Codebase.Sqlite.Operations.html#loadCausalBranchByCausalHash" class="link">Source</a> <a href="#v:loadCausalBranchByCausalHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectCausalBranchByCausalHash" class="def">expectCausalBranchByCausalHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:CausalBranch" title="U.Codebase.Branch.Type">CausalBranch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>) <a href="src/U.Codebase.Sqlite.Operations.html#expectCausalBranchByCausalHash" class="link">Source</a> <a href="#v:expectCausalBranchByCausalHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectBranchByBranchHash" class="def">expectBranchByBranchHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:Branch" title="U.Codebase.Branch.Type">Branch</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a>) <a href="src/U.Codebase.Sqlite.Operations.html#expectBranchByBranchHash" class="link">Source</a> <a href="#v:expectBranchByBranchHash" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectNamespaceStatsByHash" class="def">expectNamespaceStatsByHash</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectNamespaceStatsByHash" class="link">Source</a> <a href="#v:expectNamespaceStatsByHash" class="selflink">#</a></p><div class="doc"><p>Looks up statistics for a given branch, if none exist, we compute them and save them
 then return them.</p></div></div><div class="top"><p class="src"><a id="v:expectNamespaceStatsByHashId" class="def">expectNamespaceStatsByHashId</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:BranchHashId" title="U.Codebase.Sqlite.DbId">BranchHashId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectNamespaceStatsByHashId" class="link">Source</a> <a href="#v:expectNamespaceStatsByHashId" class="selflink">#</a></p><div class="doc"><p>Looks up statistics for a given branch, if none exist, we compute them and save them
 then return them.</p></div></div><a href="#g:2" id="g:2"><h1>terms</h1></a><div class="top"><p class="src"><a id="v:saveTermComponent" class="def">saveTermComponent</a> <a href="src/U.Codebase.Sqlite.Queries.html#saveTermComponent" class="link">Source</a> <a href="#v:saveTermComponent" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../bytestring-0.10.12.0/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>The serialized term component if we already have it e.g. via sync</p></td></tr><tr><td class="src">-&gt; <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a></td><td class="doc"><p>term component hash</p></td></tr><tr><td class="src">-&gt; [(<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)]</td><td class="doc"><p>term component</p></td></tr><tr><td class="src">-&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:ObjectId" title="U.Codebase.Sqlite.DbId">ObjectId</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:loadTermComponent" class="def">loadTermComponent</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [(<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>)] <a href="src/U.Codebase.Sqlite.Operations.html#loadTermComponent" class="link">Source</a> <a href="#v:loadTermComponent" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadTermByReference" class="def">loadTermByReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadTermByReference" class="link">Source</a> <a href="#v:loadTermByReference" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadTypeOfTermByTermReference" class="def">loadTypeOfTermByTermReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadTypeOfTermByTermReference" class="link">Source</a> <a href="#v:loadTypeOfTermByTermReference" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>decls</h1></a><div class="top"><p class="src"><a id="v:saveDeclComponent" class="def">saveDeclComponent</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../bytestring-0.10.12.0/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; [<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>] -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:ObjectId" title="U.Codebase.Sqlite.DbId">ObjectId</a> <a href="src/U.Codebase.Sqlite.Queries.html#saveDeclComponent" class="link">Source</a> <a href="#v:saveDeclComponent" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadDeclComponent" class="def">loadDeclComponent</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>] <a href="src/U.Codebase.Sqlite.Operations.html#loadDeclComponent" class="link">Source</a> <a href="#v:loadDeclComponent" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadDeclByReference" class="def">loadDeclByReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadDeclByReference" class="link">Source</a> <a href="#v:loadDeclByReference" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectDeclTypeById" class="def">expectDeclTypeById</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:DeclType" title="U.Codebase.Decl">DeclType</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectDeclTypeById" class="link">Source</a> <a href="#v:expectDeclTypeById" class="selflink">#</a></p><div class="doc"><p>Get the <code><a href="C-DeclType.html#v:DeclType" title="C.DeclType">DeclType</a></code> of a <code><a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a></code>.</p></div></div><a href="#g:4" id="g:4"><h1>terms/decls</h1></a><div class="top"><p class="src"><a id="v:getCycleLen" class="def">getCycleLen</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a>) <a href="src/U.Codebase.Sqlite.Operations.html#getCycleLen" class="link">Source</a> <a href="#v:getCycleLen" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h1>patches</h1></a><div class="top"><p class="src"><a id="v:savePatch" class="def">savePatch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:PatchHash" title="U.Codebase.HashTags">PatchHash</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:Patch" title="U.Codebase.Branch.Type">Patch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a> <a href="src/U.Codebase.Sqlite.Operations.html#savePatch" class="link">Source</a> <a href="#v:savePatch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectPatch" class="def">expectPatch</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:Patch" title="U.Codebase.Branch.Type">Patch</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectPatch" class="link">Source</a> <a href="#v:expectPatch" class="selflink">#</a></p></div><a href="#g:6" id="g:6"><h1>test for stuff in codebase</h1></a><div class="top"><p class="src"><a id="v:objectExistsForHash" class="def">objectExistsForHash</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/U.Codebase.Sqlite.Operations.html#objectExistsForHash" class="link">Source</a> <a href="#v:objectExistsForHash" class="selflink">#</a></p></div><a href="#g:7" id="g:7"><h1>watch expression cache</h1></a><div class="top"><p class="src"><a id="v:saveWatch" class="def">saveWatch</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-WatchKind.html#t:WatchKind" title="U.Codebase.WatchKind">WatchKind</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> () <a href="src/U.Codebase.Sqlite.Operations.html#saveWatch" class="link">Source</a> <a href="#v:saveWatch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadWatch" class="def">loadWatch</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-WatchKind.html#t:WatchKind" title="U.Codebase.WatchKind">WatchKind</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadWatch" class="link">Source</a> <a href="#v:loadWatch" class="selflink">#</a></p><div class="doc"><p>returns Nothing if the expression isn't cached.</p></div></div><div class="top"><p class="src"><a id="v:listWatches" class="def">listWatches</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-WatchKind.html#t:WatchKind" title="U.Codebase.WatchKind">WatchKind</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>] <a href="src/U.Codebase.Sqlite.Operations.html#listWatches" class="link">Source</a> <a href="#v:listWatches" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:clearWatches" class="def">clearWatches</a> :: <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> () <a href="src/U.Codebase.Sqlite.Queries.html#clearWatches" class="link">Source</a> <a href="#v:clearWatches" class="selflink">#</a></p><div class="doc"><p>Delete all watches that were put by <code>putWatch</code>.</p></div></div><a href="#g:8" id="g:8"><h1>indexes</h1></a><a href="#g:9" id="g:9"><h2>nearest common ancestor</h2></a><div class="top"><p class="src"><a id="v:before" class="def">before</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="src/U.Codebase.Sqlite.Operations.html#before" class="link">Source</a> <a href="#v:before" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lca" class="def">lca</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>) <a href="src/U.Codebase.Sqlite.Operations.html#lca" class="link">Source</a> <a href="#v:lca" class="selflink">#</a></p></div><a href="#g:10" id="g:10"><h2>prefix index</h2></a><div class="top"><p class="src"><a id="v:componentReferencesByPrefix" class="def">componentReferencesByPrefix</a> :: <a href="U-Codebase-Sqlite-ObjectType.html#t:ObjectType" title="U.Codebase.Sqlite.ObjectType">ObjectType</a> -&gt; <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="U-Codebase-Sqlite-Reference.html#t:Id" title="U.Codebase.Sqlite.Reference">Id</a>] <a href="src/U.Codebase.Sqlite.Operations.html#componentReferencesByPrefix" class="link">Source</a> <a href="#v:componentReferencesByPrefix" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:termReferentsByPrefix" class="def">termReferentsByPrefix</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a>] <a href="src/U.Codebase.Sqlite.Operations.html#termReferentsByPrefix" class="link">Source</a> <a href="#v:termReferentsByPrefix" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:declReferentsByPrefix" class="def">declReferentsByPrefix</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:ConstructorId" title="U.Codebase.Decl">ConstructorId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [(<a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:DeclType" title="U.Codebase.Decl">DeclType</a>, [<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:ConstructorId" title="U.Codebase.Decl">ConstructorId</a>])] <a href="src/U.Codebase.Sqlite.Operations.html#declReferentsByPrefix" class="link">Source</a> <a href="#v:declReferentsByPrefix" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:causalHashesByPrefix" class="def">causalHashesByPrefix</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-ShortHash.html#t:ShortCausalHash" title="U.Codebase.ShortHash">ShortCausalHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a>) <a href="src/U.Codebase.Sqlite.Operations.html#causalHashesByPrefix" class="link">Source</a> <a href="#v:causalHashesByPrefix" class="selflink">#</a></p></div><a href="#g:11" id="g:11"><h2>dependents index</h2></a><div class="top"><p class="src"><a id="v:dependents" class="def">dependents</a> :: <a href="U-Codebase-Sqlite-Queries.html#t:DependentsSelector" title="U.Codebase.Sqlite.Queries">DependentsSelector</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>) <a href="src/U.Codebase.Sqlite.Operations.html#dependents" class="link">Source</a> <a href="#v:dependents" class="selflink">#</a></p><div class="doc"><p>returns a list of known definitions referencing <code>r</code></p></div></div><div class="top"><p class="src"><a id="v:dependentsOfComponent" class="def">dependentsOfComponent</a> :: <a href="../unison-hash-0.0.0/Unison-Hash.html#t:Hash" title="Unison.Hash">Hash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>) <a href="src/U.Codebase.Sqlite.Operations.html#dependentsOfComponent" class="link">Source</a> <a href="#v:dependentsOfComponent" class="selflink">#</a></p><div class="doc"><p>returns a list of known definitions referencing <code>h</code></p></div></div><a href="#g:12" id="g:12"><h2>type index</h2></a><div class="top"><p class="src"><a id="v:addTypeToIndexForTerm" class="def">addTypeToIndexForTerm</a> :: <a href="U-Codebase-Sqlite-Referent.html#t:Id" title="U.Codebase.Sqlite.Referent">Id</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> () <a href="src/U.Codebase.Sqlite.Queries.html#addTypeToIndexForTerm" class="link">Source</a> <a href="#v:addTypeToIndexForTerm" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:termsHavingType" class="def">termsHavingType</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a>) <a href="src/U.Codebase.Sqlite.Operations.html#termsHavingType" class="link">Source</a> <a href="#v:termsHavingType" class="selflink">#</a></p></div><a href="#g:13" id="g:13"><h2>type mentions index</h2></a><div class="top"><p class="src"><a id="v:addTypeMentionsToIndexForTerm" class="def">addTypeMentionsToIndexForTerm</a> :: <a href="U-Codebase-Sqlite-Referent.html#t:Id" title="U.Codebase.Sqlite.Referent">Id</a> -&gt; <a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> () <a href="src/U.Codebase.Sqlite.Queries.html#addTypeMentionsToIndexForTerm" class="link">Source</a> <a href="#v:addTypeMentionsToIndexForTerm" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:termsMentioningType" class="def">termsMentioningType</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a>) <a href="src/U.Codebase.Sqlite.Operations.html#termsMentioningType" class="link">Source</a> <a href="#v:termsMentioningType" class="selflink">#</a></p></div><a href="#g:14" id="g:14"><h2>name lookup index</h2></a><div class="top"><p class="src"><a id="v:rootNamesByPath" class="def">rootNamesByPath</a> <a href="src/U.Codebase.Sqlite.Operations.html#rootNamesByPath" class="link">Source</a> <a href="#v:rootNamesByPath" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a></td><td class="doc"><p>A relative namespace string, e.g. Just &quot;base.List&quot;</p></td></tr><tr><td class="src">-&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Operations.html#t:NamesByPath" title="U.Codebase.Sqlite.Operations">NamesByPath</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Get all the term and type names for the root namespace from the lookup table.
 Requires that an index for this branch hash already exists, which is currently
 only true on Share.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NamesByPath" class="def">NamesByPath</a> <a href="src/U.Codebase.Sqlite.Operations.html#NamesByPath" class="link">Source</a> <a href="#t:NamesByPath" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NamesByPath" class="def">NamesByPath</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:termNamesInPath" class="def">termNamesInPath</a> :: [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Referent" title="U.Codebase.Referent">Referent</a>, <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:ConstructorType" title="U.Codebase.Referent">ConstructorType</a>)]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:typeNamesInPath" class="def">typeNamesInPath</a> :: [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a>]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:checkBranchHashNameLookupExists" class="def">checkBranchHashNameLookupExists</a> :: <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/U.Codebase.Sqlite.Operations.html#checkBranchHashNameLookupExists" class="link">Source</a> <a href="#v:checkBranchHashNameLookupExists" class="selflink">#</a></p><div class="doc"><p>Check whether we've already got an index for a given causal hash.</p></div></div><div class="top"><p class="src"><a id="v:buildNameLookupForBranchHash" class="def">buildNameLookupForBranchHash</a> <a href="src/U.Codebase.Sqlite.Operations.html#buildNameLookupForBranchHash" class="link">Source</a> <a href="#v:buildNameLookupForBranchHash" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ([<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Referent" title="U.Codebase.Referent">Referent</a>, <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:ConstructorType" title="U.Codebase.Referent">ConstructorType</a>)], [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Referent" title="U.Codebase.Referent">Referent</a>])</td><td class="doc"><p>(add terms, remove terms)</p></td></tr><tr><td class="src">-&gt; ([<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a>], [<a href="U-Codebase-Sqlite-NamedRef.html#t:NamedRef" title="U.Codebase.Sqlite.NamedRef">NamedRef</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Reference" title="U.Codebase.Reference">Reference</a>])</td><td class="doc"><p>(add types, remove types)</p></td></tr><tr><td class="src">-&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Apply a set of name updates to an existing index.</p></div></div><a href="#g:15" id="g:15"><h1>reflog</h1></a><div class="top"><p class="src"><a id="v:getReflog" class="def">getReflog</a> :: <a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Reflog.html#t:Entry" title="U.Codebase.Reflog">Entry</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>] <a href="src/U.Codebase.Sqlite.Operations.html#getReflog" class="link">Source</a> <a href="#v:getReflog" class="selflink">#</a></p><div class="doc"><p>Gets the specified number of reflog entries in chronological order, most recent first.</p></div></div><div class="top"><p class="src"><a id="v:appendReflog" class="def">appendReflog</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reflog.html#t:Entry" title="U.Codebase.Reflog">Entry</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:CausalHash" title="U.Codebase.HashTags">CausalHash</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> () <a href="src/U.Codebase.Sqlite.Operations.html#appendReflog" class="link">Source</a> <a href="#v:appendReflog" class="selflink">#</a></p></div><a href="#g:16" id="g:16"><h1>low-level stuff</h1></a><div class="top"><p class="src"><a id="v:expectDbBranch" class="def">expectDbBranch</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectDbBranch" class="link">Source</a> <a href="#v:expectDbBranch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:saveDbBranch" class="def">saveDbBranch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> -&gt; <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a> <a href="src/U.Codebase.Sqlite.Operations.html#saveDbBranch" class="link">Source</a> <a href="#v:saveDbBranch" class="selflink">#</a></p><div class="doc"><p>Save a <code><a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a></code>, given its hash (which the caller is expected to produce from the branch).</p><p>Note: long-standing question: should this package depend on the hashing package? (If so, we would only need to take
 the DbBranch, and hash internally).</p></div></div><div class="top"><p class="src"><a id="v:saveDbBranchUnderHashId" class="def">saveDbBranchUnderHashId</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="U-Codebase-Sqlite-DbId.html#t:BranchHashId" title="U.Codebase.Sqlite.DbId">BranchHashId</a> -&gt; <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> -&gt; <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:BranchObjectId" title="U.Codebase.Sqlite.DbId">BranchObjectId</a> <a href="src/U.Codebase.Sqlite.Operations.html#saveDbBranchUnderHashId" class="link">Source</a> <a href="#v:saveDbBranchUnderHashId" class="selflink">#</a></p><div class="doc"><p>Variant of <code><a href="U-Codebase-Sqlite-Operations.html#v:saveDbBranch" title="U.Codebase.Sqlite.Operations">saveDbBranch</a></code> that might be preferred by callers that already have a hash id, not a hash.</p></div></div><div class="top"><p class="src"><a id="v:expectDbPatch" class="def">expectDbPatch</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Patch-Full.html#t:Patch" title="U.Codebase.Sqlite.Patch.Full">Patch</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectDbPatch" class="link">Source</a> <a href="#v:expectDbPatch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:saveDbPatch" class="def">saveDbPatch</a> :: <a href="U-Codebase-Sqlite-HashHandle.html#t:HashHandle" title="U.Codebase.Sqlite.HashHandle">HashHandle</a> -&gt; <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:PatchHash" title="U.Codebase.HashTags">PatchHash</a> -&gt; <a href="U-Codebase-Sqlite-Patch-Format.html#t:PatchFormat" title="U.Codebase.Sqlite.Patch.Format">PatchFormat</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-DbId.html#t:PatchObjectId" title="U.Codebase.Sqlite.DbId">PatchObjectId</a> <a href="src/U.Codebase.Sqlite.Operations.html#saveDbPatch" class="link">Source</a> <a href="#v:saveDbPatch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expectDbBranchByCausalHashId" class="def">expectDbBranchByCausalHashId</a> :: <a href="U-Codebase-Sqlite-DbId.html#t:CausalHashId" title="U.Codebase.Sqlite.DbId">CausalHashId</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> <a href="src/U.Codebase.Sqlite.Operations.html#expectDbBranchByCausalHashId" class="link">Source</a> <a href="#v:expectDbBranchByCausalHashId" class="selflink">#</a></p><div class="doc"><p>Expect a branch value given its causal hash id.</p></div></div><div class="top"><p class="src"><a id="v:namespaceStatsForDbBranch" class="def">namespaceStatsForDbBranch</a> :: <a href="U-Codebase-Sqlite-Branch-Full.html#t:DbBranch" title="U.Codebase.Sqlite.Branch.Full">DbBranch</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="../unison-codebase-0.0.0/U-Codebase-Branch-Type.html#t:NamespaceStats" title="U.Codebase.Branch.Type">NamespaceStats</a> <a href="src/U.Codebase.Sqlite.Operations.html#namespaceStatsForDbBranch" class="link">Source</a> <a href="#v:namespaceStatsForDbBranch" class="selflink">#</a></p></div><a href="#g:17" id="g:17"><h1>somewhat unexpectedly unused definitions</h1></a><div class="top"><p class="src"><a id="v:c2sReferenceId" class="def">c2sReferenceId</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Reference.html#t:Id" title="U.Codebase.Sqlite.Reference">Id</a> <a href="src/U.Codebase.Sqlite.Operations.html#c2sReferenceId" class="link">Source</a> <a href="#v:c2sReferenceId" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:c2sReferentId" class="def">c2sReferentId</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Referent.html#t:Id" title="U.Codebase.Referent">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> <a href="U-Codebase-Sqlite-Referent.html#t:Id" title="U.Codebase.Sqlite.Referent">Id</a> <a href="src/U.Codebase.Sqlite.Operations.html#c2sReferentId" class="link">Source</a> <a href="#v:c2sReferentId" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:diffPatch" class="def">diffPatch</a> :: <a href="U-Codebase-Sqlite-Patch-Full.html#t:LocalPatch" title="U.Codebase.Sqlite.Patch.Full">LocalPatch</a> -&gt; <a href="U-Codebase-Sqlite-Patch-Full.html#t:LocalPatch" title="U.Codebase.Sqlite.Patch.Full">LocalPatch</a> -&gt; <a href="U-Codebase-Sqlite-Patch-Diff.html#t:LocalPatchDiff" title="U.Codebase.Sqlite.Patch.Diff">LocalPatchDiff</a> <a href="src/U.Codebase.Sqlite.Operations.html#diffPatch" class="link">Source</a> <a href="#v:diffPatch" class="selflink">#</a></p><div class="doc"><p>produces a diff
 diff = full - ref; full = diff + ref</p></div></div><div class="top"><p class="src"><a id="v:decodeTermElementWithType" class="def">decodeTermElementWithType</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Pos" title="U.Codebase.Reference">Pos</a> -&gt; <a href="../bytestring-0.10.12.0/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="U-Codebase-Sqlite-Decode.html#t:DecodeError" title="U.Codebase.Sqlite.Decode">DecodeError</a> (<a href="U-Codebase-Sqlite-LocalIds.html#t:LocalIds" title="U.Codebase.Sqlite.LocalIds">LocalIds</a>, <a href="U-Codebase-Sqlite-Term-Format.html#t:Term" title="U.Codebase.Sqlite.Term.Format">Term</a>, <a href="U-Codebase-Sqlite-Term-Format.html#t:Type" title="U.Codebase.Sqlite.Term.Format">Type</a>) <a href="src/U.Codebase.Sqlite.Decode.html#decodeTermElementWithType" class="link">Source</a> <a href="#v:decodeTermElementWithType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadTermWithTypeByReference" class="def">loadTermWithTypeByReference</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../transformers-0.5.6.2/Control-Monad-Trans-Maybe.html#t:MaybeT" title="Control.Monad.Trans.Maybe">MaybeT</a> <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Operations.html#loadTermWithTypeByReference" class="link">Source</a> <a href="#v:loadTermWithTypeByReference" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:s2cTermWithType" class="def">s2cTermWithType</a> :: <a href="U-Codebase-Sqlite-LocalIds.html#t:LocalIds" title="U.Codebase.Sqlite.LocalIds">LocalIds</a> -&gt; <a href="U-Codebase-Sqlite-Term-Format.html#t:Term" title="U.Codebase.Sqlite.Term.Format">Term</a> -&gt; <a href="U-Codebase-Sqlite-Term-Format.html#t:Type" title="U.Codebase.Sqlite.Term.Format">Type</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Term" title="U.Codebase.Term">Term</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>, <a href="../unison-codebase-0.0.0/U-Codebase-Term.html#t:Type" title="U.Codebase.Term">Type</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Queries.html#s2cTermWithType" class="link">Source</a> <a href="#v:s2cTermWithType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:s2cDecl" class="def">s2cDecl</a> :: <a href="U-Codebase-Sqlite-LocalIds.html#t:LocalIds" title="U.Codebase.Sqlite.LocalIds">LocalIds</a> -&gt; <a href="U-Codebase-Sqlite-Decl-Format.html#t:Decl" title="U.Codebase.Sqlite.Decl.Format">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../unison-codebase-0.0.0/U-Codebase-Decl.html#t:Decl" title="U.Codebase.Decl">Decl</a> <a href="U-Codebase-Sqlite-Symbol.html#t:Symbol" title="U.Codebase.Sqlite.Symbol">Symbol</a>) <a href="src/U.Codebase.Sqlite.Queries.html#s2cDecl" class="link">Source</a> <a href="#v:s2cDecl" class="selflink">#</a></p><div class="doc"><p>Unlocalize a decl.</p></div></div><div class="top"><p class="src"><a id="v:declReferencesByPrefix" class="def">declReferencesByPrefix</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="../base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.3.0/Data-Word.html#t:Word64" title="Data.Word">Word64</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> [<a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>] <a href="src/U.Codebase.Sqlite.Operations.html#declReferencesByPrefix" class="link">Source</a> <a href="#v:declReferencesByPrefix" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:namespaceHashesByPrefix" class="def">namespaceHashesByPrefix</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-ShortHash.html#t:ShortNamespaceHash" title="U.Codebase.ShortHash">ShortNamespaceHash</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-core-0.0.0/U-Codebase-HashTags.html#t:BranchHash" title="U.Codebase.HashTags">BranchHash</a>) <a href="src/U.Codebase.Sqlite.Operations.html#namespaceHashesByPrefix" class="link">Source</a> <a href="#v:namespaceHashesByPrefix" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:derivedDependencies" class="def">derivedDependencies</a> :: <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a> -&gt; <a href="../unison-sqlite-0.0.0/Unison-Sqlite-Transaction.html#t:Transaction" title="Unison.Sqlite.Transaction">Transaction</a> (<a href="../containers-0.6.5.1/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="../unison-codebase-0.0.0/U-Codebase-Reference.html#t:Id" title="U.Codebase.Reference">Id</a>) <a href="src/U.Codebase.Sqlite.Operations.html#derivedDependencies" class="link">Source</a> <a href="#v:derivedDependencies" class="selflink">#</a></p><div class="doc"><p>returns empty set for unknown inputs; doesn't distinguish between term and decl</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>