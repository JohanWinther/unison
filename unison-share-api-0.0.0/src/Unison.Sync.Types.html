<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Name shadowing is really helpful for writing some custom traversals</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-name-shadowing #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.Sync.Types</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Misc. types</span></span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier">Base64Bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier">pathRepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier">pathCodebasePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Entity types</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier">Entity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier">TermComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier">DeclComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier">PatchDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier">Namespace</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier">NamespaceDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier">Causal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier">LocalIds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier">entityDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier">EntityType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Entity Traversals</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier">entityHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier">patchHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier">patchDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier">namespaceDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier">causalHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Request/response types</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Get causal hash by path</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier">GetCausalHashByPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Download entities</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier">DownloadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier">DownloadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Upload entities</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier">UploadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier">UploadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Fast-forward path</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier">FastForwardPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier">FastForwardPathError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Update path</span></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier">UpdatePathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier">UpdatePathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier">UpdatePathError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier">HashMismatch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Common/shared error types</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier">HashMismatchForEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier">InvalidParentage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier">NeedDependencies</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">both</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traverseOf</span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifoldable</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteArray.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base64</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertFromBase</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertToBase</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NEMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NESet</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">U.Codebase.Sqlite.Branch.Format</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LocalBranchBytes</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32.Orphans.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Share.API.Hash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- Misc. types</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">-- | A newtype for JSON encoding binary data.</span><span>
</span><span id="line-92"></span><span class="hs-keyword">newtype</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381736"><span id="local-6989586621679381738"><span id="local-6989586621679381740"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>  </span><span id="local-6989586621679381730"><span class="annot"><span class="annottext">toJSON :: Base64Bytes -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679381728"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381728"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">Text.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; bout
</span><span class="hs-identifier hs-var">convertToBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381728"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381722"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621679381714"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Base64Bytes
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Base64&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679381711"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679381711"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; Either String bout
</span><span class="hs-identifier hs-var">convertFromBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">Text.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679381711"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">newtype</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunRepoInfo%3ARepoInfo"><span class="annot"><span class="annottext">RepoInfo -&gt; Text
</span><a href="Unison.Sync.Types.html#%24sel%3AunRepoInfo%3ARepoInfo"><span class="hs-identifier hs-var hs-var">unRepoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381696"><span id="local-6989586621679381700"><span id="local-6989586621679381705"><span class="annot"><span class="annottext">Int -&gt; RepoInfo -&gt; ShowS
[RepoInfo] -&gt; ShowS
RepoInfo -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RepoInfo] -&gt; ShowS
$cshowList :: [RepoInfo] -&gt; ShowS
show :: RepoInfo -&gt; String
$cshow :: RepoInfo -&gt; String
showsPrec :: Int -&gt; RepoInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; RepoInfo -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381685"><span id="local-6989586621679381690"><span class="annot"><span class="annottext">RepoInfo -&gt; RepoInfo -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
== :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c== :: RepoInfo -&gt; RepoInfo -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381652"><span id="local-6989586621679381656"><span id="local-6989586621679381660"><span id="local-6989586621679381664"><span id="local-6989586621679381668"><span id="local-6989586621679381672"><span id="local-6989586621679381677"><span class="annot"><span class="annottext">Eq RepoInfo
RepoInfo -&gt; RepoInfo -&gt; Bool
RepoInfo -&gt; RepoInfo -&gt; Ordering
RepoInfo -&gt; RepoInfo -&gt; RepoInfo
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmin :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
max :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmax :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
compare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
$ccompare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381633"><span id="local-6989586621679381637"><span id="local-6989586621679381641"><span id="local-6989586621679381646"><span class="annot"><span class="annottext">[RepoInfo] -&gt; Encoding
[RepoInfo] -&gt; Value
RepoInfo -&gt; Encoding
RepoInfo -&gt; Value
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [RepoInfo] -&gt; Encoding
$ctoEncodingList :: [RepoInfo] -&gt; Encoding
toJSONList :: [RepoInfo] -&gt; Value
$ctoJSONList :: [RepoInfo] -&gt; Value
toEncoding :: RepoInfo -&gt; Encoding
$ctoEncoding :: RepoInfo -&gt; Encoding
toJSON :: RepoInfo -&gt; Value
$ctoJSON :: RepoInfo -&gt; Value
</span><a href="#local-6989586621679381633"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381623"><span id="local-6989586621679381628"><span class="annot"><span class="annottext">Value -&gt; Parser [RepoInfo]
Value -&gt; Parser RepoInfo
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [RepoInfo]
$cparseJSONList :: Value -&gt; Parser [RepoInfo]
parseJSON :: Value -&gt; Parser RepoInfo
$cparseJSON :: Value -&gt; Parser RepoInfo
</span><a href="#local-6989586621679381623"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-keyword">data</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- This is a nonempty list, where we require the first segment to be the repo name / user name / whatever,</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-comment">-- which we need on the server side as an implementation detail of how we're representing different users' codebases.</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-comment">-- This could be relaxed in some other share implementation that allows access to the &quot;root&quot; of the shared codebase.</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-comment">-- Our share implementation doesn't have a root, just a collection of sub-roots, one per user or (eventually) organization.</span><span>
</span><span id="line-110"></span><span>    </span><span id="%24sel%3ApathSegments%3APath"><span class="annot"><span class="annottext">Path -&gt; NonEmpty Text
</span><a href="Unison.Sync.Types.html#%24sel%3ApathSegments%3APath"><span class="hs-identifier hs-var hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381607"><span id="local-6989586621679381609"><span id="local-6989586621679381616"><span class="annot"><span class="annottext">Int -&gt; Path -&gt; ShowS
[Path] -&gt; ShowS
Path -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Path] -&gt; ShowS
$cshowList :: [Path] -&gt; ShowS
show :: Path -&gt; String
$cshow :: Path -&gt; String
showsPrec :: Int -&gt; Path -&gt; ShowS
$cshowsPrec :: Int -&gt; Path -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381600"><span id="local-6989586621679381605"><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Path -&gt; Path -&gt; Bool
$c/= :: Path -&gt; Path -&gt; Bool
== :: Path -&gt; Path -&gt; Bool
$c== :: Path -&gt; Path -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381576"><span id="local-6989586621679381578"><span id="local-6989586621679381581"><span id="local-6989586621679381584"><span id="local-6989586621679381587"><span id="local-6989586621679381591"><span id="local-6989586621679381596"><span class="annot"><span class="annottext">Eq Path
Path -&gt; Path -&gt; Bool
Path -&gt; Path -&gt; Ordering
Path -&gt; Path -&gt; Path
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Path -&gt; Path -&gt; Path
$cmin :: Path -&gt; Path -&gt; Path
max :: Path -&gt; Path -&gt; Path
$cmax :: Path -&gt; Path -&gt; Path
&gt;= :: Path -&gt; Path -&gt; Bool
$c&gt;= :: Path -&gt; Path -&gt; Bool
&gt; :: Path -&gt; Path -&gt; Bool
$c&gt; :: Path -&gt; Path -&gt; Bool
&lt;= :: Path -&gt; Path -&gt; Bool
$c&lt;= :: Path -&gt; Path -&gt; Bool
&lt; :: Path -&gt; Path -&gt; Bool
$c&lt; :: Path -&gt; Path -&gt; Bool
compare :: Path -&gt; Path -&gt; Ordering
$ccompare :: Path -&gt; Path -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-comment">-- | Convert a path like arya.public.mystuff to a &quot;repo info&quot; by treating the first segment as a user handle.</span><span>
</span><span id="line-115"></span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-type">pathRepoInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-116"></span><span id="pathRepoInfo"><span class="annot"><span class="annottext">pathRepoInfo :: Path -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-var hs-var">pathRepoInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381575"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679381575"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679381575"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-type">pathCodebasePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span id="pathCodebasePath"><span class="annot"><span class="annottext">pathCodebasePath :: Path -&gt; [Text]
</span><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-var hs-var">pathCodebasePath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679381573"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679381573"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679381573"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381566"><span id="local-6989586621679381568"><span id="local-6989586621679381570"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621679381558"><span class="annot"><span class="annottext">toJSON :: Path -&gt; Value
</span><a href="#local-6989586621679381558"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span id="local-6989586621679381557"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679381557"><span class="hs-identifier hs-var">segments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-124"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679381557"><span class="hs-identifier hs-var">segments</span></a></span><span>
</span><span id="line-125"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381552"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679381545"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Path
</span><a href="#local-6989586621679381545"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Path&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679381543"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381543"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-129"></span><span>    </span><span id="local-6989586621679381542"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679381542"><span class="hs-identifier hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381543"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NonEmpty Text
pathSegments :: NonEmpty Text
$sel:pathSegments:Path :: NonEmpty Text
</span><a href="#local-6989586621679381542"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- Entity types</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-keyword">data</span><span> </span><span id="Entity"><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-var">Entity</span></a></span></span><span> </span><span id="local-6989586621679382653"><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382652"><span class="annot"><a href="#local-6989586621679382652"><span class="hs-identifier hs-type">noSyncHash</span></a></span></span><span> </span><span id="local-6989586621679382651"><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TC"><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DC"><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="P"><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382652"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PD"><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382652"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="N"><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ND"><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382653"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="C"><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382651"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381514"><span id="local-6989586621679381516"><span id="local-6989586621679381532"><span class="annot"><span class="annottext">Int -&gt; Entity text noSyncHash hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
showList :: [Entity text noSyncHash hash] -&gt; ShowS
$cshowList :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
show :: Entity text noSyncHash hash -&gt; String
$cshow :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
showsPrec :: Int -&gt; Entity text noSyncHash hash -&gt; ShowS
$cshowsPrec :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381503"><span id="local-6989586621679381512"><span class="annot"><span class="annottext">Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
/= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c/= :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
== :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c== :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381480"><span id="local-6989586621679381482"><span id="local-6989586621679381484"><span id="local-6989586621679381486"><span id="local-6989586621679381488"><span id="local-6989586621679381490"><span id="local-6989586621679381499"><span class="annot"><span class="annottext">Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {noSyncHash} {hash}.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Eq (Entity text noSyncHash hash)
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
min :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmin :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
max :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmax :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
&gt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&gt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
compare :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
$ccompare :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381473"><span id="local-6989586621679381475"><span id="local-6989586621679381477"><span id="local-6989586621679382633"><span id="local-6989586621679382634"><span id="local-6989586621679382635"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382635"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382634"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382633"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382635"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382634"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382633"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>  </span><span id="local-6989586621679381465"><span class="annot"><span class="annottext">toJSON :: Entity text noSyncHash hash -&gt; Value
</span><a href="#local-6989586621679381465"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679381464"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679381464"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679381464"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679381461"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679381461"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679381461"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679381459"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679381459"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679381459"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679381457"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679381457"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679381457"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679381455"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679381455"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679381455"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679381453"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679381453"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679381453"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679381451"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679381451"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679381451"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>      </span><span id="local-6989586621679382617"><span class="annot"><a href="#local-6989586621679381463"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382617"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382617"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span></span><span>
</span><span id="line-156"></span><span>      </span><span id="local-6989586621679381463"><span class="annot"><span class="annottext">go :: forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679381463"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679381442"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679381442"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621679381441"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679381441"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679381442"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679381441"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381438"><span id="local-6989586621679382613"><span id="local-6989586621679382614"><span id="local-6989586621679382615"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382615"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382614"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382613"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679382613"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382615"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382614"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382613"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621679381412"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Entity text noSyncHash hash)
</span><a href="#local-6989586621679381412"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Entity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679381411"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-161"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-164"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-165"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-167"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381411"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621679382587"><span id="local-6989586621679382588"><span id="local-6989586621679382589"><span id="local-6989586621679382590"><span id="local-6989586621679382591"><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-type">entityHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679382591"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679382590"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382589"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382591"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382590"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382588"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382587"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382589"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382591"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382588"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382587"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382590"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-170"></span><span id="entityHashes_"><span class="annot"><span class="annottext">entityHashes_ :: forall (m :: * -&gt; *) hash' hash text noSyncHash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash')
-&gt; Entity text noSyncHash hash -&gt; m (Entity text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-var hs-var">entityHashes_</span></a></span></span><span> </span><span id="local-6989586621679381381"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679381380"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679381380"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679381380"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679381378"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679381378"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679381378"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679381377"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679381377"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-var">patchHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679381377"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679381376"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679381376"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var">patchDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679381376"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679381375"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679381375"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679381375"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679381374"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679381374"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var">namespaceDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679381374"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679381373"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679381373"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var">causalHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679381381"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679381373"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Get the direct dependencies of an entity (which are actually sync'd).</span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- FIXME use generic-lens here? (typed @hash)</span><span>
</span><span id="line-182"></span><span id="local-6989586621679382555"><span id="local-6989586621679382556"><span id="local-6989586621679382557"><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-type">entityDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679382557"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382556"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382555"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382557"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679382557"><span class="hs-identifier hs-type">hash</span></a></span></span></span></span><span>
</span><span id="line-183"></span><span id="entityDependencies"><span class="annot"><span class="annottext">entityDependencies :: forall hash text noSyncHash.
Ord hash =&gt;
Entity text noSyncHash hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-var hs-var">entityDependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679381344"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381344"><span class="hs-identifier hs-var">terms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381344"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381340"><span class="annot"><span class="annottext">[hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
hashes :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381338"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381338"><span class="hs-identifier hs-var">_term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381340"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679381335"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381335"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381335"><span class="hs-identifier hs-var">decls</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381334"><span class="annot"><span class="annottext">[hash]
hashes :: [hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="#local-6989586621679381334"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381333"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381333"><span class="hs-identifier hs-var">_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381334"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381331"><span class="annot"><span class="annottext">[hash]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
newHashLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381331"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-187"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381328"><span class="annot"><span class="annottext">hash
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
parent :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381326"><span class="annot"><span class="annottext">[hash]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
newHashLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381328"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381326"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381322"><span class="annot"><span class="annottext">[hash]
$sel:defnLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
defnLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381320"><span class="annot"><span class="annottext">[hash]
$sel:patchLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
patchLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381318"><span class="annot"><span class="annottext">[(hash, hash)]
$sel:childLookup:Namespace :: forall text hash. Namespace text hash -&gt; [(hash, hash)]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-189"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381322"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381320"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-192"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679381315"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381315"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381314"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381314"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381315"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381314"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679381318"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381312"><span class="annot"><span class="annottext">hash
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
parent :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381310"><span class="annot"><span class="annottext">[hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
defnLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381308"><span class="annot"><span class="annottext">[hash]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
patchLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381306"><span class="annot"><span class="annottext">[(hash, hash)]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-196"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381312"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381310"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679381308"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-199"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679381303"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381303"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381302"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381302"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381303"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381302"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679381306"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-201"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679381300"><span class="annot"><span class="annottext">hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
namespaceHash :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381298"><span class="annot"><span class="annottext">Set hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
parents :: Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679381300"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679381298"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-keyword">data</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span id="local-6989586621679382639"><span class="annot"><a href="#local-6989586621679382639"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382638"><span class="annot"><a href="#local-6989586621679382638"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382639"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382638"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381287"><span id="local-6989586621679381289"><span id="local-6989586621679381295"><span class="annot"><span class="annottext">Int -&gt; TermComponent text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
showList :: [TermComponent text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
show :: TermComponent text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
showsPrec :: Int -&gt; TermComponent text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381276"><span id="local-6989586621679381281"><span class="annot"><span class="annottext">TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
/= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
== :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381248"><span id="local-6989586621679381250"><span id="local-6989586621679381253"><span id="local-6989586621679381256"><span id="local-6989586621679381259"><span id="local-6989586621679381263"><span id="local-6989586621679381268"><span class="annot"><span class="annottext">TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (TermComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
min :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
max :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
&gt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&gt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
compare :: TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381235"><span id="local-6989586621679381237"><span id="local-6989586621679381240"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-207"></span><span>  </span><span id="local-6989586621679381230"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; TermComponent a b -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381223"><span id="local-6989586621679381225"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621679381220"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; TermComponent a c -&gt; TermComponent b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621679381207"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; TermComponent a b -&gt; f (TermComponent c d)
</span><a href="#local-6989586621679381207"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679381206"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679381206"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679381205"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679381205"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679381204"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679381204"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679381206"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679381205"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679381204"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381196"><span id="local-6989586621679381198"><span id="local-6989586621679381200"><span id="local-6989586621679382629"><span id="local-6989586621679382630"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382630"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382629"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382630"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382629"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-217"></span><span>  </span><span id="local-6989586621679381185"><span class="annot"><span class="annottext">toJSON :: TermComponent text hash -&gt; Value
</span><a href="#local-6989586621679381185"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679381184"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381184"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;terms&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381184"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381180"><span id="local-6989586621679382609"><span id="local-6989586621679382610"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382610"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382609"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382610"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382609"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>  </span><span id="local-6989586621679381167"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (TermComponent text hash)
</span><a href="#local-6989586621679381167"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TermComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679381166"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381166"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621679381165"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679381165"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381166"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;terms&quot;</span></span><span>
</span><span id="line-225"></span><span>    </span><span id="local-6989586621679381164"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381164"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679381165"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381164"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span id="local-6989586621679382486"><span id="local-6989586621679382487"><span id="local-6989586621679382488"><span id="local-6989586621679382489"><span id="local-6989586621679382490"><span class="annot"><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-type">bitraverseComponents</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679382490"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382490"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382488"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382487"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382490"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382486"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382487"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><a href="#local-6989586621679382490"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382488"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382486"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span></span></span></span><span>
</span><span id="line-234"></span><span id="bitraverseComponents"><span class="annot"><span class="annottext">bitraverseComponents :: forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var hs-var">bitraverseComponents</span></a></span></span><span> </span><span id="local-6989586621679381153"><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679381153"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679381152"><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679381152"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall {f :: * -&gt; *} {t} {a} {t}.
Functor f =&gt;
(t -&gt; f a) -&gt; (t, t) -&gt; f (a, t)
</span><a href="#local-6989586621679381151"><span class="hs-identifier hs-var">_1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679381153"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679381152"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621679381151"><span class="annot"><span class="annottext">_1 :: (t -&gt; f a) -&gt; (t, t) -&gt; f (a, t)
</span><a href="#local-6989586621679381151"><span class="hs-identifier hs-var hs-var">_1</span></a></span></span><span> </span><span id="local-6989586621679381148"><span class="annot"><span class="annottext">t -&gt; f a
</span><a href="#local-6989586621679381148"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381147"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679381147"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381146"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679381146"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679381146"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; f a
</span><a href="#local-6989586621679381148"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679381147"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span id="local-6989586621679382483"><span id="local-6989586621679382484"><span class="annot"><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-type">encodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382484"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382483"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382484"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382483"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span></span><span>
</span><span id="line-240"></span><span id="encodeComponentPiece"><span class="annot"><span class="annottext">encodeComponentPiece :: forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var hs-var">encodeComponentPiece</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381137"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679381137"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381136"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381136"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679381137"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381136"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span id="local-6989586621679382476"><span id="local-6989586621679382477"><span class="annot"><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-type">decodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382477"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382476"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382477"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382476"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-247"></span><span id="decodeComponentPiece"><span class="annot"><span class="annottext">decodeComponentPiece :: forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var hs-var">decodeComponentPiece</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Component Piece&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679381125"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381125"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621679381124"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679381124"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381125"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679381123"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381123"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381125"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679381124"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679381123"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">data</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span id="local-6989586621679382637"><span class="annot"><a href="#local-6989586621679382637"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382636"><span class="annot"><a href="#local-6989586621679382636"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382637"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382636"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381114"><span id="local-6989586621679381116"><span id="local-6989586621679381121"><span class="annot"><span class="annottext">Int -&gt; DeclComponent text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
showList :: [DeclComponent text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
show :: DeclComponent text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
showsPrec :: Int -&gt; DeclComponent text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381106"><span id="local-6989586621679381110"><span class="annot"><span class="annottext">DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
/= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
== :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679381081"><span id="local-6989586621679381083"><span id="local-6989586621679381086"><span id="local-6989586621679381089"><span id="local-6989586621679381092"><span id="local-6989586621679381096"><span id="local-6989586621679381100"><span class="annot"><span class="annottext">DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (DeclComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
min :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
max :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
&gt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&gt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
compare :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381070"><span id="local-6989586621679381072"><span id="local-6989586621679381075"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>  </span><span id="local-6989586621679381066"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; DeclComponent a b -&gt; m
</span><a href="#local-6989586621679381066"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381061"><span id="local-6989586621679381063"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>  </span><span id="local-6989586621679381059"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; DeclComponent a c -&gt; DeclComponent b d
</span><a href="#local-6989586621679381059"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621679381049"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; DeclComponent a b -&gt; f (DeclComponent c d)
</span><a href="#local-6989586621679381049"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679381048"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679381048"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679381047"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679381047"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679381046"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679381046"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679381048"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679381047"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679381046"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381039"><span id="local-6989586621679381041"><span id="local-6989586621679381043"><span id="local-6989586621679382631"><span id="local-6989586621679382632"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382632"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382631"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382632"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382631"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>  </span><span id="local-6989586621679381031"><span class="annot"><span class="annottext">toJSON :: DeclComponent text hash -&gt; Value
</span><a href="#local-6989586621679381031"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679381030"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381030"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;decls&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381030"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679381027"><span id="local-6989586621679382611"><span id="local-6989586621679382612"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382612"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382611"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382612"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382611"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-272"></span><span>  </span><span id="local-6989586621679381017"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (DeclComponent text hash)
</span><a href="#local-6989586621679381017"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DeclComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679381016"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381016"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621679381015"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679381015"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679381016"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;decls&quot;</span></span><span>
</span><span id="line-274"></span><span>    </span><span id="local-6989586621679381014"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381014"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679381015"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679381014"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-keyword">data</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span> </span><span id="local-6989586621679382543"><span class="annot"><a href="#local-6989586621679382543"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382542"><span class="annot"><a href="#local-6989586621679382542"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atexts%3ALocalIds"><span class="annot"><span class="annottext">forall text hash. LocalIds text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3Atexts%3ALocalIds"><span class="hs-identifier hs-var hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382543"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-279"></span><span>    </span><span id="%24sel%3Ahashes%3ALocalIds"><span class="annot"><span class="annottext">forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382542"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679381004"><span id="local-6989586621679381006"><span id="local-6989586621679381011"><span class="annot"><span class="annottext">Int -&gt; LocalIds text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
showList :: [LocalIds text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
show :: LocalIds text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
showsPrec :: Int -&gt; LocalIds text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380998"><span id="local-6989586621679381002"><span class="annot"><span class="annottext">LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
/= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
== :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380975"><span id="local-6989586621679380977"><span id="local-6989586621679380980"><span id="local-6989586621679380983"><span id="local-6989586621679380986"><span id="local-6989586621679380990"><span id="local-6989586621679380994"><span class="annot"><span class="annottext">LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (LocalIds text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
min :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
max :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
&gt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&gt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
compare :: LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380968"><span id="local-6989586621679380970"><span id="local-6989586621679380973"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-284"></span><span>  </span><span id="local-6989586621679380964"><span class="annot"><span class="annottext">bifoldMap :: forall m a b. Monoid m =&gt; (a -&gt; m) -&gt; (b -&gt; m) -&gt; LocalIds a b -&gt; m
</span><a href="#local-6989586621679380964"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380959"><span id="local-6989586621679380961"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-287"></span><span>  </span><span id="local-6989586621679380957"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; LocalIds a c -&gt; LocalIds b d
</span><a href="#local-6989586621679380957"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-290"></span><span>  </span><span id="local-6989586621679380943"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; LocalIds a b -&gt; f (LocalIds c d)
</span><a href="#local-6989586621679380943"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679380942"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679380942"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679380941"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380941"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679380940"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679380940"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679380939"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679380939"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">forall text hash. [text] -&gt; [hash] -&gt; LocalIds text hash
</span><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679380942"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679380940"><span class="hs-identifier hs-var">texts</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380941"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679380939"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380932"><span id="local-6989586621679380934"><span id="local-6989586621679380936"><span id="local-6989586621679382463"><span id="local-6989586621679382464"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382464"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382463"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382464"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382463"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-294"></span><span>  </span><span id="local-6989586621679380925"><span class="annot"><span class="annottext">toJSON :: LocalIds text hash -&gt; Value
</span><a href="#local-6989586621679380925"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679380924"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380924"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679380923"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380923"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;texts&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380924"><span class="hs-identifier hs-var">texts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-297"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380923"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-298"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380920"><span id="local-6989586621679382459"><span id="local-6989586621679382460"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382460"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382459"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382460"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382459"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-301"></span><span>  </span><span id="local-6989586621679380913"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (LocalIds text hash)
</span><a href="#local-6989586621679380913"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LocalIds&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380912"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380912"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621679380911"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380911"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380912"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;texts&quot;</span></span><span>
</span><span id="line-303"></span><span>    </span><span id="local-6989586621679380910"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380910"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380912"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[hash]
hashes :: [hash]
texts :: [text]
$sel:texts:LocalIds :: [text]
$sel:hashes:LocalIds :: [hash]
</span><a href="#local-6989586621679380910"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="hs-keyword">data</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span> </span><span id="local-6989586621679382642"><span class="annot"><a href="#local-6989586621679382642"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382641"><span class="annot"><a href="#local-6989586621679382641"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679382640"><span class="annot"><a href="#local-6989586621679382640"><span class="hs-identifier hs-type">newHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatch"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382642"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382641"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382640"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-310"></span><span>    </span><span id="%24sel%3Abytes%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatch"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380896"><span id="local-6989586621679380898"><span id="local-6989586621679380905"><span class="annot"><span class="annottext">Int -&gt; Patch text oldHash newHash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
showList :: [Patch text oldHash newHash] -&gt; ShowS
$cshowList :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
show :: Patch text oldHash newHash -&gt; String
$cshow :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
showsPrec :: Int -&gt; Patch text oldHash newHash -&gt; ShowS
$cshowsPrec :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380888"><span id="local-6989586621679380894"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
/= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c/= :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
== :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c== :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380861"><span id="local-6989586621679380863"><span id="local-6989586621679380866"><span id="local-6989586621679380869"><span id="local-6989586621679380872"><span id="local-6989586621679380878"><span id="local-6989586621679380884"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {oldHash} {newHash}.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Eq (Patch text oldHash newHash)
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
min :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmin :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
max :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmax :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
&gt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&gt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
compare :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
$ccompare :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380854"><span id="local-6989586621679380856"><span id="local-6989586621679380858"><span id="local-6989586621679382626"><span id="local-6989586621679382627"><span id="local-6989586621679382628"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382628"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382627"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382626"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382628"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382627"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382626"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679380841"><span class="annot"><span class="annottext">toJSON :: Patch text oldHash newHash -&gt; Value
</span><a href="#local-6989586621679380841"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span id="local-6989586621679380840"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380840"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679380839"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679380839"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679380838"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679380838"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679380837"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380837"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-317"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380840"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679380839"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679380838"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-320"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380837"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-321"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380834"><span id="local-6989586621679382606"><span id="local-6989586621679382607"><span id="local-6989586621679382608"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382608"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382607"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382606"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382608"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382607"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382606"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>  </span><span id="local-6989586621679380819"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Patch text oldHash newHash)
</span><a href="#local-6989586621679380819"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Patch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380818"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380818"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679380817"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380817"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380818"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679380816"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679380816"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380818"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-327"></span><span>    </span><span id="local-6989586621679380815"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679380815"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380818"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679380814"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380814"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380818"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[oldHash]
[newHash]
ByteString
bytes :: ByteString
newHashLookup :: [newHash]
oldHashLookup :: [oldHash]
textLookup :: [text]
$sel:bytes:Patch :: ByteString
$sel:oldHashLookup:Patch :: [oldHash]
$sel:textLookup:Patch :: [text]
$sel:newHashLookup:Patch :: [newHash]
</span><a href="#local-6989586621679380814"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span id="local-6989586621679382570"><span id="local-6989586621679382571"><span id="local-6989586621679382572"><span id="local-6989586621679382573"><span id="local-6989586621679382574"><span class="annot"><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-type">patchHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679382574"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382573"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382574"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382572"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382571"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382570"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382573"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382574"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382571"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382570"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382572"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-332"></span><span id="patchHashes_"><span class="annot"><span class="annottext">patchHashes_ :: forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-var hs-var">patchHashes_</span></a></span></span><span> </span><span id="local-6989586621679380808"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380808"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679380804"><span id="local-6989586621679380805"><span id="local-6989586621679380806"><span id="local-6989586621679380807"><span class="annot"><span class="annottext">[hash]
[text]
[noSyncHash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
$sel:oldHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
$sel:textLookup:Patch :: forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="#local-6989586621679380804"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-333"></span><span>  </span><span id="local-6989586621679380803"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679380803"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380808"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380805"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[hash']
[text]
[noSyncHash]
ByteString
newHashLookup :: [hash']
bytes :: ByteString
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:Patch :: ByteString
$sel:oldHashLookup:Patch :: [noSyncHash]
$sel:textLookup:Patch :: [text]
$sel:newHashLookup:Patch :: [hash']
</span><a href="#local-6989586621679380803"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-keyword">data</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span> </span><span id="local-6989586621679382644"><span class="annot"><a href="#local-6989586621679382644"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382643"><span class="annot"><a href="#local-6989586621679382643"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679382645"><span class="annot"><a href="#local-6989586621679382645"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679382645"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-338"></span><span>    </span><span id="%24sel%3AtextLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382644"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-339"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382643"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-340"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382645"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-341"></span><span>    </span><span id="%24sel%3Abytes%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatchDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380791"><span id="local-6989586621679380798"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
/= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c/= :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
== :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c== :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380762"><span id="local-6989586621679380764"><span id="local-6989586621679380767"><span id="local-6989586621679380770"><span id="local-6989586621679380773"><span id="local-6989586621679380780"><span id="local-6989586621679380787"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {oldHash} {hash}.
(Ord hash, Ord text, Ord oldHash) =&gt;
Eq (PatchDiff text oldHash hash)
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
min :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmin :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
max :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmax :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
&gt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&gt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
compare :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
$ccompare :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380750"><span id="local-6989586621679380752"><span id="local-6989586621679380760"><span class="annot"><span class="annottext">Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
showList :: [PatchDiff text oldHash hash] -&gt; ShowS
$cshowList :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
show :: PatchDiff text oldHash hash -&gt; String
$cshow :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
showsPrec :: Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
$cshowsPrec :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380743"><span id="local-6989586621679380745"><span id="local-6989586621679380747"><span id="local-6989586621679382623"><span id="local-6989586621679382624"><span id="local-6989586621679382625"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382625"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382624"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382623"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382625"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382624"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382623"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621679380727"><span class="annot"><span class="annottext">toJSON :: PatchDiff text oldHash hash -&gt; Value
</span><a href="#local-6989586621679380727"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span id="local-6989586621679380726"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380726"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679380725"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380725"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679380724"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679380724"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679380723"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380723"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679380722"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380722"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-348"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380726"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380725"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679380724"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380723"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-352"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380722"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-353"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380719"><span id="local-6989586621679382603"><span id="local-6989586621679382604"><span id="local-6989586621679382605"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382605"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382604"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382603"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382605"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382604"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382603"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-356"></span><span>  </span><span id="local-6989586621679380701"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (PatchDiff text oldHash hash)
</span><a href="#local-6989586621679380701"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PatchDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380700"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380700"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621679380699"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380699"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380700"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621679380698"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380698"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380700"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621679380697"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679380697"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380700"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621679380696"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380696"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380700"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679380695"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380695"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380700"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
[text]
[oldHash]
[hash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [oldHash]
textLookup :: [text]
parent :: hash
$sel:bytes:PatchDiff :: ByteString
$sel:oldHashLookup:PatchDiff :: [oldHash]
$sel:textLookup:PatchDiff :: [text]
$sel:newHashLookup:PatchDiff :: [hash]
$sel:parent:PatchDiff :: hash
</span><a href="#local-6989586621679380695"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span id="local-6989586621679382565"><span id="local-6989586621679382566"><span id="local-6989586621679382567"><span id="local-6989586621679382568"><span id="local-6989586621679382569"><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-type">patchDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679382569"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382568"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382569"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382567"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382566"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382565"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382568"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382569"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382566"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382565"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382567"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-365"></span><span id="patchDiffHashes_"><span class="annot"><span class="annottext">patchDiffHashes_ :: forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var hs-var">patchDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679380688"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380688"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679380683"><span id="local-6989586621679380684"><span id="local-6989586621679380685"><span id="local-6989586621679380686"><span id="local-6989586621679380687"><span class="annot"><span class="annottext">hash
[hash]
[text]
[noSyncHash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [noSyncHash]
textLookup :: [text]
parent :: hash
$sel:bytes:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
$sel:oldHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
$sel:textLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="#local-6989586621679380683"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621679380682"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679380682"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380688"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380687"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621679380681"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679380681"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380688"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380684"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[noSyncHash]
ByteString
newHashLookup :: [hash']
parent :: hash'
bytes :: ByteString
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:PatchDiff :: ByteString
$sel:oldHashLookup:PatchDiff :: [noSyncHash]
$sel:textLookup:PatchDiff :: [text]
$sel:newHashLookup:PatchDiff :: [hash']
$sel:parent:PatchDiff :: hash'
</span><a href="#local-6989586621679380681"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-keyword">data</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span> </span><span id="local-6989586621679382647"><span class="annot"><a href="#local-6989586621679382647"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382646"><span class="annot"><a href="#local-6989586621679382646"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span>
</span><span id="line-371"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382647"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-372"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382646"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-373"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382646"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-374"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382646"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679382646"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-375"></span><span>    </span><span id="%24sel%3Abytes%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespace"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380668"><span id="local-6989586621679380677"><span class="annot"><span class="annottext">Namespace text hash -&gt; Namespace text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
/= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
== :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380636"><span id="local-6989586621679380638"><span id="local-6989586621679380641"><span id="local-6989586621679380644"><span id="local-6989586621679380647"><span id="local-6989586621679380655"><span id="local-6989586621679380664"><span class="annot"><span class="annottext">Namespace text hash -&gt; Namespace text hash -&gt; Bool
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (Namespace text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
min :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
max :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
&gt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&gt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
compare :: Namespace text hash -&gt; Namespace text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380622"><span id="local-6989586621679380624"><span id="local-6989586621679380634"><span class="annot"><span class="annottext">Int -&gt; Namespace text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
showList :: [Namespace text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
show :: Namespace text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
showsPrec :: Int -&gt; Namespace text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380615"><span id="local-6989586621679380617"><span id="local-6989586621679380620"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>  </span><span id="local-6989586621679380611"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; Namespace a b -&gt; m
</span><a href="#local-6989586621679380611"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380606"><span id="local-6989586621679380608"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-383"></span><span>  </span><span id="local-6989586621679380604"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; Namespace a c -&gt; Namespace b d
</span><a href="#local-6989586621679380604"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-386"></span><span>  </span><span id="local-6989586621679380579"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; Namespace a b -&gt; f (Namespace c d)
</span><a href="#local-6989586621679380579"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679380578"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679380578"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679380577"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380577"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679380576"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679380576"><span class="hs-identifier hs-var">tl</span></a></span></span><span> </span><span id="local-6989586621679380575"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679380575"><span class="hs-identifier hs-var">dl</span></a></span></span><span> </span><span id="local-6989586621679380574"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679380574"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span id="local-6989586621679380573"><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679380573"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621679380572"><span class="annot"><span class="annottext">LocalBranchBytes
</span><a href="#local-6989586621679380572"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="annottext">forall text hash.
[text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; LocalBranchBytes
-&gt; Namespace text hash
</span><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span><span>
</span><span id="line-388"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679380578"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679380576"><span class="hs-identifier hs-var">tl</span></a></span><span>
</span><span id="line-389"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380577"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679380575"><span class="hs-identifier hs-var">dl</span></a></span><span>
</span><span id="line-390"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380577"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679380574"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380577"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679380577"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679380573"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-392"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">LocalBranchBytes
</span><a href="#local-6989586621679380572"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380565"><span id="local-6989586621679380567"><span id="local-6989586621679380569"><span id="local-6989586621679382621"><span id="local-6989586621679382622"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382622"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382621"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382622"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382621"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-395"></span><span>  </span><span id="local-6989586621679380547"><span class="annot"><span class="annottext">toJSON :: Namespace text hash -&gt; Value
</span><a href="#local-6989586621679380547"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679380546"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380546"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679380545"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380545"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679380544"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380544"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679380543"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380543"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span> </span><span id="local-6989586621679380541"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380541"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380546"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380545"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380544"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-400"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380543"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-401"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380541"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-402"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380538"><span id="local-6989586621679382601"><span id="local-6989586621679382602"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382602"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382601"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382602"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382601"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-405"></span><span>  </span><span id="local-6989586621679380518"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Namespace text hash)
</span><a href="#local-6989586621679380518"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Namespace&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380517"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380517"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621679380516"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380516"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380517"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621679380515"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380515"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380517"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621679380514"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380514"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380517"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-409"></span><span>    </span><span id="local-6989586621679380513"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380513"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380517"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679380512"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380512"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380517"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-411"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:bytes:Namespace :: LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespace"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; LocalBranchBytes
</span><span class="hs-identifier hs-var">LocalBranchBytes</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380512"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[text]
[hash]
[(hash, hash)]
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
$sel:textLookup:Namespace :: [text]
$sel:childLookup:Namespace :: [(hash, hash)]
$sel:patchLookup:Namespace :: [hash]
$sel:defnLookup:Namespace :: [hash]
</span><a href="#local-6989586621679380513"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span class="hs-keyword">data</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span> </span><span id="local-6989586621679382648"><span class="annot"><a href="#local-6989586621679382648"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679382649"><span class="annot"><a href="#local-6989586621679382649"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679382649"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-415"></span><span>    </span><span id="%24sel%3AtextLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382648"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-416"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382649"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-417"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679382649"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-418"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382649"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679382649"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-419"></span><span>    </span><span id="%24sel%3Abytes%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380499"><span id="local-6989586621679380508"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
/= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c/= :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
== :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c== :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380466"><span id="local-6989586621679380468"><span id="local-6989586621679380471"><span id="local-6989586621679380474"><span id="local-6989586621679380477"><span id="local-6989586621679380486"><span id="local-6989586621679380495"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord hash, Ord text) =&gt;
Eq (NamespaceDiff text hash)
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
min :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmin :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
max :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmax :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
&gt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&gt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
compare :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380452"><span id="local-6989586621679380454"><span id="local-6989586621679380464"><span class="annot"><span class="annottext">Int -&gt; NamespaceDiff text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
showList :: [NamespaceDiff text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
show :: NamespaceDiff text hash -&gt; String
$cshow :: forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
showsPrec :: Int -&gt; NamespaceDiff text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380445"><span id="local-6989586621679380447"><span id="local-6989586621679380449"><span id="local-6989586621679382619"><span id="local-6989586621679382620"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382620"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382619"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382620"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382619"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-424"></span><span>  </span><span id="local-6989586621679380425"><span class="annot"><span class="annottext">toJSON :: NamespaceDiff text hash -&gt; Value
</span><a href="#local-6989586621679380425"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span id="local-6989586621679380424"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380424"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679380423"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380423"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679380422"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380422"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679380421"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380421"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679380420"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380420"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LocalBranchBytes</span></span><span> </span><span id="local-6989586621679380419"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380419"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-426"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380424"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380423"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-428"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380422"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-429"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380421"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-430"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380420"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-431"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380419"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-432"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380416"><span id="local-6989586621679382599"><span id="local-6989586621679382600"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382600"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382599"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382600"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382599"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-435"></span><span>  </span><span id="local-6989586621679380394"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NamespaceDiff text hash)
</span><a href="#local-6989586621679380394"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NamespaceDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380393"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-436"></span><span>    </span><span id="local-6989586621679380392"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380392"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621679380391"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679380391"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-438"></span><span>    </span><span id="local-6989586621679380390"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380390"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-439"></span><span>    </span><span id="local-6989586621679380389"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380389"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-440"></span><span>    </span><span id="local-6989586621679380388"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380388"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-441"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679380387"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380387"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380393"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-442"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:bytes:NamespaceDiff :: LocalBranchBytes
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespaceDiff"><span class="hs-identifier hs-var">bytes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; LocalBranchBytes
</span><span class="hs-identifier hs-var">LocalBranchBytes</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679380387"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
[text]
[hash]
[(hash, hash)]
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
parent :: hash
$sel:textLookup:NamespaceDiff :: [text]
$sel:childLookup:NamespaceDiff :: [(hash, hash)]
$sel:patchLookup:NamespaceDiff :: [hash]
$sel:defnLookup:NamespaceDiff :: [hash]
$sel:parent:NamespaceDiff :: hash
</span><a href="#local-6989586621679380388"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span id="local-6989586621679382561"><span id="local-6989586621679382562"><span id="local-6989586621679382563"><span id="local-6989586621679382564"><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-type">namespaceDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679382564"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382563"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382562"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382561"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382563"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382564"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382561"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382562"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-445"></span><span id="namespaceDiffHashes_"><span class="annot"><span class="annottext">namespaceDiffHashes_ :: forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var hs-var">namespaceDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679380372"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380372"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679380366"><span id="local-6989586621679380367"><span id="local-6989586621679380368"><span id="local-6989586621679380369"><span id="local-6989586621679380370"><span id="local-6989586621679380371"><span class="annot"><span class="annottext">hash
[hash]
[text]
[(hash, hash)]
LocalBranchBytes
bytes :: LocalBranchBytes
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
parent :: hash
$sel:bytes:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; LocalBranchBytes
$sel:textLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [text]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="#local-6989586621679380366"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679380365"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679380365"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380372"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380371"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span id="local-6989586621679380364"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679380364"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380372"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380369"><span class="hs-identifier hs-var">defnLookup</span></a></span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621679380363"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679380363"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380372"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679380368"><span class="hs-identifier hs-var">patchLookup</span></a></span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621679380362"><span class="annot"><span class="annottext">[(hash', hash')]
</span><a href="#local-6989586621679380362"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (r :: * -&gt; * -&gt; *) a b.
Bitraversable r =&gt;
Traversal (r a a) (r b b) a b
</span><span class="hs-identifier hs-var">both</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380372"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679380367"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[(hash', hash')]
LocalBranchBytes
childLookup :: [(hash', hash')]
patchLookup :: [hash']
defnLookup :: [hash']
parent :: hash'
bytes :: LocalBranchBytes
textLookup :: [text]
$sel:bytes:NamespaceDiff :: LocalBranchBytes
$sel:textLookup:NamespaceDiff :: [text]
$sel:childLookup:NamespaceDiff :: [(hash', hash')]
$sel:patchLookup:NamespaceDiff :: [hash']
$sel:defnLookup:NamespaceDiff :: [hash']
$sel:parent:NamespaceDiff :: hash'
</span><a href="#local-6989586621679380362"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="hs-comment">-- Client _may_ choose not to download the namespace entity in the future, but</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- we still send them the hash/hashjwt.</span><span>
</span><span id="line-454"></span><span class="hs-keyword">data</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span> </span><span id="local-6989586621679382650"><span class="annot"><a href="#local-6989586621679382650"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AnamespaceHash%3ACausal"><span class="annot"><span class="annottext">forall hash. Causal hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679382650"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-456"></span><span>    </span><span id="%24sel%3Aparents%3ACausal"><span class="annot"><span class="annottext">forall hash. Causal hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679382650"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380355"><span id="local-6989586621679380360"><span class="annot"><span class="annottext">Causal hash -&gt; Causal hash -&gt; Bool
forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Causal hash -&gt; Causal hash -&gt; Bool
$c/= :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
== :: Causal hash -&gt; Causal hash -&gt; Bool
$c== :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380331"><span id="local-6989586621679380333"><span id="local-6989586621679380336"><span id="local-6989586621679380339"><span id="local-6989586621679380342"><span id="local-6989586621679380346"><span id="local-6989586621679380351"><span class="annot"><span class="annottext">Causal hash -&gt; Causal hash -&gt; Bool
Causal hash -&gt; Causal hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {hash}. Ord hash =&gt; Eq (Causal hash)
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
min :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmin :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
max :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmax :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
&gt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&gt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
compare :: Causal hash -&gt; Causal hash -&gt; Ordering
$ccompare :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380321"><span id="local-6989586621679380323"><span id="local-6989586621679380329"><span class="annot"><span class="annottext">Int -&gt; Causal hash -&gt; ShowS
forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
forall hash. Show hash =&gt; Causal hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Causal hash] -&gt; ShowS
$cshowList :: forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
show :: Causal hash -&gt; String
$cshow :: forall hash. Show hash =&gt; Causal hash -&gt; String
showsPrec :: Int -&gt; Causal hash -&gt; ShowS
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span id="local-6989586621679382558"><span id="local-6989586621679382559"><span id="local-6989586621679382560"><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-type">causalHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679382560"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679382559"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679382558"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382560"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382559"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382558"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382560"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382559"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-461"></span><span id="causalHashes_"><span class="annot"><span class="annottext">causalHashes_ :: forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var hs-var">causalHashes_</span></a></span></span><span> </span><span id="local-6989586621679380313"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380313"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679380311"><span id="local-6989586621679380312"><span class="annot"><span class="annottext">hash
Set hash
parents :: Set hash
namespaceHash :: hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
</span><a href="#local-6989586621679380311"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621679380310"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679380310"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380313"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380312"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span id="local-6989586621679380309"><span class="annot"><span class="annottext">Set hash'
</span><a href="#local-6989586621679380309"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
(Applicative f, Ord b) =&gt;
(a -&gt; f b) -&gt; Set a -&gt; f (Set b)
</span><span class="hs-identifier hs-var">Set.traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679380313"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679380311"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
Set hash'
parents :: Set hash'
namespaceHash :: hash'
$sel:parents:Causal :: Set hash'
$sel:namespaceHash:Causal :: hash'
</span><a href="#local-6989586621679380309"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380301"><span id="local-6989586621679380303"><span id="local-6989586621679380305"><span id="local-6989586621679382618"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382618"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382618"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-467"></span><span>  </span><span id="local-6989586621679380293"><span class="annot"><span class="annottext">toJSON :: Causal hash -&gt; Value
</span><a href="#local-6989586621679380293"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span id="local-6989586621679380292"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380292"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span id="local-6989586621679380291"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679380291"><span class="hs-identifier hs-var">parents</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-468"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-469"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380292"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-470"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parents&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679380291"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-471"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380288"><span id="local-6989586621679382598"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382598"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679382598"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382598"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-474"></span><span>  </span><span id="local-6989586621679380280"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Causal hash)
</span><a href="#local-6989586621679380280"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Causal&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380279"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380279"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>    </span><span id="local-6989586621679380278"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679380278"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380279"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span>
</span><span id="line-476"></span><span>    </span><span id="local-6989586621679380277"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679380277"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380279"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parents&quot;</span></span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
Set hash
parents :: Set hash
namespaceHash :: hash
$sel:parents:Causal :: Set hash
$sel:namespaceHash:Causal :: hash
</span><a href="#local-6989586621679380277"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="hs-keyword">data</span><span> </span><span id="EntityType"><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-var">EntityType</span></a></span></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TermComponentType"><span class="annot"><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span></span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DeclComponentType"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span></span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchType"><span class="annot"><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span></span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchDiffType"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span></span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceDiffType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CausalType"><span class="annot"><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span></span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380273"><span id="local-6989586621679380275"><span class="annot"><span class="annottext">EntityType -&gt; EntityType -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EntityType -&gt; EntityType -&gt; Bool
$c/= :: EntityType -&gt; EntityType -&gt; Bool
== :: EntityType -&gt; EntityType -&gt; Bool
$c== :: EntityType -&gt; EntityType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380254"><span id="local-6989586621679380256"><span id="local-6989586621679380259"><span id="local-6989586621679380262"><span id="local-6989586621679380265"><span id="local-6989586621679380267"><span id="local-6989586621679380269"><span class="annot"><span class="annottext">Eq EntityType
EntityType -&gt; EntityType -&gt; Bool
EntityType -&gt; EntityType -&gt; Ordering
EntityType -&gt; EntityType -&gt; EntityType
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: EntityType -&gt; EntityType -&gt; EntityType
$cmin :: EntityType -&gt; EntityType -&gt; EntityType
max :: EntityType -&gt; EntityType -&gt; EntityType
$cmax :: EntityType -&gt; EntityType -&gt; EntityType
&gt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&gt;= :: EntityType -&gt; EntityType -&gt; Bool
&gt; :: EntityType -&gt; EntityType -&gt; Bool
$c&gt; :: EntityType -&gt; EntityType -&gt; Bool
&lt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&lt;= :: EntityType -&gt; EntityType -&gt; Bool
&lt; :: EntityType -&gt; EntityType -&gt; Bool
$c&lt; :: EntityType -&gt; EntityType -&gt; Bool
compare :: EntityType -&gt; EntityType -&gt; Ordering
$ccompare :: EntityType -&gt; EntityType -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380248"><span id="local-6989586621679380250"><span id="local-6989586621679380252"><span class="annot"><span class="annottext">Int -&gt; EntityType -&gt; ShowS
[EntityType] -&gt; ShowS
EntityType -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EntityType] -&gt; ShowS
$cshowList :: [EntityType] -&gt; ShowS
show :: EntityType -&gt; String
$cshow :: EntityType -&gt; String
showsPrec :: Int -&gt; EntityType -&gt; ShowS
$cshowsPrec :: Int -&gt; EntityType -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380241"><span id="local-6989586621679380243"><span id="local-6989586621679380245"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-490"></span><span>  </span><span id="local-6989586621679380232"><span class="annot"><span class="annottext">toJSON :: EntityType -&gt; Value
</span><a href="#local-6989586621679380232"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-491"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-492"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span>
</span><span id="line-493"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span>
</span><span id="line-494"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span>
</span><span id="line-495"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span>
</span><span id="line-497"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span>
</span><span id="line-498"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380229"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-501"></span><span>  </span><span id="local-6989586621679380203"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser EntityType
</span><a href="#local-6989586621679380203"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EntityType&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span>
</span><span id="line-508"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span>
</span><span id="line-509"></span><span>    </span><span id="local-6989586621679380202"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679380202"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected entity type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679380202"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-512"></span><span class="hs-comment">-- Request/response types</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-515"></span><span class="hs-comment">-- Get causal hash by path</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="hs-keyword">newtype</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380191"><span id="local-6989586621679380193"><span id="local-6989586621679380197"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
[GetCausalHashByPathRequest] -&gt; ShowS
GetCausalHashByPathRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GetCausalHashByPathRequest] -&gt; ShowS
$cshowList :: [GetCausalHashByPathRequest] -&gt; ShowS
show :: GetCausalHashByPathRequest -&gt; String
$cshow :: GetCausalHashByPathRequest -&gt; String
showsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380186"><span id="local-6989586621679380189"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380165"><span id="local-6989586621679380167"><span id="local-6989586621679380170"><span id="local-6989586621679380173"><span id="local-6989586621679380176"><span id="local-6989586621679380179"><span id="local-6989586621679380182"><span class="annot"><span class="annottext">Eq GetCausalHashByPathRequest
GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmin :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
max :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmax :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
compare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
$ccompare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380158"><span id="local-6989586621679380160"><span id="local-6989586621679380162"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-523"></span><span>  </span><span id="local-6989586621679380154"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathRequest -&gt; Value
</span><a href="#local-6989586621679380154"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span id="local-6989586621679380153"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679380153"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-524"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-525"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679380153"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-526"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380150"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-529"></span><span>  </span><span id="local-6989586621679380146"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathRequest
</span><a href="#local-6989586621679380146"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380145"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380145"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-530"></span><span>    </span><span id="local-6989586621679380144"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679380144"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380145"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-531"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:GetCausalHashByPathRequest :: Path
</span><a href="#local-6989586621679380144"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span class="hs-keyword">data</span><span> </span><span id="GetCausalHashByPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-var">GetCausalHashByPathResponse</span></a></span></span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span></span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380125"><span id="local-6989586621679380127"><span id="local-6989586621679380138"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
[GetCausalHashByPathResponse] -&gt; ShowS
GetCausalHashByPathResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GetCausalHashByPathResponse] -&gt; ShowS
$cshowList :: [GetCausalHashByPathResponse] -&gt; ShowS
show :: GetCausalHashByPathResponse -&gt; String
$cshow :: GetCausalHashByPathResponse -&gt; String
showsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380114"><span id="local-6989586621679380122"><span class="annot"><span class="annottext">GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380091"><span id="local-6989586621679380093"><span id="local-6989586621679380095"><span id="local-6989586621679380097"><span id="local-6989586621679380099"><span id="local-6989586621679380101"><span id="local-6989586621679380109"><span class="annot"><span class="annottext">Eq GetCausalHashByPathResponse
GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmin :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
max :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmax :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
compare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
$ccompare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380083"><span id="local-6989586621679380085"><span id="local-6989586621679380087"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-541"></span><span>  </span><span id="local-6989586621679380068"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathResponse -&gt; Value
</span><a href="#local-6989586621679380068"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-542"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-type">GetCausalHashByPathSuccess</span></a></span><span> </span><span id="local-6989586621679380067"><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679380067"><span class="hs-identifier hs-var">hashJWT</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679380067"><span class="hs-identifier hs-var">hashJWT</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-type">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span id="local-6989586621679380065"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679380065"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679380065"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-544"></span><span>    </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-type">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679380064"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679380064"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679380063"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679380063"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679380064"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679380063"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679380060"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-548"></span><span>  </span><span id="local-6989586621679380030"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathResponse
</span><a href="#local-6989586621679380030"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679380029"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380029"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-549"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380029"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-550"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380029"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-551"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Path -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380029"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-552"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span>
</span><span id="line-553"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679380029"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-554"></span><span>      </span><span id="local-6989586621679380027"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679380027"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected GetCausalHashByPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679380027"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- Download entities</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span>
</span><span id="line-560"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-561"></span><span>    </span><span id="%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; NESet HashJWT
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679380013"><span id="local-6989586621679380015"><span id="local-6989586621679380022"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesRequest -&gt; ShowS
[DownloadEntitiesRequest] -&gt; ShowS
DownloadEntitiesRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DownloadEntitiesRequest] -&gt; ShowS
$cshowList :: [DownloadEntitiesRequest] -&gt; ShowS
show :: DownloadEntitiesRequest -&gt; String
$cshow :: DownloadEntitiesRequest -&gt; String
showsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679380005"><span id="local-6989586621679380011"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379979"><span id="local-6989586621679379981"><span id="local-6989586621679379984"><span id="local-6989586621679379987"><span id="local-6989586621679379990"><span id="local-6989586621679379995"><span id="local-6989586621679380001"><span class="annot"><span class="annottext">Eq DownloadEntitiesRequest
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmin :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
max :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmax :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
compare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
$ccompare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379972"><span id="local-6989586621679379974"><span id="local-6989586621679379976"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>  </span><span id="local-6989586621679379963"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesRequest -&gt; Value
</span><a href="#local-6989586621679379963"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679379962"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379962"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679379961"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679379961"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-567"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-568"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379962"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-569"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679379961"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-570"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379958"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621679379940"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesRequest
</span><a href="#local-6989586621679379940"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379939"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379939"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-574"></span><span>    </span><span id="local-6989586621679379938"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379938"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-575"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379939"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-576"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-577"></span><span>        </span><span id="local-6989586621679379936"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379936"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379939"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379936"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-579"></span><span>    </span><span id="local-6989586621679379935"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679379935"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379939"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-580"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet HashJWT
RepoInfo
hashes :: NESet HashJWT
repoInfo :: RepoInfo
$sel:hashes:DownloadEntitiesRequest :: NESet HashJWT
$sel:repoInfo:DownloadEntitiesRequest :: RepoInfo
</span><a href="#local-6989586621679379935"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-var">DownloadEntitiesResponse</span></a></span></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DownloadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-type">DownloadEntitiesError</span></a></span><span>
</span><span id="line-585"></span><span>
</span><span id="line-586"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-var">DownloadEntitiesError</span></a></span></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | msg, repoInfo</span><span>
</span><span id="line-589"></span><span>    </span><span id="DownloadEntitiesInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | userHandle</span><span>
</span><span id="line-591"></span><span>    </span><span id="DownloadEntitiesUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-592"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | project shorthand</span><span>
</span><span id="line-593"></span><span>    </span><span id="DownloadEntitiesProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379920"><span id="local-6989586621679379927"><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379905"><span id="local-6989586621679379907"><span id="local-6989586621679379918"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesError -&gt; ShowS
[DownloadEntitiesError] -&gt; ShowS
DownloadEntitiesError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DownloadEntitiesError] -&gt; ShowS
$cshowList :: [DownloadEntitiesError] -&gt; ShowS
show :: DownloadEntitiesError -&gt; String
$cshow :: DownloadEntitiesError -&gt; String
showsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
$cshowsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379898"><span id="local-6989586621679379900"><span id="local-6989586621679379902"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-597"></span><span>  </span><span id="local-6989586621679379879"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesResponse -&gt; Value
</span><a href="#local-6989586621679379879"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-type">DownloadEntitiesSuccess</span></a></span><span> </span><span id="local-6989586621679379878"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679379878"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679379878"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-type">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span id="local-6989586621679379877"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379877"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379877"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-type">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679379876"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379876"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679379875"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379875"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379876"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379875"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-type">DownloadEntitiesUserNotFound</span></a></span><span> </span><span id="local-6989586621679379874"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379874"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379874"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-602"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-type">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span id="local-6989586621679379873"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379873"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379873"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379870"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>  </span><span id="local-6989586621679379827"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesResponse
</span><a href="#local-6989586621679379827"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379826"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-606"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-607"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
-&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-610"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-611"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379826"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-612"></span><span>      </span><span id="local-6989586621679379825"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379825"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected DownloadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379825"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-615"></span><span class="hs-comment">-- Upload entities</span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-619"></span><span>    </span><span id="%24sel%3Aentities%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="Unison.Sync.Types.html#%24sel%3Aentities%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379810"><span id="local-6989586621679379812"><span id="local-6989586621679379820"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesRequest -&gt; ShowS
[UploadEntitiesRequest] -&gt; ShowS
UploadEntitiesRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesRequest] -&gt; ShowS
$cshowList :: [UploadEntitiesRequest] -&gt; ShowS
show :: UploadEntitiesRequest -&gt; String
$cshow :: UploadEntitiesRequest -&gt; String
showsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379799"><span id="local-6989586621679379806"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379769"><span id="local-6989586621679379771"><span id="local-6989586621679379774"><span id="local-6989586621679379777"><span id="local-6989586621679379780"><span id="local-6989586621679379786"><span id="local-6989586621679379793"><span class="annot"><span class="annottext">Eq UploadEntitiesRequest
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmin :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
max :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmax :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
compare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
$ccompare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379760"><span id="local-6989586621679379762"><span id="local-6989586621679379764"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-624"></span><span>  </span><span id="local-6989586621679379748"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesRequest -&gt; Value
</span><a href="#local-6989586621679379748"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679379747"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379747"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679379746"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679379746"><span class="hs-identifier hs-var">entities</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-625"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-626"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379747"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-627"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;entities&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679379746"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-628"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379743"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-631"></span><span>  </span><span id="local-6989586621679379724"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesRequest
</span><a href="#local-6989586621679379724"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379723"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379723"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-632"></span><span>    </span><span id="local-6989586621679379722"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379722"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-633"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379723"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-634"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-635"></span><span>        </span><span id="local-6989586621679379721"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379721"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379723"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-636"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379721"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-637"></span><span>    </span><span id="local-6989586621679379720"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679379720"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379723"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;entities&quot;</span></span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
RepoInfo
entities :: NEMap Hash32 (Entity Text Hash32 Hash32)
repoInfo :: RepoInfo
$sel:entities:UploadEntitiesRequest :: NEMap Hash32 (Entity Text Hash32 Hash32)
$sel:repoInfo:UploadEntitiesRequest :: RepoInfo
</span><a href="#local-6989586621679379720"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-var">UploadEntitiesResponse</span></a></span></span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span></span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-type">UploadEntitiesError</span></a></span><span>
</span><span id="line-643"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379710"><span id="local-6989586621679379712"><span id="local-6989586621679379716"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesResponse -&gt; ShowS
[UploadEntitiesResponse] -&gt; ShowS
UploadEntitiesResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesResponse] -&gt; ShowS
$cshowList :: [UploadEntitiesResponse] -&gt; ShowS
show :: UploadEntitiesResponse -&gt; String
$cshow :: UploadEntitiesResponse -&gt; String
showsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379705"><span id="local-6989586621679379708"><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379684"><span id="local-6989586621679379686"><span id="local-6989586621679379689"><span id="local-6989586621679379692"><span id="local-6989586621679379695"><span id="local-6989586621679379698"><span id="local-6989586621679379701"><span class="annot"><span class="annottext">Eq UploadEntitiesResponse
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmin :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
max :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmax :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
compare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
$ccompare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-var">UploadEntitiesError</span></a></span></span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesError%27HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span>
</span><span id="line-647"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | msg, repoInfo</span><span>
</span><span id="line-648"></span><span>    </span><span id="UploadEntitiesError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-651"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | project shorthand</span><span>
</span><span id="line-652"></span><span>    </span><span id="UploadEntitiesError%27ProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | userHandle</span><span>
</span><span id="line-654"></span><span>    </span><span id="UploadEntitiesError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379658"><span id="local-6989586621679379660"><span id="local-6989586621679379676"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesError -&gt; ShowS
[UploadEntitiesError] -&gt; ShowS
UploadEntitiesError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesError] -&gt; ShowS
$cshowList :: [UploadEntitiesError] -&gt; ShowS
show :: UploadEntitiesError -&gt; String
$cshow :: UploadEntitiesError -&gt; String
showsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379646"><span id="local-6989586621679379656"><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379622"><span id="local-6989586621679379624"><span id="local-6989586621679379626"><span id="local-6989586621679379628"><span id="local-6989586621679379630"><span id="local-6989586621679379632"><span id="local-6989586621679379642"><span class="annot"><span class="annottext">Eq UploadEntitiesError
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmin :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
max :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmax :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
compare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
$ccompare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span>
</span><span id="line-658"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Asupplied%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Asupplied%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">supplied</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-659"></span><span>    </span><span id="%24sel%3Acomputed%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Acomputed%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">computed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-660"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-661"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379610"><span id="local-6989586621679379612"><span id="local-6989586621679379617"><span class="annot"><span class="annottext">Int -&gt; HashMismatchForEntity -&gt; ShowS
[HashMismatchForEntity] -&gt; ShowS
HashMismatchForEntity -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashMismatchForEntity] -&gt; ShowS
$cshowList :: [HashMismatchForEntity] -&gt; ShowS
show :: HashMismatchForEntity -&gt; String
$cshow :: HashMismatchForEntity -&gt; String
showsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
$cshowsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379604"><span id="local-6989586621679379608"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379581"><span id="local-6989586621679379583"><span id="local-6989586621679379586"><span id="local-6989586621679379589"><span id="local-6989586621679379592"><span id="local-6989586621679379596"><span id="local-6989586621679379600"><span class="annot"><span class="annottext">Eq HashMismatchForEntity
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmin :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
max :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmax :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
compare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
$ccompare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379574"><span id="local-6989586621679379576"><span id="local-6989586621679379578"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-664"></span><span>  </span><span id="local-6989586621679379554"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesResponse -&gt; Value
</span><a href="#local-6989586621679379554"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-665"></span><span>    </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-type">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679379552"><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679379552"><span class="hs-identifier hs-var">mismatch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-667"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679379552"><span class="hs-identifier hs-var">mismatch</span></a></span><span>
</span><span id="line-668"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679379551"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379551"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679379550"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379550"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-669"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379551"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379550"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-type">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span id="local-6989586621679379549"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679379549"><span class="hs-identifier hs-var">nd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679379549"><span class="hs-identifier hs-var">nd</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-type">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679379548"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379548"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379548"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-672"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span id="local-6989586621679379547"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379547"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-673"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379547"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-674"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span id="local-6989586621679379546"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379546"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379546"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379543"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-677"></span><span>  </span><span id="local-6989586621679379499"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesResponse
</span><a href="#local-6989586621679379499"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379498"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-678"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span>
</span><span id="line-680"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-681"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-682"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-683"></span><span>        </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-684"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-685"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679379497"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379497"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379496"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379496"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-686"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379497"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379496"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-688"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379498"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-689"></span><span>      </span><span id="local-6989586621679379495"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379495"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UploadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379495"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379488"><span id="local-6989586621679379490"><span id="local-6989586621679379492"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-692"></span><span>  </span><span id="local-6989586621679379481"><span class="annot"><span class="annottext">toJSON :: HashMismatchForEntity -&gt; Value
</span><a href="#local-6989586621679379481"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679379480"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379480"><span class="hs-identifier hs-var">supplied</span></a></span></span><span> </span><span id="local-6989586621679379479"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379479"><span class="hs-identifier hs-var">computed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-693"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-694"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;supplied&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379480"><span class="hs-identifier hs-var">supplied</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-695"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;computed&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379479"><span class="hs-identifier hs-var">computed</span></a></span><span>
</span><span id="line-696"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-697"></span><span>
</span><span id="line-698"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379476"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-699"></span><span>  </span><span id="local-6989586621679379469"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatchForEntity
</span><a href="#local-6989586621679379469"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-700"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatchForEntity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379468"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379468"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-701"></span><span>      </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; HashMismatchForEntity
</span><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span><span>
</span><span id="line-702"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379468"><span class="hs-identifier hs-var">obj</span></a></span><span>
</span><span id="line-703"></span><span>          </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;supplied&quot;</span></span><span>
</span><span id="line-704"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379468"><span class="hs-identifier hs-var">obj</span></a></span><span>
</span><span id="line-705"></span><span>          </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;computed&quot;</span></span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- Fast-forward path</span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="hs-comment">-- | A non-empty list of causal hashes, latest first, that show the lineage from wherever the client wants to</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- fast-forward to back to wherever the (client believes the) server is (including the server head, in a separate</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- field).</span><span>
</span><span id="line-713"></span><span class="hs-comment">--</span><span>
</span><span id="line-714"></span><span class="hs-comment">-- For example, if the client wants to update</span><span>
</span><span id="line-715"></span><span class="hs-comment">--</span><span>
</span><span id="line-716"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- A -&gt; B -&gt; C</span><span>
</span><span id="line-718"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-719"></span><span class="hs-comment">--</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- to</span><span>
</span><span id="line-721"></span><span class="hs-comment">--</span><span>
</span><span id="line-722"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- A -&gt; B -&gt; C -&gt; D -&gt; E -&gt; F</span><span>
</span><span id="line-724"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-725"></span><span class="hs-comment">--</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- then it would send hashes</span><span>
</span><span id="line-727"></span><span class="hs-comment">--</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-729"></span><span class="hs-comment">-- expectedHash = C</span><span>
</span><span id="line-730"></span><span class="hs-comment">-- hashes = [D, E, F]</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-732"></span><span class="hs-comment">--</span><span>
</span><span id="line-733"></span><span class="hs-comment">-- Note that if the client wants to begin a history at a new path on the server, it would use the &quot;update path&quot; endpoint</span><span>
</span><span id="line-734"></span><span class="hs-comment">-- instead.</span><span>
</span><span id="line-735"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-var">FastForwardPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-var">FastForwardPathRequest</span></a></span></span><span>
</span><span id="line-736"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The causal that the client believes exists at `path`</span><span>
</span><span id="line-737"></span><span>    </span><span id="%24sel%3AexpectedHash%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-738"></span><span>    </span><span class="hs-comment">-- | The sequence of causals to fast-forward with, starting from the oldest new causal to the newest new causal</span><span>
</span><span id="line-739"></span><span>    </span><span id="%24sel%3Ahashes%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; NonEmpty Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-740"></span><span>    </span><span class="hs-comment">-- | The path to fast-forward</span><span>
</span><span id="line-741"></span><span>    </span><span id="%24sel%3Apath%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-742"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-743"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379454"><span id="local-6989586621679379456"><span id="local-6989586621679379462"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathRequest -&gt; ShowS
[FastForwardPathRequest] -&gt; ShowS
FastForwardPathRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathRequest] -&gt; ShowS
$cshowList :: [FastForwardPathRequest] -&gt; ShowS
show :: FastForwardPathRequest -&gt; String
$cshow :: FastForwardPathRequest -&gt; String
showsPrec :: Int -&gt; FastForwardPathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379447"><span id="local-6989586621679379449"><span id="local-6989586621679379451"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-746"></span><span>  </span><span id="local-6989586621679379437"><span class="annot"><span class="annottext">toJSON :: FastForwardPathRequest -&gt; Value
</span><a href="#local-6989586621679379437"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679379436"><span class="annot"><span class="annottext">Hash32
expectedHash :: Hash32
$sel:expectedHash:FastForwardPathRequest :: FastForwardPathRequest -&gt; Hash32
</span><a href="#local-6989586621679379436"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379435"><span class="annot"><span class="annottext">NonEmpty Hash32
hashes :: NonEmpty Hash32
$sel:hashes:FastForwardPathRequest :: FastForwardPathRequest -&gt; NonEmpty Hash32
</span><a href="#local-6989586621679379435"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379434"><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:FastForwardPathRequest :: FastForwardPathRequest -&gt; Path
</span><a href="#local-6989586621679379434"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-747"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-748"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379436"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-749"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Hash32
</span><a href="#local-6989586621679379435"><span class="hs-identifier hs-var">hashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-750"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379434"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-751"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-752"></span><span>
</span><span id="line-753"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379431"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-754"></span><span>  </span><span id="local-6989586621679379421"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser FastForwardPathRequest
</span><a href="#local-6989586621679379421"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-755"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FastForwardPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379420"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379420"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-756"></span><span>      </span><span id="local-6989586621679379419"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379419"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379420"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-757"></span><span>      </span><span id="local-6989586621679379418"><span class="annot"><span class="annottext">NonEmpty Hash32
</span><a href="#local-6989586621679379418"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379420"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-758"></span><span>      </span><span id="local-6989586621679379417"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379417"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379420"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-759"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Hash32
expectedHash :: Hash32
$sel:expectedHash:FastForwardPathRequest :: Hash32
</span><a href="#local-6989586621679379419"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonEmpty Hash32
hashes :: NonEmpty Hash32
$sel:hashes:FastForwardPathRequest :: NonEmpty Hash32
</span><a href="#local-6989586621679379418"><span class="hs-identifier hs-var hs-var">hashes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:FastForwardPathRequest :: Path
</span><a href="#local-6989586621679379417"><span class="hs-identifier hs-var hs-var">path</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-var">FastForwardPathResponse</span></a></span></span><span>
</span><span id="line-762"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span></span><span>
</span><span id="line-763"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathFailure"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier hs-type">FastForwardPathError</span></a></span><span>
</span><span id="line-764"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379407"><span id="local-6989586621679379409"><span id="local-6989586621679379413"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathResponse -&gt; ShowS
[FastForwardPathResponse] -&gt; ShowS
FastForwardPathResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathResponse] -&gt; ShowS
$cshowList :: [FastForwardPathResponse] -&gt; ShowS
show :: FastForwardPathResponse -&gt; String
$cshow :: FastForwardPathResponse -&gt; String
showsPrec :: Int -&gt; FastForwardPathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>
</span><span id="line-766"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathError"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier hs-var">FastForwardPathError</span></a></span></span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathError%27MissingDependencies"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-var">FastForwardPathError'MissingDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-var">FastForwardPathError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This wasn't a fast-forward. Here's a JWT to download the causal head, if you want it.</span><span>
</span><span id="line-770"></span><span>    </span><span id="FastForwardPathError%27NotFastForward"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-var">FastForwardPathError'NotFastForward</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | There was no history at this path; the client should use the &quot;update path&quot; endpoint instead.</span><span>
</span><span id="line-772"></span><span>    </span><span id="FastForwardPathError%27NoHistory"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This wasn't a fast-forward. You said the first hash was a parent of the second hash, but I disagree.</span><span>
</span><span id="line-774"></span><span>    </span><span id="FastForwardPathError%27InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-var">FastForwardPathError'InvalidParentage</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span>
</span><span id="line-775"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">FastForwardPathError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-776"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span></span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379382"><span id="local-6989586621679379384"><span id="local-6989586621679379398"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathError -&gt; ShowS
[FastForwardPathError] -&gt; ShowS
FastForwardPathError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathError] -&gt; ShowS
$cshowList :: [FastForwardPathError] -&gt; ShowS
show :: FastForwardPathError -&gt; String
$cshow :: FastForwardPathError -&gt; String
showsPrec :: Int -&gt; FastForwardPathError -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-keyword">data</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aparent%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Achild%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Achild%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">}</span><span>
</span><span id="line-780"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379370"><span id="local-6989586621679379372"><span id="local-6989586621679379377"><span class="annot"><span class="annottext">Int -&gt; InvalidParentage -&gt; ShowS
[InvalidParentage] -&gt; ShowS
InvalidParentage -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [InvalidParentage] -&gt; ShowS
$cshowList :: [InvalidParentage] -&gt; ShowS
show :: InvalidParentage -&gt; String
$cshow :: InvalidParentage -&gt; String
showsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
$cshowsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379363"><span id="local-6989586621679379365"><span id="local-6989586621679379367"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-type">FastForwardPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-783"></span><span>  </span><span id="local-6989586621679379340"><span class="annot"><span class="annottext">toJSON :: FastForwardPathResponse -&gt; Value
</span><a href="#local-6989586621679379340"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-784"></span><span>    </span><span class="annot"><span class="annottext">FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-type">FastForwardPathError'MissingDependencies</span></a></span><span> </span><span id="local-6989586621679379339"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679379339"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679379339"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-786"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-type">FastForwardPathError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679379338"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379338"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379338"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-787"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-type">FastForwardPathError'NotFastForward</span></a></span><span> </span><span id="local-6989586621679379337"><span class="annot"><span class="annottext">HashJWT
</span><a href="#local-6989586621679379337"><span class="hs-identifier hs-var">hashJwt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not_fast_forward&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashJWT
</span><a href="#local-6989586621679379337"><span class="hs-identifier hs-var">hashJwt</span></a></span><span>
</span><span id="line-788"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_history&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-type">FastForwardPathError'InvalidParentage</span></a></span><span> </span><span id="local-6989586621679379336"><span class="annot"><span class="annottext">InvalidParentage
</span><a href="#local-6989586621679379336"><span class="hs-identifier hs-var">invalidParentage</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-790"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_parentage&quot;</span></span><span> </span><span class="annot"><span class="annottext">InvalidParentage
</span><a href="#local-6989586621679379336"><span class="hs-identifier hs-var">invalidParentage</span></a></span><span>
</span><span id="line-791"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-type">FastForwardPathError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679379335"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379335"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679379334"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379334"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-792"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379335"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379334"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-794"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>
</span><span id="line-796"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379331"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-type">FastForwardPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-797"></span><span>  </span><span id="local-6989586621679379285"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser FastForwardPathResponse
</span><a href="#local-6989586621679379285"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-798"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FastForwardPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379284"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-799"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-800"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span><span>
</span><span id="line-801"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-var">FastForwardPathError'MissingDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-802"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-var">FastForwardPathError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-803"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not_fast_forward&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashJWT -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-var">FastForwardPathError'NotFastForward</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-804"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_history&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_parentage&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">InvalidParentage -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-var">FastForwardPathError'InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-806"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-807"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679379283"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379283"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379282"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379282"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379284"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-808"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">FastForwardPathError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379283"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379282"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>        </span><span id="local-6989586621679379281"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379281"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected FastForwardPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379281"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379274"><span id="local-6989586621679379276"><span id="local-6989586621679379278"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-813"></span><span>  </span><span id="local-6989586621679379267"><span class="annot"><span class="annottext">toJSON :: InvalidParentage -&gt; Value
</span><a href="#local-6989586621679379267"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span> </span><span id="local-6989586621679379266"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379266"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679379265"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379265"><span class="hs-identifier hs-var">child</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379266"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379265"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379262"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-816"></span><span>  </span><span id="local-6989586621679379255"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser InvalidParentage
</span><a href="#local-6989586621679379255"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-817"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;InvalidParentage&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379254"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379254"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; InvalidParentage
</span><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379254"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379254"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-820"></span><span class="hs-comment">-- Update path</span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathRequest"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-var">UpdatePathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathRequest"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-var">UpdatePathRequest</span></a></span></span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-824"></span><span>    </span><span id="%24sel%3AexpectedHash%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Nothing requires empty history at destination</span><span>
</span><span id="line-825"></span><span>    </span><span id="%24sel%3AnewHash%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHash%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">newHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-826"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-827"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379239"><span id="local-6989586621679379241"><span id="local-6989586621679379248"><span class="annot"><span class="annottext">Int -&gt; UpdatePathRequest -&gt; ShowS
[UpdatePathRequest] -&gt; ShowS
UpdatePathRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathRequest] -&gt; ShowS
$cshowList :: [UpdatePathRequest] -&gt; ShowS
show :: UpdatePathRequest -&gt; String
$cshow :: UpdatePathRequest -&gt; String
showsPrec :: Int -&gt; UpdatePathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379231"><span id="local-6989586621679379237"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c/= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
== :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c== :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379204"><span id="local-6989586621679379206"><span id="local-6989586621679379209"><span id="local-6989586621679379212"><span id="local-6989586621679379215"><span id="local-6989586621679379221"><span id="local-6989586621679379227"><span class="annot"><span class="annottext">Eq UpdatePathRequest
UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
$cmin :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
max :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
$cmax :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
&gt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&gt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&gt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&gt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&lt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&lt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&lt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&lt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
compare :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
$ccompare :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379197"><span id="local-6989586621679379199"><span id="local-6989586621679379201"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-830"></span><span>  </span><span id="local-6989586621679379186"><span class="annot"><span class="annottext">toJSON :: UpdatePathRequest -&gt; Value
</span><a href="#local-6989586621679379186"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span><span> </span><span id="local-6989586621679379185"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379185"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679379184"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679379184"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span id="local-6989586621679379183"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379183"><span class="hs-identifier hs-var">newHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-831"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-832"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379185"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-833"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679379184"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-834"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;new_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379183"><span class="hs-identifier hs-var">newHash</span></a></span><span>
</span><span id="line-835"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379180"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-838"></span><span>  </span><span id="local-6989586621679379169"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UpdatePathRequest
</span><a href="#local-6989586621679379169"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdatePathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379168"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379168"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-839"></span><span>    </span><span id="local-6989586621679379167"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379167"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-840"></span><span>    </span><span id="local-6989586621679379166"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679379166"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-841"></span><span>    </span><span id="local-6989586621679379165"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679379165"><span class="hs-identifier hs-var">newHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;new_hash&quot;</span></span><span>
</span><span id="line-842"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe Hash32
Hash32
Path
newHash :: Hash32
expectedHash :: Maybe Hash32
path :: Path
$sel:newHash:UpdatePathRequest :: Hash32
$sel:expectedHash:UpdatePathRequest :: Maybe Hash32
$sel:path:UpdatePathRequest :: Path
</span><a href="#local-6989586621679379165"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathResponse"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-var">UpdatePathResponse</span></a></span></span><span>
</span><span id="line-845"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span></span><span>
</span><span id="line-846"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathFailure"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier hs-type">UpdatePathError</span></a></span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379155"><span id="local-6989586621679379157"><span id="local-6989586621679379161"><span class="annot"><span class="annottext">Int -&gt; UpdatePathResponse -&gt; ShowS
[UpdatePathResponse] -&gt; ShowS
UpdatePathResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathResponse] -&gt; ShowS
$cshowList :: [UpdatePathResponse] -&gt; ShowS
show :: UpdatePathResponse -&gt; String
$cshow :: UpdatePathResponse -&gt; String
showsPrec :: Int -&gt; UpdatePathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379150"><span id="local-6989586621679379153"><span class="annot"><span class="annottext">UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c/= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
== :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c== :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379129"><span id="local-6989586621679379131"><span id="local-6989586621679379134"><span id="local-6989586621679379137"><span id="local-6989586621679379140"><span id="local-6989586621679379143"><span id="local-6989586621679379146"><span class="annot"><span class="annottext">Eq UpdatePathResponse
UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
$cmin :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
max :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
$cmax :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
&gt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&gt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&gt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&gt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&lt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&lt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&lt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&lt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
compare :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
$ccompare :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathError"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier hs-var">UpdatePathError</span></a></span></span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathError%27HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-var">UpdatePathError'HashMismatch</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UpdatePathError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span> </span><span class="hs-comment">-- err msg, repo info</span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27MissingDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-var">UpdatePathError'MissingDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-var">UpdatePathError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span></span><span>
</span><span id="line-855"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679379108"><span id="local-6989586621679379110"><span id="local-6989586621679379122"><span class="annot"><span class="annottext">Int -&gt; UpdatePathError -&gt; ShowS
[UpdatePathError] -&gt; ShowS
UpdatePathError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathError] -&gt; ShowS
$cshowList :: [UpdatePathError] -&gt; ShowS
show :: UpdatePathError -&gt; String
$cshow :: UpdatePathError -&gt; String
showsPrec :: Int -&gt; UpdatePathError -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379098"><span id="local-6989586621679379106"><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathError -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c/= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
== :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c== :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379076"><span id="local-6989586621679379078"><span id="local-6989586621679379080"><span id="local-6989586621679379082"><span id="local-6989586621679379084"><span id="local-6989586621679379086"><span id="local-6989586621679379094"><span class="annot"><span class="annottext">Eq UpdatePathError
UpdatePathError -&gt; UpdatePathError -&gt; Bool
UpdatePathError -&gt; UpdatePathError -&gt; Ordering
UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
$cmin :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
max :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
$cmax :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
&gt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&gt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&gt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&gt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&lt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&lt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&lt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&lt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
compare :: UpdatePathError -&gt; UpdatePathError -&gt; Ordering
$ccompare :: UpdatePathError -&gt; UpdatePathError -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379069"><span id="local-6989586621679379071"><span id="local-6989586621679379073"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-type">UpdatePathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-858"></span><span>  </span><span id="local-6989586621679379051"><span class="annot"><span class="annottext">toJSON :: UpdatePathResponse -&gt; Value
</span><a href="#local-6989586621679379051"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-859"></span><span>    </span><span class="annot"><span class="annottext">UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-860"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-type">UpdatePathError'HashMismatch</span></a></span><span> </span><span id="local-6989586621679379050"><span class="annot"><span class="annottext">HashMismatch
</span><a href="#local-6989586621679379050"><span class="hs-identifier hs-var">hm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatch
</span><a href="#local-6989586621679379050"><span class="hs-identifier hs-var">hm</span></a></span><span>
</span><span id="line-861"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-type">UpdatePathError'MissingDependencies</span></a></span><span> </span><span id="local-6989586621679379049"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679379049"><span class="hs-identifier hs-var">md</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679379049"><span class="hs-identifier hs-var">md</span></a></span><span>
</span><span id="line-862"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-type">UpdatePathError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679379048"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379048"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679379048"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-863"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UpdatePathError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679379047"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379047"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span id="local-6989586621679379046"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379046"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379047"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379046"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679379043"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-type">UpdatePathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-867"></span><span>  </span><span id="local-6989586621679379005"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UpdatePathResponse
</span><a href="#local-6989586621679379005"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621679379004"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679379004"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-868"></span><span>    </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679379004"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdatePathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679379002"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379002"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-869"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379002"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-870"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span><span>
</span><span id="line-871"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatch -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-var">UpdatePathError'HashMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379002"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-872"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-var">UpdatePathError'MissingDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379002"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-873"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-var">UpdatePathError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379002"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-874"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-875"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679379001"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379001"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679379000"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379000"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679379002"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-876"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UpdatePathError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679379001"><span class="hs-identifier hs-var">errMsg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679379000"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-877"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>        </span><span id="local-6989586621679378999"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679378999"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UpdatePathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679378999"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-879"></span><span>
</span><span id="line-880"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-var">HashMismatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-var">HashMismatch</span></a></span></span><span>
</span><span id="line-881"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AHashMismatch"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-882"></span><span>    </span><span id="%24sel%3AexpectedHash%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AHashMismatch"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-883"></span><span>    </span><span id="%24sel%3AactualHash%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AactualHash%3AHashMismatch"><span class="hs-identifier hs-var hs-var">actualHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679378984"><span id="local-6989586621679378986"><span id="local-6989586621679378993"><span class="annot"><span class="annottext">Int -&gt; HashMismatch -&gt; ShowS
[HashMismatch] -&gt; ShowS
HashMismatch -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashMismatch] -&gt; ShowS
$cshowList :: [HashMismatch] -&gt; ShowS
show :: HashMismatch -&gt; String
$cshow :: HashMismatch -&gt; String
showsPrec :: Int -&gt; HashMismatch -&gt; ShowS
$cshowsPrec :: Int -&gt; HashMismatch -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679378976"><span id="local-6989586621679378982"><span class="annot"><span class="annottext">HashMismatch -&gt; HashMismatch -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c/= :: HashMismatch -&gt; HashMismatch -&gt; Bool
== :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c== :: HashMismatch -&gt; HashMismatch -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679378949"><span id="local-6989586621679378951"><span id="local-6989586621679378954"><span id="local-6989586621679378957"><span id="local-6989586621679378960"><span id="local-6989586621679378966"><span id="local-6989586621679378972"><span class="annot"><span class="annottext">Eq HashMismatch
HashMismatch -&gt; HashMismatch -&gt; Bool
HashMismatch -&gt; HashMismatch -&gt; Ordering
HashMismatch -&gt; HashMismatch -&gt; HashMismatch
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
$cmin :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
max :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
$cmax :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
&gt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&gt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
&gt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&gt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
&lt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&lt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
&lt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&lt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
compare :: HashMismatch -&gt; HashMismatch -&gt; Ordering
$ccompare :: HashMismatch -&gt; HashMismatch -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679378942"><span id="local-6989586621679378944"><span id="local-6989586621679378946"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-888"></span><span>  </span><span id="local-6989586621679378931"><span class="annot"><span class="annottext">toJSON :: HashMismatch -&gt; Value
</span><a href="#local-6989586621679378931"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span> </span><span id="local-6989586621679378930"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679378930"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679378929"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679378929"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span id="local-6989586621679378928"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679378928"><span class="hs-identifier hs-var">actualHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-889"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-890"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679378930"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-891"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679378929"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-892"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;actual_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679378928"><span class="hs-identifier hs-var">actualHash</span></a></span><span>
</span><span id="line-893"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-894"></span><span>
</span><span id="line-895"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679378925"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-896"></span><span>  </span><span id="local-6989586621679378914"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatch
</span><a href="#local-6989586621679378914"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679378913"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679378913"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-897"></span><span>    </span><span id="local-6989586621679378912"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679378912"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679378913"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-898"></span><span>    </span><span id="local-6989586621679378911"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679378911"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679378913"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-899"></span><span>    </span><span id="local-6989586621679378910"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679378910"><span class="hs-identifier hs-var">actualHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679378913"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;actual_hash&quot;</span></span><span>
</span><span id="line-900"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe Hash32
Path
actualHash :: Maybe Hash32
expectedHash :: Maybe Hash32
path :: Path
$sel:actualHash:HashMismatch :: Maybe Hash32
$sel:expectedHash:HashMismatch :: Maybe Hash32
$sel:path:HashMismatch :: Path
</span><a href="#local-6989586621679378910"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-903"></span><span class="hs-comment">-- Common/shared error types</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span class="hs-keyword">data</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span> </span><span id="local-6989586621679382307"><span class="annot"><a href="#local-6989586621679382307"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span>
</span><span id="line-906"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AmissingDependencies%3ANeedDependencies"><span class="annot"><span class="annottext">forall hash. NeedDependencies hash -&gt; NESet hash
</span><a href="Unison.Sync.Types.html#%24sel%3AmissingDependencies%3ANeedDependencies"><span class="hs-identifier hs-var hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><a href="#local-6989586621679382307"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-908"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679378900"><span id="local-6989586621679378902"><span id="local-6989586621679378906"><span class="annot"><span class="annottext">Int -&gt; NeedDependencies hash -&gt; ShowS
forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [NeedDependencies hash] -&gt; ShowS
$cshowList :: forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
show :: NeedDependencies hash -&gt; String
$cshow :: forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
showsPrec :: Int -&gt; NeedDependencies hash -&gt; ShowS
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679378895"><span id="local-6989586621679378898"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c/= :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
== :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c== :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679378874"><span id="local-6989586621679378876"><span id="local-6989586621679378879"><span id="local-6989586621679378882"><span id="local-6989586621679378885"><span id="local-6989586621679378888"><span id="local-6989586621679378891"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {hash}. Ord hash =&gt; Eq (NeedDependencies hash)
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
min :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmin :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
max :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmax :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
&gt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&gt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
compare :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
$ccompare :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679378867"><span id="local-6989586621679378869"><span id="local-6989586621679378871"><span id="local-6989586621679382304"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382304"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382304"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-911"></span><span>  </span><span id="local-6989586621679378863"><span class="annot"><span class="annottext">toJSON :: NeedDependencies hash -&gt; Value
</span><a href="#local-6989586621679378863"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span id="local-6989586621679378862"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679378862"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-912"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679378862"><span class="hs-identifier hs-var">missingDependencies</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679378859"><span id="local-6989586621679382302"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382302"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679382302"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382302"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-915"></span><span>  </span><span id="local-6989586621679378855"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NeedDependencies hash)
</span><a href="#local-6989586621679378855"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NeedDependencies&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679378854"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679378854"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-916"></span><span>    </span><span id="local-6989586621679378853"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679378853"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679378854"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span>
</span><span id="line-917"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet hash
missingDependencies :: NESet hash
$sel:missingDependencies:NeedDependencies :: NESet hash
</span><a href="#local-6989586621679378853"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-918"></span><span>
</span><span id="line-919"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-920"></span><span class="hs-comment">-- Misc. helpers</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span id="local-6989586621679382342"><span id="local-6989586621679382343"><span class="annot"><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-type">failText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679382343"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679382342"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-923"></span><span id="failText"><span class="annot"><span class="annottext">failText :: forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var hs-var">failText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span>
</span><span id="line-924"></span><span>
</span><span id="line-925"></span><span id="local-6989586621679382335"><span class="annot"><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-type">jsonUnion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679382335"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679382335"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span><span>
</span><span id="line-926"></span><span id="jsonUnion"><span class="annot"><span class="annottext">jsonUnion :: forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var hs-var">jsonUnion</span></a></span></span><span> </span><span id="local-6989586621679378842"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679378842"><span class="hs-identifier hs-var">typeName</span></a></span></span><span> </span><span id="local-6989586621679378841"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679378841"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-927"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-928"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679378842"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-929"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679378841"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-930"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-931"></span></pre></body></html>