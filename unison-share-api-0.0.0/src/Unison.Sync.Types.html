<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_CTkC3mzT9QqBT4YHAqAfvN"><span id="%24con2tag_HsUKQsCVcbTGwtVmu4PD0K"><span id="%24con2tag_9sSyucOMZwZ5jzGxzPYjR9"><span id="%24con2tag_EcDC6Wnb9n9BDMyi8RiPe3"><span id="%24con2tag_Ge3MqoArkCc5ulOLFZX5Fu"><span id="%24con2tag_qSBCUFXHBPAUq8ltGtGT8"><span id="%24con2tag_GezoFs0damPBYRjebVxQBp"></span></span></span></span></span></span></span><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Name shadowing is really helpful for writing some custom traversals</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-name-shadowing #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.Sync.Types</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Misc. types</span></span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier">Base64Bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier">pathRepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier">pathCodebasePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Entity types</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier">Entity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier">TermComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier">DeclComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier">PatchDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier">Namespace</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier">NamespaceDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier">Causal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier">LocalIds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier">entityDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier">EntityType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Entity Traversals</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier">entityHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier">patchHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier">patchDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier">namespaceDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier">causalHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Request/response types</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Get causal hash by path</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier">GetCausalHashByPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Download entities</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier">DownloadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier">DownloadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Upload entities</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier">UploadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier">UploadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Fast-forward path</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier">FastForwardPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier">FastForwardPathError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Update path</span></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier">UpdatePathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier">UpdatePathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier">UpdatePathError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier">HashMismatch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Common/shared error types</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier">HashMismatchForEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier">InvalidParentage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier">NeedDependencies</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">both</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traverseOf</span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifoldable</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteArray.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base64</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertFromBase</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertToBase</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NEMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NESet</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32.Orphans.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Share.API.Hash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- Misc. types</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">-- | A newtype for JSON encoding binary data.</span><span>
</span><span id="line-91"></span><span class="hs-keyword">newtype</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320747"><span id="local-6989586621679320749"><span id="local-6989586621679320751"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-94"></span><span>  </span><span id="local-6989586621679320745"><span class="annot"><span class="annottext">toJSON :: Base64Bytes -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679320743"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320743"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (ByteString -&gt; Text) -&gt; ByteString -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">Text.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Value) -&gt; ByteString -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Base -&gt; ByteString -&gt; ByteString
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; bout
</span><span class="hs-identifier hs-var">convertToBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320743"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320737"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621679320735"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Base64Bytes
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser Base64Bytes) -&gt; Value -&gt; Parser Base64Bytes
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Base64&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320732"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679320732"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; Parser Base64Bytes)
-&gt; (ByteString -&gt; Parser Base64Bytes)
-&gt; Either String ByteString
-&gt; Parser Base64Bytes
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser Base64Bytes
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Base64Bytes -&gt; Parser Base64Bytes
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Base64Bytes -&gt; Parser Base64Bytes)
-&gt; (ByteString -&gt; Base64Bytes) -&gt; ByteString -&gt; Parser Base64Bytes
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either String ByteString -&gt; Parser Base64Bytes)
-&gt; Either String ByteString -&gt; Parser Base64Bytes
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Base -&gt; ByteString -&gt; Either String ByteString
forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; Either String bout
</span><span class="hs-identifier hs-var">convertFromBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">Text.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679320732"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">newtype</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunRepoInfo%3ARepoInfo"><span class="annot"><span class="annottext">RepoInfo -&gt; Text
</span><a href="Unison.Sync.Types.html#%24sel%3AunRepoInfo%3ARepoInfo"><span class="hs-identifier hs-var hs-var">unRepoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320722"><span id="local-6989586621679320724"><span id="local-6989586621679320726"><span class="annot"><span class="annottext">Int -&gt; RepoInfo -&gt; ShowS
[RepoInfo] -&gt; ShowS
RepoInfo -&gt; String
(Int -&gt; RepoInfo -&gt; ShowS)
-&gt; (RepoInfo -&gt; String) -&gt; ([RepoInfo] -&gt; ShowS) -&gt; Show RepoInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RepoInfo] -&gt; ShowS
$cshowList :: [RepoInfo] -&gt; ShowS
show :: RepoInfo -&gt; String
$cshow :: RepoInfo -&gt; String
showsPrec :: Int -&gt; RepoInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; RepoInfo -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320717"><span id="local-6989586621679320719"><span class="annot"><span class="annottext">RepoInfo -&gt; RepoInfo -&gt; Bool
(RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool) -&gt; Eq RepoInfo
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
== :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c== :: RepoInfo -&gt; RepoInfo -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320701"><span id="local-6989586621679320703"><span id="local-6989586621679320705"><span id="local-6989586621679320707"><span id="local-6989586621679320709"><span id="local-6989586621679320711"><span id="local-6989586621679320713"><span class="annot"><span class="annottext">Eq RepoInfo
Eq RepoInfo
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Ordering)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; Bool)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; RepoInfo)
-&gt; (RepoInfo -&gt; RepoInfo -&gt; RepoInfo)
-&gt; Ord RepoInfo
RepoInfo -&gt; RepoInfo -&gt; Bool
RepoInfo -&gt; RepoInfo -&gt; Ordering
RepoInfo -&gt; RepoInfo -&gt; RepoInfo
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmin :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
max :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmax :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
compare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
$ccompare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
$cp1Ord :: Eq RepoInfo
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320692"><span id="local-6989586621679320694"><span id="local-6989586621679320696"><span id="local-6989586621679320698"><span class="annot"><span class="annottext">[RepoInfo] -&gt; Encoding
[RepoInfo] -&gt; Value
RepoInfo -&gt; Encoding
RepoInfo -&gt; Value
(RepoInfo -&gt; Value)
-&gt; (RepoInfo -&gt; Encoding)
-&gt; ([RepoInfo] -&gt; Value)
-&gt; ([RepoInfo] -&gt; Encoding)
-&gt; ToJSON RepoInfo
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [RepoInfo] -&gt; Encoding
$ctoEncodingList :: [RepoInfo] -&gt; Encoding
toJSONList :: [RepoInfo] -&gt; Value
$ctoJSONList :: [RepoInfo] -&gt; Value
toEncoding :: RepoInfo -&gt; Encoding
$ctoEncoding :: RepoInfo -&gt; Encoding
toJSON :: RepoInfo -&gt; Value
$ctoJSON :: RepoInfo -&gt; Value
</span><a href="#local-6989586621679320692"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320688"><span id="local-6989586621679320690"><span class="annot"><span class="annottext">Value -&gt; Parser [RepoInfo]
Value -&gt; Parser RepoInfo
(Value -&gt; Parser RepoInfo)
-&gt; (Value -&gt; Parser [RepoInfo]) -&gt; FromJSON RepoInfo
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [RepoInfo]
$cparseJSONList :: Value -&gt; Parser [RepoInfo]
parseJSON :: Value -&gt; Parser RepoInfo
$cparseJSON :: Value -&gt; Parser RepoInfo
</span><a href="#local-6989586621679320688"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">data</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- This is a nonempty list, where we require the first segment to be the repo name / user name / whatever,</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-comment">-- which we need on the server side as an implementation detail of how we're representing different users' codebases.</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-comment">-- This could be relaxed in some other share implementation that allows access to the &quot;root&quot; of the shared codebase.</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-comment">-- Our share implementation doesn't have a root, just a collection of sub-roots, one per user or (eventually) organization.</span><span>
</span><span id="line-109"></span><span>    </span><span id="%24sel%3ApathSegments%3APath"><span class="annot"><span class="annottext">Path -&gt; NonEmpty Text
</span><a href="Unison.Sync.Types.html#%24sel%3ApathSegments%3APath"><span class="hs-identifier hs-var hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320680"><span id="local-6989586621679320682"><span id="local-6989586621679320684"><span class="annot"><span class="annottext">Int -&gt; Path -&gt; ShowS
[Path] -&gt; ShowS
Path -&gt; String
(Int -&gt; Path -&gt; ShowS)
-&gt; (Path -&gt; String) -&gt; ([Path] -&gt; ShowS) -&gt; Show Path
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Path] -&gt; ShowS
$cshowList :: [Path] -&gt; ShowS
show :: Path -&gt; String
$cshow :: Path -&gt; String
showsPrec :: Int -&gt; Path -&gt; ShowS
$cshowsPrec :: Int -&gt; Path -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320676"><span id="local-6989586621679320678"><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Bool
(Path -&gt; Path -&gt; Bool) -&gt; (Path -&gt; Path -&gt; Bool) -&gt; Eq Path
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Path -&gt; Path -&gt; Bool
$c/= :: Path -&gt; Path -&gt; Bool
== :: Path -&gt; Path -&gt; Bool
$c== :: Path -&gt; Path -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320661"><span id="local-6989586621679320663"><span id="local-6989586621679320665"><span id="local-6989586621679320667"><span id="local-6989586621679320669"><span id="local-6989586621679320671"><span id="local-6989586621679320673"><span class="annot"><span class="annottext">Eq Path
Eq Path
-&gt; (Path -&gt; Path -&gt; Ordering)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Bool)
-&gt; (Path -&gt; Path -&gt; Path)
-&gt; (Path -&gt; Path -&gt; Path)
-&gt; Ord Path
Path -&gt; Path -&gt; Bool
Path -&gt; Path -&gt; Ordering
Path -&gt; Path -&gt; Path
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Path -&gt; Path -&gt; Path
$cmin :: Path -&gt; Path -&gt; Path
max :: Path -&gt; Path -&gt; Path
$cmax :: Path -&gt; Path -&gt; Path
&gt;= :: Path -&gt; Path -&gt; Bool
$c&gt;= :: Path -&gt; Path -&gt; Bool
&gt; :: Path -&gt; Path -&gt; Bool
$c&gt; :: Path -&gt; Path -&gt; Bool
&lt;= :: Path -&gt; Path -&gt; Bool
$c&lt;= :: Path -&gt; Path -&gt; Bool
&lt; :: Path -&gt; Path -&gt; Bool
$c&lt; :: Path -&gt; Path -&gt; Bool
compare :: Path -&gt; Path -&gt; Ordering
$ccompare :: Path -&gt; Path -&gt; Ordering
$cp1Ord :: Eq Path
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- | Convert a path like arya.public.mystuff to a &quot;repo info&quot; by treating the first segment as a user handle.</span><span>
</span><span id="line-114"></span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-type">pathRepoInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-115"></span><span id="pathRepoInfo"><span class="annot"><span class="annottext">pathRepoInfo :: Path -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-var hs-var">pathRepoInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320660"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679320660"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679320660"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-type">pathCodebasePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-118"></span><span id="pathCodebasePath"><span class="annot"><span class="annottext">pathCodebasePath :: Path -&gt; [Text]
</span><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-var hs-var">pathCodebasePath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679320658"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679320658"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679320658"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320651"><span id="local-6989586621679320653"><span id="local-6989586621679320655"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621679320650"><span class="annot"><span class="annottext">toJSON :: Path -&gt; Value
</span><a href="#local-6989586621679320650"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span id="local-6989586621679320649"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679320649"><span class="hs-identifier hs-var">segments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-123"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; NonEmpty Text -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679320649"><span class="hs-identifier hs-var">segments</span></a></span><span>
</span><span id="line-124"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320644"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-127"></span><span>  </span><span id="local-6989586621679320643"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Path
</span><a href="#local-6989586621679320643"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser Path) -&gt; Value -&gt; Parser Path
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Path&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320641"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320641"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>    </span><span id="local-6989586621679320640"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679320640"><span class="hs-identifier hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320641"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NonEmpty Text)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">Path :: NonEmpty Text -&gt; Path
</span><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NonEmpty Text
pathSegments :: NonEmpty Text
$sel:pathSegments:Path :: NonEmpty Text
</span><a href="#local-6989586621679320640"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- Entity types</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-keyword">data</span><span> </span><span id="Entity"><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-var">Entity</span></a></span></span><span> </span><span id="local-6989586621679321214"><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321212"><span class="annot"><a href="#local-6989586621679321212"><span class="hs-identifier hs-type">noSyncHash</span></a></span></span><span> </span><span id="local-6989586621679321213"><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TC"><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DC"><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="P"><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321212"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PD"><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321212"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="N"><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ND"><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321214"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="C"><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321213"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320626"><span id="local-6989586621679320628"><span id="local-6989586621679320630"><span class="annot"><span class="annottext">Int -&gt; Entity text noSyncHash hash -&gt; ShowS
[Entity text noSyncHash hash] -&gt; ShowS
Entity text noSyncHash hash -&gt; String
(Int -&gt; Entity text noSyncHash hash -&gt; ShowS)
-&gt; (Entity text noSyncHash hash -&gt; String)
-&gt; ([Entity text noSyncHash hash] -&gt; ShowS)
-&gt; Show (Entity text noSyncHash hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
showList :: [Entity text noSyncHash hash] -&gt; ShowS
$cshowList :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
show :: Entity text noSyncHash hash -&gt; String
$cshow :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
showsPrec :: Int -&gt; Entity text noSyncHash hash -&gt; ShowS
$cshowsPrec :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320622"><span id="local-6989586621679320624"><span class="annot"><span class="annottext">Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
(Entity text noSyncHash hash
 -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; Eq (Entity text noSyncHash hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
/= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c/= :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
== :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c== :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320607"><span id="local-6989586621679320609"><span id="local-6989586621679320611"><span id="local-6989586621679320613"><span id="local-6989586621679320615"><span id="local-6989586621679320617"><span id="local-6989586621679320619"><span class="annot"><span class="annottext">Eq (Entity text noSyncHash hash)
Eq (Entity text noSyncHash hash)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Ordering)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Bool)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; (Entity text noSyncHash hash
    -&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; Ord (Entity text noSyncHash hash)
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Eq (Entity text noSyncHash hash)
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
min :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmin :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
max :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmax :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
&gt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&gt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
compare :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
$ccompare :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
$cp1Ord :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Eq (Entity text noSyncHash hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span id="local-6989586621679320604"><span id="local-6989586621679320605"><span id="local-6989586621679320606"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320597"><span id="local-6989586621679320599"><span id="local-6989586621679320601"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320606"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320605"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320604"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320606"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320605"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320604"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679320596"><span class="annot"><span class="annottext">toJSON :: Entity text noSyncHash hash -&gt; Value
</span><a href="#local-6989586621679320596"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679320595"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679320595"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; TermComponent text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679320595"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679320592"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679320592"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; DeclComponent text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679320592"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679320590"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679320590"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Patch text noSyncHash hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679320590"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679320588"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679320588"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; PatchDiff text noSyncHash hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679320588"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679320586"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679320586"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Namespace text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679320586"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679320584"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679320584"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; NamespaceDiff text hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679320584"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679320582"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679320582"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Causal hash -&gt; Value
forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679320582"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>      </span><span id="local-6989586621679321228"><span class="annot"><a href="#local-6989586621679320594"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679321228"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321228"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span></span><span>
</span><span id="line-155"></span><span>      </span><span id="local-6989586621679320594"><span class="annot"><span class="annottext">go :: EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679320594"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679320580"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679320580"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621679320579"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679320579"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; EntityType -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679320580"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; a -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679320579"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span id="local-6989586621679320576"><span id="local-6989586621679320577"><span id="local-6989586621679320578"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320573"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320578"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320577"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320576"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679320576"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320578"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320577"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320576"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>  </span><span id="local-6989586621679320572"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Entity text noSyncHash hash)
</span><a href="#local-6989586621679320572"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Entity text noSyncHash hash))
-&gt; Value
-&gt; Parser (Entity text noSyncHash hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Entity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320571"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser EntityType
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser EntityType
-&gt; (EntityType -&gt; Parser (Entity text noSyncHash hash))
-&gt; Parser (Entity text noSyncHash hash)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-160"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermComponent text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">(TermComponent text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (TermComponent text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (TermComponent text hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-161"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">(DeclComponent text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (DeclComponent text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (DeclComponent text hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">(Patch text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (Patch text noSyncHash hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Patch text noSyncHash hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">(PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (PatchDiff text noSyncHash hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (PatchDiff text noSyncHash hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-164"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Namespace text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">(Namespace text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (Namespace text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Namespace text hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-165"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">(NamespaceDiff text hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (NamespaceDiff text hash)
-&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NamespaceDiff text hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Causal hash -&gt; Entity text noSyncHash hash
forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">(Causal hash -&gt; Entity text noSyncHash hash)
-&gt; Parser (Causal hash) -&gt; Parser (Entity text noSyncHash hash)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320571"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Causal hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object&quot;</span></span></span></span></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span id="local-6989586621679320565"><span id="local-6989586621679320566"><span id="local-6989586621679320567"><span id="local-6989586621679320568"><span id="local-6989586621679320569"><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-type">entityHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679320569"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679320568"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679320567"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679320569"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320568"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320566"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320565"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320567"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679320569"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320566"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320565"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320568"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-169"></span><span id="entityHashes_"><span class="annot"><span class="annottext">entityHashes_ :: (hash -&gt; m hash')
-&gt; Entity text noSyncHash hash -&gt; m (Entity text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-var hs-var">entityHashes_</span></a></span></span><span> </span><span id="local-6989586621679320564"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679320563"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679320563"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermComponent text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">(TermComponent text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (TermComponent text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; m text)
-&gt; (hash -&gt; m hash')
-&gt; TermComponent text hash
-&gt; m (TermComponent text hash')
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; m text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679320563"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679320561"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679320561"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">(DeclComponent text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (DeclComponent text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; m text)
-&gt; (hash -&gt; m hash')
-&gt; DeclComponent text hash
-&gt; m (DeclComponent text hash')
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; m text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679320561"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679320560"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679320560"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">(Patch text noSyncHash hash' -&gt; Entity text noSyncHash hash')
-&gt; m (Patch text noSyncHash hash')
-&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-var">patchHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679320560"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679320559"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679320559"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">(PatchDiff text noSyncHash hash' -&gt; Entity text noSyncHash hash')
-&gt; m (PatchDiff text noSyncHash hash')
-&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var">patchDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679320559"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679320558"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679320558"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Namespace text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">(Namespace text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (Namespace text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; m text)
-&gt; (hash -&gt; m hash')
-&gt; Namespace text hash
-&gt; m (Namespace text hash')
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; m text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679320558"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679320557"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679320557"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">(NamespaceDiff text hash' -&gt; Entity text noSyncHash hash')
-&gt; m (NamespaceDiff text hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var">namespaceDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679320557"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679320556"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679320556"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Causal hash' -&gt; Entity text noSyncHash hash'
forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">(Causal hash' -&gt; Entity text noSyncHash hash')
-&gt; m (Causal hash') -&gt; m (Entity text noSyncHash hash')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var">causalHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320564"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679320556"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | Get the direct dependencies of an entity (which are actually sync'd).</span><span>
</span><span id="line-179"></span><span class="hs-comment">--</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- FIXME use generic-lens here? (typed @hash)</span><span>
</span><span id="line-181"></span><span id="local-6989586621679320553"><span id="local-6989586621679320554"><span id="local-6989586621679320555"><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-type">entityDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679320555"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320554"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320553"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320555"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679320555"><span class="hs-identifier hs-type">hash</span></a></span></span></span></span><span>
</span><span id="line-182"></span><span id="entityDependencies"><span class="annot"><span class="annottext">entityDependencies :: Entity text noSyncHash hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-var hs-var">entityDependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679320551"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320551"><span class="hs-identifier hs-var">terms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(((LocalIds text hash, ByteString) -&gt; Set hash)
 -&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)]
-&gt; ((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; Set hash
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320551"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320547"><span class="annot"><span class="annottext">[hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
hashes :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320545"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320545"><span class="hs-identifier hs-var">_term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320547"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679320542"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320542"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(((LocalIds text hash, ByteString) -&gt; Set hash)
 -&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)]
-&gt; ((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; Set hash
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Set hash)
-&gt; [(LocalIds text hash, ByteString)] -&gt; Set hash
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320542"><span class="hs-identifier hs-var">decls</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320541"><span class="annot"><span class="annottext">[hash]
hashes :: [hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="#local-6989586621679320541"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320540"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320540"><span class="hs-identifier hs-var">_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320541"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320538"><span class="annot"><span class="annottext">[hash]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
newHashLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320538"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320535"><span class="annot"><span class="annottext">hash
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
parent :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320533"><span class="annot"><span class="annottext">[hash]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
newHashLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">hash -&gt; Set hash -&gt; Set hash
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320535"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320533"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320529"><span class="annot"><span class="annottext">[hash]
$sel:defnLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
defnLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320527"><span class="annot"><span class="annottext">[hash]
$sel:patchLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
patchLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320525"><span class="annot"><span class="annottext">[(hash, hash)]
$sel:childLookup:Namespace :: forall text hash. Namespace text hash -&gt; [(hash, hash)]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><span class="annottext">[Set hash] -&gt; Set hash
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320529"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-190"></span><span>        </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320527"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><span class="annottext">((hash, hash) -&gt; Set hash) -&gt; [(hash, hash)] -&gt; Set hash
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679320522"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320522"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320521"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320521"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320522"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320521"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320525"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320519"><span class="annot"><span class="annottext">hash
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
parent :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320517"><span class="annot"><span class="annottext">[hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
defnLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320515"><span class="annot"><span class="annottext">[hash]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
patchLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320513"><span class="annot"><span class="annottext">[(hash, hash)]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>    </span><span class="annot"><span class="annottext">[Set hash] -&gt; Set hash
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-195"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">hash -&gt; Set hash
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320519"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320517"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320515"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><span class="annottext">((hash, hash) -&gt; Set hash) -&gt; [(hash, hash)] -&gt; Set hash
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679320510"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320510"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320509"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320509"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[hash] -&gt; Set hash
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320510"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320509"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320513"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320507"><span class="annot"><span class="annottext">hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
namespaceHash :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320505"><span class="annot"><span class="annottext">Set hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
parents :: Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">hash -&gt; Set hash -&gt; Set hash
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320507"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679320505"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">data</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span id="local-6989586621679321086"><span class="annot"><a href="#local-6989586621679321086"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321085"><span class="annot"><a href="#local-6989586621679321085"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321086"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321085"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320498"><span id="local-6989586621679320500"><span id="local-6989586621679320502"><span class="annot"><span class="annottext">Int -&gt; TermComponent text hash -&gt; ShowS
[TermComponent text hash] -&gt; ShowS
TermComponent text hash -&gt; String
(Int -&gt; TermComponent text hash -&gt; ShowS)
-&gt; (TermComponent text hash -&gt; String)
-&gt; ([TermComponent text hash] -&gt; ShowS)
-&gt; Show (TermComponent text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
showList :: [TermComponent text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
show :: TermComponent text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
showsPrec :: Int -&gt; TermComponent text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320494"><span id="local-6989586621679320496"><span class="annot"><span class="annottext">TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
(TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; Eq (TermComponent text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
/= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
== :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320479"><span id="local-6989586621679320481"><span id="local-6989586621679320483"><span id="local-6989586621679320485"><span id="local-6989586621679320487"><span id="local-6989586621679320489"><span id="local-6989586621679320491"><span class="annot"><span class="annottext">Eq (TermComponent text hash)
Eq (TermComponent text hash)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash -&gt; TermComponent text hash -&gt; Bool)
-&gt; (TermComponent text hash
    -&gt; TermComponent text hash -&gt; TermComponent text hash)
-&gt; (TermComponent text hash
    -&gt; TermComponent text hash -&gt; TermComponent text hash)
-&gt; Ord (TermComponent text hash)
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash.
(Ord text, Ord hash) =&gt;
Eq (TermComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
min :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
max :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
&gt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&gt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
compare :: TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
$cp1Ord :: forall text hash.
(Ord text, Ord hash) =&gt;
Eq (TermComponent text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320472"><span id="local-6989586621679320474"><span id="local-6989586621679320477"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621679320470"><span class="annot"><span class="annottext">bifoldMap :: (a -&gt; m) -&gt; (b -&gt; m) -&gt; TermComponent a b -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; TermComponent a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320463"><span id="local-6989586621679320465"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621679320461"><span class="annot"><span class="annottext">bimap :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; TermComponent a c -&gt; TermComponent b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; TermComponent a c -&gt; TermComponent b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>  </span><span id="local-6989586621679320454"><span class="annot"><span class="annottext">bitraverse :: (a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; TermComponent a b -&gt; f (TermComponent c d)
</span><a href="#local-6989586621679320454"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679320453"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320453"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679320452"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320452"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679320451"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679320451"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">[(LocalIds c d, ByteString)] -&gt; TermComponent c d
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocalIds c d, ByteString)] -&gt; TermComponent c d)
-&gt; f [(LocalIds c d, ByteString)] -&gt; f (TermComponent c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c)
-&gt; (b -&gt; f d)
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds c d, ByteString)]
forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320453"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320452"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679320451"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span id="local-6989586621679320448"><span id="local-6989586621679320449"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320441"><span id="local-6989586621679320443"><span id="local-6989586621679320445"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320449"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320448"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320449"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320448"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621679320440"><span class="annot"><span class="annottext">toJSON :: TermComponent text hash -&gt; Value
</span><a href="#local-6989586621679320440"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679320439"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320439"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;terms&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Value] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocalIds text hash, ByteString) -&gt; Value
forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Value)
-&gt; [(LocalIds text hash, ByteString)] -&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320439"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-special">]</span></span></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span id="local-6989586621679320436"><span id="local-6989586621679320437"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320433"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320437"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320436"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320437"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320436"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621679320432"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (TermComponent text hash)
</span><a href="#local-6989586621679320432"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (TermComponent text hash))
-&gt; Value
-&gt; Parser (TermComponent text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TermComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320431"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320431"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621679320430"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679320430"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320431"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;terms&quot;</span></span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621679320429"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320429"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (LocalIds text hash, ByteString))
-&gt; [Value] -&gt; Parser [(LocalIds text hash, ByteString)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (LocalIds text hash, ByteString)
forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679320430"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320429"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span id="local-6989586621679321080"><span id="local-6989586621679321081"><span id="local-6989586621679321082"><span id="local-6989586621679321083"><span id="local-6989586621679321084"><span class="annot"><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-type">bitraverseComponents</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679321084"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321083"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321084"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321082"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321081"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321084"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321080"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321083"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321081"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><a href="#local-6989586621679321084"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321082"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321080"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span></span></span></span><span>
</span><span id="line-233"></span><span id="bitraverseComponents"><span class="annot"><span class="annottext">bitraverseComponents :: (a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var hs-var">bitraverseComponents</span></a></span></span><span> </span><span id="local-6989586621679320426"><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679320426"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679320425"><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679320425"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="annottext">((LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString))
-&gt; [(LocalIds a b, ByteString)] -&gt; f [(LocalIds a' b', ByteString)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(((LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString))
 -&gt; [(LocalIds a b, ByteString)]
 -&gt; f [(LocalIds a' b', ByteString)])
-&gt; ((LocalIds a b -&gt; f (LocalIds a' b'))
    -&gt; (LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString))
-&gt; (LocalIds a b -&gt; f (LocalIds a' b'))
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LocalIds a b -&gt; f (LocalIds a' b'))
-&gt; (LocalIds a b, ByteString) -&gt; f (LocalIds a' b', ByteString)
forall (f :: * -&gt; *) t t t.
Functor f =&gt;
(t -&gt; f t) -&gt; (t, t) -&gt; f (t, t)
</span><a href="#local-6989586621679320424"><span class="hs-identifier hs-var">_1</span></a></span><span> </span><span class="annot"><span class="annottext">((LocalIds a b -&gt; f (LocalIds a' b'))
 -&gt; [(LocalIds a b, ByteString)]
 -&gt; f [(LocalIds a' b', ByteString)])
-&gt; (LocalIds a b -&gt; f (LocalIds a' b'))
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f a') -&gt; (b -&gt; f b') -&gt; LocalIds a b -&gt; f (LocalIds a' b')
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679320426"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679320425"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679320424"><span class="annot"><span class="annottext">_1 :: (t -&gt; f t) -&gt; (t, t) -&gt; f (t, t)
</span><a href="#local-6989586621679320424"><span class="hs-identifier hs-var hs-var">_1</span></a></span></span><span> </span><span id="local-6989586621679320423"><span class="annot"><span class="annottext">t -&gt; f t
</span><a href="#local-6989586621679320423"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320422"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679320422"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320421"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679320421"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679320421"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t -&gt; (t, t)) -&gt; f t -&gt; f (t, t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; f t
</span><a href="#local-6989586621679320423"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679320422"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span id="local-6989586621679321076"><span id="local-6989586621679321077"><span class="annot"><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-type">encodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679321077"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679321076"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321077"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321076"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span></span><span>
</span><span id="line-239"></span><span id="encodeComponentPiece"><span class="annot"><span class="annottext">encodeComponentPiece :: (LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var hs-var">encodeComponentPiece</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320420"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679320420"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320419"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320419"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; LocalIds text hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679320420"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320419"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span id="local-6989586621679321068"><span id="local-6989586621679321069"><span class="annot"><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-type">decodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679321069"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679321068"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321069"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321068"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-246"></span><span id="decodeComponentPiece"><span class="annot"><span class="annottext">decodeComponentPiece :: Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var hs-var">decodeComponentPiece</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (LocalIds text hash, ByteString))
-&gt; Value
-&gt; Parser (LocalIds text hash, ByteString)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Component Piece&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320418"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320418"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621679320417"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679320417"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320418"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (LocalIds text hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span>
</span><span id="line-248"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679320416"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320416"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320418"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><span class="annottext">(LocalIds text hash, ByteString)
-&gt; Parser (LocalIds text hash, ByteString)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679320417"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320416"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-keyword">data</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span id="local-6989586621679321023"><span class="annot"><a href="#local-6989586621679321023"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321022"><span class="annot"><a href="#local-6989586621679321022"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321023"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321022"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320410"><span id="local-6989586621679320412"><span id="local-6989586621679320414"><span class="annot"><span class="annottext">Int -&gt; DeclComponent text hash -&gt; ShowS
[DeclComponent text hash] -&gt; ShowS
DeclComponent text hash -&gt; String
(Int -&gt; DeclComponent text hash -&gt; ShowS)
-&gt; (DeclComponent text hash -&gt; String)
-&gt; ([DeclComponent text hash] -&gt; ShowS)
-&gt; Show (DeclComponent text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
showList :: [DeclComponent text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
show :: DeclComponent text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
showsPrec :: Int -&gt; DeclComponent text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320406"><span id="local-6989586621679320408"><span class="annot"><span class="annottext">DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
(DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; Eq (DeclComponent text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
/= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
== :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320391"><span id="local-6989586621679320393"><span id="local-6989586621679320395"><span id="local-6989586621679320397"><span id="local-6989586621679320399"><span id="local-6989586621679320401"><span id="local-6989586621679320403"><span class="annot"><span class="annottext">Eq (DeclComponent text hash)
Eq (DeclComponent text hash)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool)
-&gt; (DeclComponent text hash
    -&gt; DeclComponent text hash -&gt; DeclComponent text hash)
-&gt; (DeclComponent text hash
    -&gt; DeclComponent text hash -&gt; DeclComponent text hash)
-&gt; Ord (DeclComponent text hash)
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash.
(Ord text, Ord hash) =&gt;
Eq (DeclComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
min :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
max :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
&gt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&gt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
compare :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
$cp1Ord :: forall text hash.
(Ord text, Ord hash) =&gt;
Eq (DeclComponent text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320384"><span id="local-6989586621679320386"><span id="local-6989586621679320389"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>  </span><span id="local-6989586621679320383"><span class="annot"><span class="annottext">bifoldMap :: (a -&gt; m) -&gt; (b -&gt; m) -&gt; DeclComponent a b -&gt; m
</span><a href="#local-6989586621679320383"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; DeclComponent a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320378"><span id="local-6989586621679320380"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621679320377"><span class="annot"><span class="annottext">bimap :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; DeclComponent a c -&gt; DeclComponent b d
</span><a href="#local-6989586621679320377"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; DeclComponent a c -&gt; DeclComponent b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621679320373"><span class="annot"><span class="annottext">bitraverse :: (a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; DeclComponent a b -&gt; f (DeclComponent c d)
</span><a href="#local-6989586621679320373"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679320372"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320372"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679320371"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320371"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679320370"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679320370"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><span class="annottext">[(LocalIds c d, ByteString)] -&gt; DeclComponent c d
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">([(LocalIds c d, ByteString)] -&gt; DeclComponent c d)
-&gt; f [(LocalIds c d, ByteString)] -&gt; f (DeclComponent c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c)
-&gt; (b -&gt; f d)
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds c d, ByteString)]
forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320372"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320371"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679320370"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span id="local-6989586621679320368"><span id="local-6989586621679320369"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320361"><span id="local-6989586621679320363"><span id="local-6989586621679320365"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320369"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320368"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320369"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320368"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-265"></span><span>  </span><span id="local-6989586621679320360"><span class="annot"><span class="annottext">toJSON :: DeclComponent text hash -&gt; Value
</span><a href="#local-6989586621679320360"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679320359"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320359"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-267"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decls&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Value] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocalIds text hash, ByteString) -&gt; Value
forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">((LocalIds text hash, ByteString) -&gt; Value)
-&gt; [(LocalIds text hash, ByteString)] -&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320359"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">]</span></span></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span id="local-6989586621679320357"><span id="local-6989586621679320358"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320354"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320358"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320357"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320358"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320357"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621679320353"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (DeclComponent text hash)
</span><a href="#local-6989586621679320353"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (DeclComponent text hash))
-&gt; Value
-&gt; Parser (DeclComponent text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DeclComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320352"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320352"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621679320351"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679320351"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320352"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [Value]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decls&quot;</span></span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621679320350"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320350"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (LocalIds text hash, ByteString))
-&gt; [Value] -&gt; Parser [(LocalIds text hash, ByteString)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (LocalIds text hash, ByteString)
forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679320351"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679320350"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-keyword">data</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span> </span><span id="local-6989586621679321168"><span class="annot"><a href="#local-6989586621679321168"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321167"><span class="annot"><a href="#local-6989586621679321167"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atexts%3ALocalIds"><span class="annot"><span class="annottext">LocalIds text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3Atexts%3ALocalIds"><span class="hs-identifier hs-var hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321168"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-278"></span><span>    </span><span id="%24sel%3Ahashes%3ALocalIds"><span class="annot"><span class="annottext">LocalIds text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321167"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320343"><span id="local-6989586621679320345"><span id="local-6989586621679320347"><span class="annot"><span class="annottext">Int -&gt; LocalIds text hash -&gt; ShowS
[LocalIds text hash] -&gt; ShowS
LocalIds text hash -&gt; String
(Int -&gt; LocalIds text hash -&gt; ShowS)
-&gt; (LocalIds text hash -&gt; String)
-&gt; ([LocalIds text hash] -&gt; ShowS)
-&gt; Show (LocalIds text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
showList :: [LocalIds text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
show :: LocalIds text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
showsPrec :: Int -&gt; LocalIds text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320339"><span id="local-6989586621679320341"><span class="annot"><span class="annottext">LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
(LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; Eq (LocalIds text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
/= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
== :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320324"><span id="local-6989586621679320326"><span id="local-6989586621679320328"><span id="local-6989586621679320330"><span id="local-6989586621679320332"><span id="local-6989586621679320334"><span id="local-6989586621679320336"><span class="annot"><span class="annottext">Eq (LocalIds text hash)
Eq (LocalIds text hash)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; Bool)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash)
-&gt; (LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash)
-&gt; Ord (LocalIds text hash)
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash. (Ord text, Ord hash) =&gt; Eq (LocalIds text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
min :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
max :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
&gt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&gt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
compare :: LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
$cp1Ord :: forall text hash. (Ord text, Ord hash) =&gt; Eq (LocalIds text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320317"><span id="local-6989586621679320319"><span id="local-6989586621679320322"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>  </span><span id="local-6989586621679320316"><span class="annot"><span class="annottext">bifoldMap :: (a -&gt; m) -&gt; (b -&gt; m) -&gt; LocalIds a b -&gt; m
</span><a href="#local-6989586621679320316"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; LocalIds a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320311"><span id="local-6989586621679320313"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621679320310"><span class="annot"><span class="annottext">bimap :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; LocalIds a c -&gt; LocalIds b d
</span><a href="#local-6989586621679320310"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; LocalIds a c -&gt; LocalIds b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>  </span><span id="local-6989586621679320306"><span class="annot"><span class="annottext">bitraverse :: (a -&gt; f c) -&gt; (b -&gt; f d) -&gt; LocalIds a b -&gt; f (LocalIds c d)
</span><a href="#local-6989586621679320306"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679320305"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320305"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679320304"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320304"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679320303"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679320303"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679320302"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679320302"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">[c] -&gt; [d] -&gt; LocalIds c d
forall text hash. [text] -&gt; [hash] -&gt; LocalIds text hash
</span><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span><span> </span><span class="annot"><span class="annottext">([c] -&gt; [d] -&gt; LocalIds c d) -&gt; f [c] -&gt; f ([d] -&gt; LocalIds c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c) -&gt; [a] -&gt; f [c]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320305"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679320303"><span class="hs-identifier hs-var">texts</span></a></span><span> </span><span class="annot"><span class="annottext">f ([d] -&gt; LocalIds c d) -&gt; f [d] -&gt; f (LocalIds c d)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; [b] -&gt; f [d]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320304"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679320302"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span id="local-6989586621679320300"><span id="local-6989586621679320301"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320293"><span id="local-6989586621679320295"><span id="local-6989586621679320297"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320301"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320300"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320301"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320300"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span id="local-6989586621679320292"><span class="annot"><span class="annottext">toJSON :: LocalIds text hash -&gt; Value
</span><a href="#local-6989586621679320292"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679320291"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320291"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679320290"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320290"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;texts&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320291"><span class="hs-identifier hs-var">texts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320290"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-297"></span><span>      </span><span class="hs-special">]</span></span></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span id="local-6989586621679320288"><span id="local-6989586621679320289"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320285"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320289"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320288"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320289"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320288"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621679320284"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (LocalIds text hash)
</span><a href="#local-6989586621679320284"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (LocalIds text hash))
-&gt; Value
-&gt; Parser (LocalIds text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LocalIds&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320283"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320283"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621679320282"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320282"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320283"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;texts&quot;</span></span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621679320281"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320281"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320283"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">LocalIds :: forall text hash. [text] -&gt; [hash] -&gt; LocalIds text hash
</span><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[hash]
hashes :: [hash]
texts :: [text]
$sel:texts:LocalIds :: [text]
$sel:hashes:LocalIds :: [hash]
</span><a href="#local-6989586621679320281"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-keyword">data</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span> </span><span id="local-6989586621679321165"><span class="annot"><a href="#local-6989586621679321165"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321164"><span class="annot"><a href="#local-6989586621679321164"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679321163"><span class="annot"><a href="#local-6989586621679321163"><span class="hs-identifier hs-type">newHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3APatch"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatch"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321165"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-307"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatch"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321164"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatch"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; [newHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321163"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>    </span><span id="%24sel%3Abytes%3APatch"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatch"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320272"><span id="local-6989586621679320274"><span id="local-6989586621679320276"><span class="annot"><span class="annottext">Int -&gt; Patch text oldHash newHash -&gt; ShowS
[Patch text oldHash newHash] -&gt; ShowS
Patch text oldHash newHash -&gt; String
(Int -&gt; Patch text oldHash newHash -&gt; ShowS)
-&gt; (Patch text oldHash newHash -&gt; String)
-&gt; ([Patch text oldHash newHash] -&gt; ShowS)
-&gt; Show (Patch text oldHash newHash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
showList :: [Patch text oldHash newHash] -&gt; ShowS
$cshowList :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
show :: Patch text oldHash newHash -&gt; String
$cshow :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
showsPrec :: Int -&gt; Patch text oldHash newHash -&gt; ShowS
$cshowsPrec :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320268"><span id="local-6989586621679320270"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
(Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; Eq (Patch text oldHash newHash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
/= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c/= :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
== :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c== :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320253"><span id="local-6989586621679320255"><span id="local-6989586621679320257"><span id="local-6989586621679320259"><span id="local-6989586621679320261"><span id="local-6989586621679320263"><span id="local-6989586621679320265"><span class="annot"><span class="annottext">Eq (Patch text oldHash newHash)
Eq (Patch text oldHash newHash)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Ordering)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Bool)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash)
-&gt; (Patch text oldHash newHash
    -&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash)
-&gt; Ord (Patch text oldHash newHash)
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Eq (Patch text oldHash newHash)
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
min :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmin :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
max :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmax :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
&gt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&gt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
compare :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
$ccompare :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
$cp1Ord :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Eq (Patch text oldHash newHash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span id="local-6989586621679320250"><span id="local-6989586621679320251"><span id="local-6989586621679320252"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320243"><span id="local-6989586621679320245"><span id="local-6989586621679320247"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320252"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320251"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320250"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320252"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320251"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320250"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-314"></span><span>  </span><span id="local-6989586621679320242"><span class="annot"><span class="annottext">toJSON :: Patch text oldHash newHash -&gt; Value
</span><a href="#local-6989586621679320242"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span id="local-6989586621679320241"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320241"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679320240"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679320240"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679320239"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679320239"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679320238"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320238"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-316"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320241"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-317"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [oldHash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679320240"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [newHash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679320239"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320238"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-320"></span><span>      </span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span id="local-6989586621679320235"><span id="local-6989586621679320236"><span id="local-6989586621679320237"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320232"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320237"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320236"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320235"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320237"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320236"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320235"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621679320231"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Patch text oldHash newHash)
</span><a href="#local-6989586621679320231"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Patch text oldHash newHash))
-&gt; Value
-&gt; Parser (Patch text oldHash newHash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Patch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320230"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320230"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621679320229"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320229"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320230"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679320228"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679320228"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320230"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [oldHash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679320227"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679320227"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320230"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [newHash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679320226"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320226"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320230"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Parser (Patch text oldHash newHash)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Patch :: forall text oldHash newHash.
[text]
-&gt; [oldHash]
-&gt; [newHash]
-&gt; ByteString
-&gt; Patch text oldHash newHash
</span><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[oldHash]
[newHash]
ByteString
bytes :: ByteString
newHashLookup :: [newHash]
oldHashLookup :: [oldHash]
textLookup :: [text]
$sel:bytes:Patch :: ByteString
$sel:oldHashLookup:Patch :: [oldHash]
$sel:textLookup:Patch :: [text]
$sel:newHashLookup:Patch :: [newHash]
</span><a href="#local-6989586621679320226"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span></span></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span id="local-6989586621679321192"><span id="local-6989586621679321193"><span id="local-6989586621679321194"><span id="local-6989586621679321195"><span id="local-6989586621679321196"><span class="annot"><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-type">patchHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679321196"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321195"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321196"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321194"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321193"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321192"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321195"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321196"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321193"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321192"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321194"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-331"></span><span id="patchHashes_"><span class="annot"><span class="annottext">patchHashes_ :: (hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-var hs-var">patchHashes_</span></a></span></span><span> </span><span id="local-6989586621679320225"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320225"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320221"><span id="local-6989586621679320222"><span id="local-6989586621679320223"><span id="local-6989586621679320224"><span class="annot"><span class="annottext">[hash]
[text]
[noSyncHash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
$sel:oldHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
$sel:textLookup:Patch :: forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="#local-6989586621679320221"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-332"></span><span>  </span><span id="local-6989586621679320220"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679320220"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320225"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320222"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Patch :: forall text oldHash newHash.
[text]
-&gt; [oldHash]
-&gt; [newHash]
-&gt; ByteString
-&gt; Patch text oldHash newHash
</span><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[hash']
[text]
[noSyncHash]
ByteString
newHashLookup :: [hash']
bytes :: ByteString
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:Patch :: ByteString
$sel:oldHashLookup:Patch :: [noSyncHash]
$sel:textLookup:Patch :: [text]
$sel:newHashLookup:Patch :: [hash']
</span><a href="#local-6989586621679320220"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-keyword">data</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span> </span><span id="local-6989586621679321162"><span class="annot"><a href="#local-6989586621679321162"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321161"><span class="annot"><a href="#local-6989586621679321161"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679321160"><span class="annot"><a href="#local-6989586621679321160"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3APatchDiff"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679321160"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-337"></span><span>    </span><span id="%24sel%3AtextLookup%3APatchDiff"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321162"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-338"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatchDiff"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321161"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-339"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatchDiff"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321160"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-340"></span><span>    </span><span id="%24sel%3Abytes%3APatchDiff"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatchDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320213"><span id="local-6989586621679320215"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
(PatchDiff text oldHash hash
 -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; Eq (PatchDiff text oldHash hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
/= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c/= :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
== :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c== :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320198"><span id="local-6989586621679320200"><span id="local-6989586621679320202"><span id="local-6989586621679320204"><span id="local-6989586621679320206"><span id="local-6989586621679320208"><span id="local-6989586621679320210"><span class="annot"><span class="annottext">Eq (PatchDiff text oldHash hash)
Eq (PatchDiff text oldHash hash)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Ordering)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; Bool)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash)
-&gt; (PatchDiff text oldHash hash
    -&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash)
-&gt; Ord (PatchDiff text oldHash hash)
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
Eq (PatchDiff text oldHash hash)
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
min :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmin :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
max :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmax :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
&gt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&gt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
compare :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
$ccompare :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
$cp1Ord :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
Eq (PatchDiff text oldHash hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320192"><span id="local-6989586621679320194"><span id="local-6989586621679320196"><span class="annot"><span class="annottext">Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
[PatchDiff text oldHash hash] -&gt; ShowS
PatchDiff text oldHash hash -&gt; String
(Int -&gt; PatchDiff text oldHash hash -&gt; ShowS)
-&gt; (PatchDiff text oldHash hash -&gt; String)
-&gt; ([PatchDiff text oldHash hash] -&gt; ShowS)
-&gt; Show (PatchDiff text oldHash hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
showList :: [PatchDiff text oldHash hash] -&gt; ShowS
$cshowList :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
show :: PatchDiff text oldHash hash -&gt; String
$cshow :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
showsPrec :: Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
$cshowsPrec :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span id="local-6989586621679320189"><span id="local-6989586621679320190"><span id="local-6989586621679320191"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320182"><span id="local-6989586621679320184"><span id="local-6989586621679320186"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320191"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320190"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320189"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320191"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320190"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320189"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-345"></span><span>  </span><span id="local-6989586621679320181"><span class="annot"><span class="annottext">toJSON :: PatchDiff text oldHash hash -&gt; Value
</span><a href="#local-6989586621679320181"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span id="local-6989586621679320180"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320180"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679320179"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320179"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679320178"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679320178"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679320177"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320177"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679320176"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320176"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320180"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-348"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320179"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [oldHash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679320178"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320177"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320176"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span id="local-6989586621679320173"><span id="local-6989586621679320174"><span id="local-6989586621679320175"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320170"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320175"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320174"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320173"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320175"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320174"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320173"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>  </span><span id="local-6989586621679320169"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (PatchDiff text oldHash hash)
</span><a href="#local-6989586621679320169"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (PatchDiff text oldHash hash))
-&gt; Value
-&gt; Parser (PatchDiff text oldHash hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PatchDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320168"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320168"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621679320167"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320167"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser hash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621679320166"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320166"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621679320165"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679320165"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [oldHash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621679320164"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320164"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679320163"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320163"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320168"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; Parser (PatchDiff text oldHash hash)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PatchDiff :: forall text oldHash hash.
hash
-&gt; [text]
-&gt; [oldHash]
-&gt; [hash]
-&gt; ByteString
-&gt; PatchDiff text oldHash hash
</span><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
[text]
[oldHash]
[hash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [oldHash]
textLookup :: [text]
parent :: hash
$sel:bytes:PatchDiff :: ByteString
$sel:oldHashLookup:PatchDiff :: [oldHash]
$sel:textLookup:PatchDiff :: [text]
$sel:newHashLookup:PatchDiff :: [hash]
$sel:parent:PatchDiff :: hash
</span><a href="#local-6989586621679320163"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span></span></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span id="local-6989586621679321187"><span id="local-6989586621679321188"><span id="local-6989586621679321189"><span id="local-6989586621679321190"><span id="local-6989586621679321191"><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-type">patchDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679321191"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321190"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321191"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321189"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321188"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321187"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321190"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321191"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321188"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321187"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321189"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-364"></span><span id="patchDiffHashes_"><span class="annot"><span class="annottext">patchDiffHashes_ :: (hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var hs-var">patchDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679320162"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320162"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320157"><span id="local-6989586621679320158"><span id="local-6989586621679320159"><span id="local-6989586621679320160"><span id="local-6989586621679320161"><span class="annot"><span class="annottext">hash
[hash]
[text]
[noSyncHash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [noSyncHash]
textLookup :: [text]
parent :: hash
$sel:bytes:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
$sel:oldHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
$sel:textLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="#local-6989586621679320157"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-365"></span><span>  </span><span id="local-6989586621679320156"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679320156"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320162"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320161"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621679320155"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679320155"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320162"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320158"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatchDiff :: forall text oldHash hash.
hash
-&gt; [text]
-&gt; [oldHash]
-&gt; [hash]
-&gt; ByteString
-&gt; PatchDiff text oldHash hash
</span><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[noSyncHash]
ByteString
newHashLookup :: [hash']
parent :: hash'
bytes :: ByteString
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:PatchDiff :: ByteString
$sel:oldHashLookup:PatchDiff :: [noSyncHash]
$sel:textLookup:PatchDiff :: [text]
$sel:newHashLookup:PatchDiff :: [hash']
$sel:parent:PatchDiff :: hash'
</span><a href="#local-6989586621679320155"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-keyword">data</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span> </span><span id="local-6989586621679321158"><span class="annot"><a href="#local-6989586621679321158"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321157"><span class="annot"><a href="#local-6989586621679321157"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3ANamespace"><span class="annot"><span class="annottext">Namespace text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321158"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-371"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespace"><span class="annot"><span class="annottext">Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321157"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-372"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespace"><span class="annot"><span class="annottext">Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321157"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-373"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespace"><span class="annot"><span class="annottext">Namespace text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321157"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679321157"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-374"></span><span>    </span><span id="%24sel%3Abytes%3ANamespace"><span class="annot"><span class="annottext">Namespace text hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespace"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-375"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320149"><span id="local-6989586621679320151"><span class="annot"><span class="annottext">Namespace text hash -&gt; Namespace text hash -&gt; Bool
(Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; Eq (Namespace text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
/= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
== :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320134"><span id="local-6989586621679320136"><span id="local-6989586621679320138"><span id="local-6989586621679320140"><span id="local-6989586621679320142"><span id="local-6989586621679320144"><span id="local-6989586621679320146"><span class="annot"><span class="annottext">Eq (Namespace text hash)
Eq (Namespace text hash)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Ordering)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash -&gt; Namespace text hash -&gt; Bool)
-&gt; (Namespace text hash
    -&gt; Namespace text hash -&gt; Namespace text hash)
-&gt; (Namespace text hash
    -&gt; Namespace text hash -&gt; Namespace text hash)
-&gt; Ord (Namespace text hash)
Namespace text hash -&gt; Namespace text hash -&gt; Bool
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash. (Ord text, Ord hash) =&gt; Eq (Namespace text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
min :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
max :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
&gt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&gt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
compare :: Namespace text hash -&gt; Namespace text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
$cp1Ord :: forall text hash. (Ord text, Ord hash) =&gt; Eq (Namespace text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320128"><span id="local-6989586621679320130"><span id="local-6989586621679320132"><span class="annot"><span class="annottext">Int -&gt; Namespace text hash -&gt; ShowS
[Namespace text hash] -&gt; ShowS
Namespace text hash -&gt; String
(Int -&gt; Namespace text hash -&gt; ShowS)
-&gt; (Namespace text hash -&gt; String)
-&gt; ([Namespace text hash] -&gt; ShowS)
-&gt; Show (Namespace text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
showList :: [Namespace text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
show :: Namespace text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
showsPrec :: Int -&gt; Namespace text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320121"><span id="local-6989586621679320123"><span id="local-6989586621679320126"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-379"></span><span>  </span><span id="local-6989586621679320120"><span class="annot"><span class="annottext">bifoldMap :: (a -&gt; m) -&gt; (b -&gt; m) -&gt; Namespace a b -&gt; m
</span><a href="#local-6989586621679320120"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; (b -&gt; m) -&gt; Namespace a b -&gt; m
forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320115"><span id="local-6989586621679320117"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>  </span><span id="local-6989586621679320114"><span class="annot"><span class="annottext">bimap :: (a -&gt; b) -&gt; (c -&gt; d) -&gt; Namespace a c -&gt; Namespace b d
</span><a href="#local-6989586621679320114"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (c -&gt; d) -&gt; Namespace a c -&gt; Namespace b d
forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-385"></span><span>  </span><span id="local-6989586621679320110"><span class="annot"><span class="annottext">bitraverse :: (a -&gt; f c) -&gt; (b -&gt; f d) -&gt; Namespace a b -&gt; f (Namespace c d)
</span><a href="#local-6989586621679320110"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679320109"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320109"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679320108"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320108"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679320107"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679320107"><span class="hs-identifier hs-var">tl</span></a></span></span><span> </span><span id="local-6989586621679320106"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679320106"><span class="hs-identifier hs-var">dl</span></a></span></span><span> </span><span id="local-6989586621679320105"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679320105"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span id="local-6989586621679320104"><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679320104"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621679320103"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320103"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><span class="annottext">[c] -&gt; [d] -&gt; [d] -&gt; [(d, d)] -&gt; ByteString -&gt; Namespace c d
forall text hash.
[text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; ByteString
-&gt; Namespace text hash
</span><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span><span>
</span><span id="line-387"></span><span>      </span><span class="annot"><span class="annottext">([c] -&gt; [d] -&gt; [d] -&gt; [(d, d)] -&gt; ByteString -&gt; Namespace c d)
-&gt; f [c]
-&gt; f ([d] -&gt; [d] -&gt; [(d, d)] -&gt; ByteString -&gt; Namespace c d)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; f c) -&gt; [a] -&gt; f [c]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679320109"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679320107"><span class="hs-identifier hs-var">tl</span></a></span><span>
</span><span id="line-388"></span><span>      </span><span class="annot"><span class="annottext">f ([d] -&gt; [d] -&gt; [(d, d)] -&gt; ByteString -&gt; Namespace c d)
-&gt; f [d] -&gt; f ([d] -&gt; [(d, d)] -&gt; ByteString -&gt; Namespace c d)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; [b] -&gt; f [d]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320108"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679320106"><span class="hs-identifier hs-var">dl</span></a></span><span>
</span><span id="line-389"></span><span>      </span><span class="annot"><span class="annottext">f ([d] -&gt; [(d, d)] -&gt; ByteString -&gt; Namespace c d)
-&gt; f [d] -&gt; f ([(d, d)] -&gt; ByteString -&gt; Namespace c d)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; [b] -&gt; f [d]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320108"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679320105"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-390"></span><span>      </span><span class="annot"><span class="annottext">f ([(d, d)] -&gt; ByteString -&gt; Namespace c d)
-&gt; f [(d, d)] -&gt; f (ByteString -&gt; Namespace c d)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">((b, b) -&gt; f (d, d)) -&gt; [(b, b)] -&gt; f [(d, d)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; f d) -&gt; (b -&gt; f d) -&gt; (b, b) -&gt; f (d, d)
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320108"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679320108"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679320104"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">f (ByteString -&gt; Namespace c d)
-&gt; f ByteString -&gt; f (Namespace c d)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; f ByteString
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320103"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span id="local-6989586621679320101"><span id="local-6989586621679320102"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320094"><span id="local-6989586621679320096"><span id="local-6989586621679320098"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320102"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320101"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320102"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320101"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-394"></span><span>  </span><span id="local-6989586621679320093"><span class="annot"><span class="annottext">toJSON :: Namespace text hash -&gt; Value
</span><a href="#local-6989586621679320093"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679320092"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320092"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679320091"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320091"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679320090"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320090"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679320089"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320089"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span id="local-6989586621679320088"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320088"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320092"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320091"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320090"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [(hash, hash)] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320089"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-400"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320088"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-401"></span><span>      </span><span class="hs-special">]</span></span></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span id="local-6989586621679320086"><span id="local-6989586621679320087"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320083"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320087"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320086"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320087"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320086"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>  </span><span id="local-6989586621679320082"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Namespace text hash)
</span><a href="#local-6989586621679320082"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Namespace text hash))
-&gt; Value
-&gt; Parser (Namespace text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Namespace&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320081"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320081"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621679320080"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320080"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320081"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621679320079"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320079"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320081"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621679320078"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320078"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320081"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621679320077"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320077"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320081"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [(hash, hash)]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-409"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679320076"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320076"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320081"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><span class="annottext">Namespace text hash -&gt; Parser (Namespace text hash)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Namespace :: forall text hash.
[text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; ByteString
-&gt; Namespace text hash
</span><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[hash]
[(hash, hash)]
ByteString
bytes :: ByteString
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
$sel:bytes:Namespace :: ByteString
$sel:textLookup:Namespace :: [text]
$sel:childLookup:Namespace :: [(hash, hash)]
$sel:patchLookup:Namespace :: [hash]
$sel:defnLookup:Namespace :: [hash]
</span><a href="#local-6989586621679320076"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-keyword">data</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span> </span><span id="local-6989586621679321154"><span class="annot"><a href="#local-6989586621679321154"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679321153"><span class="annot"><a href="#local-6989586621679321153"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3ANamespaceDiff"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679321153"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-414"></span><span>    </span><span id="%24sel%3AtextLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321154"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-415"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321153"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-416"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679321153"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-417"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321153"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679321153"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-418"></span><span>    </span><span id="%24sel%3Abytes%3ANamespaceDiff"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320070"><span id="local-6989586621679320072"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
(NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; Eq (NamespaceDiff text hash)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
/= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c/= :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
== :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c== :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320055"><span id="local-6989586621679320057"><span id="local-6989586621679320059"><span id="local-6989586621679320061"><span id="local-6989586621679320063"><span id="local-6989586621679320065"><span id="local-6989586621679320067"><span class="annot"><span class="annottext">Eq (NamespaceDiff text hash)
Eq (NamespaceDiff text hash)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool)
-&gt; (NamespaceDiff text hash
    -&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash)
-&gt; (NamespaceDiff text hash
    -&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash)
-&gt; Ord (NamespaceDiff text hash)
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall text hash.
(Ord hash, Ord text) =&gt;
Eq (NamespaceDiff text hash)
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
min :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmin :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
max :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmax :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
&gt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&gt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
compare :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
$cp1Ord :: forall text hash.
(Ord hash, Ord text) =&gt;
Eq (NamespaceDiff text hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679320049"><span id="local-6989586621679320051"><span id="local-6989586621679320053"><span class="annot"><span class="annottext">Int -&gt; NamespaceDiff text hash -&gt; ShowS
[NamespaceDiff text hash] -&gt; ShowS
NamespaceDiff text hash -&gt; String
(Int -&gt; NamespaceDiff text hash -&gt; ShowS)
-&gt; (NamespaceDiff text hash -&gt; String)
-&gt; ([NamespaceDiff text hash] -&gt; ShowS)
-&gt; Show (NamespaceDiff text hash)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
showList :: [NamespaceDiff text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
show :: NamespaceDiff text hash -&gt; String
$cshow :: forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
showsPrec :: Int -&gt; NamespaceDiff text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span id="local-6989586621679320047"><span id="local-6989586621679320048"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320040"><span id="local-6989586621679320042"><span id="local-6989586621679320044"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320048"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320047"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320048"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320047"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-423"></span><span>  </span><span id="local-6989586621679320039"><span class="annot"><span class="annottext">toJSON :: NamespaceDiff text hash -&gt; Value
</span><a href="#local-6989586621679320039"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span id="local-6989586621679320038"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320038"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679320037"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320037"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679320036"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320036"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679320035"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320035"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679320034"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320034"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span id="local-6989586621679320033"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320033"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-425"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320038"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-426"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [text] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320037"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320036"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-428"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [hash] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320035"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-429"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [(hash, hash)] -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320034"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-430"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Base64Bytes -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320033"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-431"></span><span>      </span><span class="hs-special">]</span></span></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span id="local-6989586621679320031"><span id="local-6989586621679320032"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679320028"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320032"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320031"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320032"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320031"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-434"></span><span>  </span><span id="local-6989586621679320027"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NamespaceDiff text hash)
</span><a href="#local-6989586621679320027"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (NamespaceDiff text hash))
-&gt; Value
-&gt; Parser (NamespaceDiff text hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NamespaceDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679320026"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-435"></span><span>    </span><span id="local-6989586621679320025"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320025"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser hash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-436"></span><span>    </span><span id="local-6989586621679320024"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679320024"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [text]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621679320023"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320023"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-438"></span><span>    </span><span id="local-6989586621679320022"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320022"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [hash]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-439"></span><span>    </span><span id="local-6989586621679320021"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320021"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser [(hash, hash)]
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-440"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679320020"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679320020"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679320026"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Base64Bytes
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-441"></span><span>    </span><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; Parser (NamespaceDiff text hash)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff :: forall text hash.
hash
-&gt; [text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; ByteString
-&gt; NamespaceDiff text hash
</span><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
[text]
[hash]
[(hash, hash)]
ByteString
bytes :: ByteString
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
parent :: hash
$sel:bytes:NamespaceDiff :: ByteString
$sel:textLookup:NamespaceDiff :: [text]
$sel:childLookup:NamespaceDiff :: [(hash, hash)]
$sel:patchLookup:NamespaceDiff :: [hash]
$sel:defnLookup:NamespaceDiff :: [hash]
$sel:parent:NamespaceDiff :: hash
</span><a href="#local-6989586621679320020"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span id="local-6989586621679321183"><span id="local-6989586621679321184"><span id="local-6989586621679321185"><span id="local-6989586621679321186"><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-type">namespaceDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679321186"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321185"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321186"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321184"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321183"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321185"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321186"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321183"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321184"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-444"></span><span id="namespaceDiffHashes_"><span class="annot"><span class="annottext">namespaceDiffHashes_ :: (hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var hs-var">namespaceDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679320019"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320019"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679320013"><span id="local-6989586621679320014"><span id="local-6989586621679320015"><span id="local-6989586621679320016"><span id="local-6989586621679320017"><span id="local-6989586621679320018"><span class="annot"><span class="annottext">hash
[hash]
[text]
[(hash, hash)]
ByteString
bytes :: ByteString
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
parent :: hash
$sel:bytes:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; ByteString
$sel:textLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [text]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="#local-6989586621679320013"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-445"></span><span>  </span><span id="local-6989586621679320012"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679320012"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320019"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679320018"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679320011"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679320011"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320019"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320016"><span class="hs-identifier hs-var">defnLookup</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span id="local-6989586621679320010"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679320010"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; [hash] -&gt; m [hash']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320019"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679320015"><span class="hs-identifier hs-var">patchLookup</span></a></span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621679320009"><span class="annot"><span class="annottext">[(hash', hash')]
</span><a href="#local-6989586621679320009"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LensLike m [(hash, hash)] [(hash', hash')] hash hash'
-&gt; LensLike m [(hash, hash)] [(hash', hash')] hash hash'
forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((hash, hash) -&gt; m (hash', hash'))
-&gt; [(hash, hash)] -&gt; m [(hash', hash')]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(((hash, hash) -&gt; m (hash', hash'))
 -&gt; [(hash, hash)] -&gt; m [(hash', hash')])
-&gt; ((hash -&gt; m hash') -&gt; (hash, hash) -&gt; m (hash', hash'))
-&gt; LensLike m [(hash, hash)] [(hash', hash')] hash hash'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; (hash, hash) -&gt; m (hash', hash')
forall (r :: * -&gt; * -&gt; *) a b.
Bitraversable r =&gt;
Traversal (r a a) (r b b) a b
</span><span class="hs-identifier hs-var">both</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679320019"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679320014"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamespaceDiff :: forall text hash.
hash
-&gt; [text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; ByteString
-&gt; NamespaceDiff text hash
</span><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[(hash', hash')]
ByteString
childLookup :: [(hash', hash')]
patchLookup :: [hash']
defnLookup :: [hash']
parent :: hash'
bytes :: ByteString
textLookup :: [text]
$sel:bytes:NamespaceDiff :: ByteString
$sel:textLookup:NamespaceDiff :: [text]
$sel:childLookup:NamespaceDiff :: [(hash', hash')]
$sel:patchLookup:NamespaceDiff :: [hash']
$sel:defnLookup:NamespaceDiff :: [hash']
$sel:parent:NamespaceDiff :: hash'
</span><a href="#local-6989586621679320009"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-comment">-- Client _may_ choose not to download the namespace entity in the future, but</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- we still send them the hash/hashjwt.</span><span>
</span><span id="line-453"></span><span class="hs-keyword">data</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span> </span><span id="local-6989586621679321151"><span class="annot"><a href="#local-6989586621679321151"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AnamespaceHash%3ACausal"><span class="annot"><span class="annottext">Causal hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679321151"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-455"></span><span>    </span><span id="%24sel%3Aparents%3ACausal"><span class="annot"><span class="annottext">Causal hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679321151"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679320005"><span id="local-6989586621679320007"><span class="annot"><span class="annottext">Causal hash -&gt; Causal hash -&gt; Bool
(Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool) -&gt; Eq (Causal hash)
forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Causal hash -&gt; Causal hash -&gt; Bool
$c/= :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
== :: Causal hash -&gt; Causal hash -&gt; Bool
$c== :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319990"><span id="local-6989586621679319992"><span id="local-6989586621679319994"><span id="local-6989586621679319996"><span id="local-6989586621679319998"><span id="local-6989586621679320000"><span id="local-6989586621679320002"><span class="annot"><span class="annottext">Eq (Causal hash)
Eq (Causal hash)
-&gt; (Causal hash -&gt; Causal hash -&gt; Ordering)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Bool)
-&gt; (Causal hash -&gt; Causal hash -&gt; Causal hash)
-&gt; (Causal hash -&gt; Causal hash -&gt; Causal hash)
-&gt; Ord (Causal hash)
Causal hash -&gt; Causal hash -&gt; Bool
Causal hash -&gt; Causal hash -&gt; Ordering
Causal hash -&gt; Causal hash -&gt; Causal hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall hash. Ord hash =&gt; Eq (Causal hash)
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
min :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmin :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
max :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmax :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
&gt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&gt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
compare :: Causal hash -&gt; Causal hash -&gt; Ordering
$ccompare :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
$cp1Ord :: forall hash. Ord hash =&gt; Eq (Causal hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319984"><span id="local-6989586621679319986"><span id="local-6989586621679319988"><span class="annot"><span class="annottext">Int -&gt; Causal hash -&gt; ShowS
[Causal hash] -&gt; ShowS
Causal hash -&gt; String
(Int -&gt; Causal hash -&gt; ShowS)
-&gt; (Causal hash -&gt; String)
-&gt; ([Causal hash] -&gt; ShowS)
-&gt; Show (Causal hash)
forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
forall hash. Show hash =&gt; Causal hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Causal hash] -&gt; ShowS
$cshowList :: forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
show :: Causal hash -&gt; String
$cshow :: forall hash. Show hash =&gt; Causal hash -&gt; String
showsPrec :: Int -&gt; Causal hash -&gt; ShowS
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span id="local-6989586621679321180"><span id="local-6989586621679321181"><span id="local-6989586621679321182"><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-type">causalHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679321182"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679321181"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679321180"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321181"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321180"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679321182"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679321181"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-460"></span><span id="causalHashes_"><span class="annot"><span class="annottext">causalHashes_ :: (hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var hs-var">causalHashes_</span></a></span></span><span> </span><span id="local-6989586621679319983"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679319983"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679319981"><span id="local-6989586621679319982"><span class="annot"><span class="annottext">hash
Set hash
parents :: Set hash
namespaceHash :: hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
</span><a href="#local-6989586621679319981"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621679319980"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679319980"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679319983"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679319982"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621679319979"><span class="annot"><span class="annottext">Set hash'
</span><a href="#local-6989586621679319979"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(hash -&gt; m hash') -&gt; Set hash -&gt; m (Set hash')
forall (f :: * -&gt; *) b a.
(Applicative f, Ord b) =&gt;
(a -&gt; f b) -&gt; Set a -&gt; f (Set b)
</span><span class="hs-identifier hs-var">Set.traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679319983"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679319981"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Causal :: forall hash. hash -&gt; Set hash -&gt; Causal hash
</span><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
Set hash'
parents :: Set hash'
namespaceHash :: hash'
$sel:parents:Causal :: Set hash'
$sel:namespaceHash:Causal :: hash'
</span><a href="#local-6989586621679319979"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span id="local-6989586621679319977"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319970"><span id="local-6989586621679319972"><span id="local-6989586621679319974"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679319977"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679319977"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-466"></span><span>  </span><span id="local-6989586621679319969"><span class="annot"><span class="annottext">toJSON :: Causal hash -&gt; Value
</span><a href="#local-6989586621679319969"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span id="local-6989586621679319968"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679319968"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span id="local-6989586621679319967"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679319967"><span class="hs-identifier hs-var">parents</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-467"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-468"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679319968"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parents&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Set hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679319967"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-470"></span><span>      </span><span class="hs-special">]</span></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span id="local-6989586621679319966"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319963"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679319966"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679319966"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679319966"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-473"></span><span>  </span><span id="local-6989586621679319962"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Causal hash)
</span><a href="#local-6989586621679319962"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (Causal hash))
-&gt; Value
-&gt; Parser (Causal hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Causal&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319961"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319961"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-474"></span><span>    </span><span id="local-6989586621679319960"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679319960"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319961"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser hash
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span>
</span><span id="line-475"></span><span>    </span><span id="local-6989586621679319959"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679319959"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319961"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Set hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parents&quot;</span></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">Causal :: forall hash. hash -&gt; Set hash -&gt; Causal hash
</span><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
Set hash
parents :: Set hash
namespaceHash :: hash
$sel:parents:Causal :: Set hash
$sel:namespaceHash:Causal :: hash
</span><a href="#local-6989586621679319959"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-keyword">data</span><span> </span><span id="EntityType"><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-var">EntityType</span></a></span></span><span>
</span><span id="line-479"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TermComponentType"><span class="annot"><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DeclComponentType"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span></span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchType"><span class="annot"><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span></span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchDiffType"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span></span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span></span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceDiffType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CausalType"><span class="annot"><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319955"><span id="local-6989586621679319957"><span class="annot"><span class="annottext">EntityType -&gt; EntityType -&gt; Bool
(EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool) -&gt; Eq EntityType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EntityType -&gt; EntityType -&gt; Bool
$c/= :: EntityType -&gt; EntityType -&gt; Bool
== :: EntityType -&gt; EntityType -&gt; Bool
$c== :: EntityType -&gt; EntityType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319940"><span id="local-6989586621679319942"><span id="local-6989586621679319944"><span id="local-6989586621679319946"><span id="local-6989586621679319948"><span id="local-6989586621679319950"><span id="local-6989586621679319952"><span class="annot"><span class="annottext">Eq EntityType
Eq EntityType
-&gt; (EntityType -&gt; EntityType -&gt; Ordering)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; Bool)
-&gt; (EntityType -&gt; EntityType -&gt; EntityType)
-&gt; (EntityType -&gt; EntityType -&gt; EntityType)
-&gt; Ord EntityType
EntityType -&gt; EntityType -&gt; Bool
EntityType -&gt; EntityType -&gt; Ordering
EntityType -&gt; EntityType -&gt; EntityType
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: EntityType -&gt; EntityType -&gt; EntityType
$cmin :: EntityType -&gt; EntityType -&gt; EntityType
max :: EntityType -&gt; EntityType -&gt; EntityType
$cmax :: EntityType -&gt; EntityType -&gt; EntityType
&gt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&gt;= :: EntityType -&gt; EntityType -&gt; Bool
&gt; :: EntityType -&gt; EntityType -&gt; Bool
$c&gt; :: EntityType -&gt; EntityType -&gt; Bool
&lt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&lt;= :: EntityType -&gt; EntityType -&gt; Bool
&lt; :: EntityType -&gt; EntityType -&gt; Bool
$c&lt; :: EntityType -&gt; EntityType -&gt; Bool
compare :: EntityType -&gt; EntityType -&gt; Ordering
$ccompare :: EntityType -&gt; EntityType -&gt; Ordering
$cp1Ord :: Eq EntityType
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319934"><span id="local-6989586621679319936"><span id="local-6989586621679319938"><span class="annot"><span class="annottext">Int -&gt; EntityType -&gt; ShowS
[EntityType] -&gt; ShowS
EntityType -&gt; String
(Int -&gt; EntityType -&gt; ShowS)
-&gt; (EntityType -&gt; String)
-&gt; ([EntityType] -&gt; ShowS)
-&gt; Show EntityType
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EntityType] -&gt; ShowS
$cshowList :: [EntityType] -&gt; ShowS
show :: EntityType -&gt; String
$cshow :: EntityType -&gt; String
showsPrec :: Int -&gt; EntityType -&gt; ShowS
$cshowsPrec :: Int -&gt; EntityType -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319927"><span id="local-6989586621679319929"><span id="local-6989586621679319931"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-489"></span><span>  </span><span id="local-6989586621679319926"><span class="annot"><span class="annottext">toJSON :: EntityType -&gt; Value
</span><a href="#local-6989586621679319926"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-490"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Value) -&gt; (EntityType -&gt; Text) -&gt; EntityType -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-491"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span>
</span><span id="line-492"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span>
</span><span id="line-493"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span>
</span><span id="line-494"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span>
</span><span id="line-495"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span>
</span><span id="line-497"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319923"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-500"></span><span>  </span><span id="local-6989586621679319922"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser EntityType
</span><a href="#local-6989586621679319922"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Text -&gt; Parser EntityType) -&gt; Value -&gt; Parser EntityType
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EntityType&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-501"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityType -&gt; Parser EntityType
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span>
</span><span id="line-508"></span><span>    </span><span id="local-6989586621679319921"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319921"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser EntityType
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser EntityType) -&gt; Text -&gt; Parser EntityType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected entity type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319921"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- Request/response types</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- Get causal hash by path</span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-keyword">newtype</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319912"><span id="local-6989586621679319914"><span id="local-6989586621679319916"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
[GetCausalHashByPathRequest] -&gt; ShowS
GetCausalHashByPathRequest -&gt; String
(Int -&gt; GetCausalHashByPathRequest -&gt; ShowS)
-&gt; (GetCausalHashByPathRequest -&gt; String)
-&gt; ([GetCausalHashByPathRequest] -&gt; ShowS)
-&gt; Show GetCausalHashByPathRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GetCausalHashByPathRequest] -&gt; ShowS
$cshowList :: [GetCausalHashByPathRequest] -&gt; ShowS
show :: GetCausalHashByPathRequest -&gt; String
$cshow :: GetCausalHashByPathRequest -&gt; String
showsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319908"><span id="local-6989586621679319910"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
(GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; Eq GetCausalHashByPathRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319893"><span id="local-6989586621679319895"><span id="local-6989586621679319897"><span id="local-6989586621679319899"><span id="local-6989586621679319901"><span id="local-6989586621679319903"><span id="local-6989586621679319905"><span class="annot"><span class="annottext">Eq GetCausalHashByPathRequest
Eq GetCausalHashByPathRequest
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Ordering)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; Bool)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest)
-&gt; (GetCausalHashByPathRequest
    -&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest)
-&gt; Ord GetCausalHashByPathRequest
GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmin :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
max :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmax :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
compare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
$ccompare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
$cp1Ord :: Eq GetCausalHashByPathRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319886"><span id="local-6989586621679319888"><span id="local-6989586621679319890"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-522"></span><span>  </span><span id="local-6989586621679319885"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathRequest -&gt; Value
</span><a href="#local-6989586621679319885"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span id="local-6989586621679319884"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319884"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-523"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319884"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-525"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319881"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-528"></span><span>  </span><span id="local-6989586621679319880"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathRequest
</span><a href="#local-6989586621679319880"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser GetCausalHashByPathRequest)
-&gt; Value
-&gt; Parser GetCausalHashByPathRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319879"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319879"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-529"></span><span>    </span><span id="local-6989586621679319878"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319878"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319879"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathRequest :: Path -&gt; GetCausalHashByPathRequest
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:GetCausalHashByPathRequest :: Path
</span><a href="#local-6989586621679319878"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="hs-keyword">data</span><span> </span><span id="GetCausalHashByPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-var">GetCausalHashByPathResponse</span></a></span></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span></span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319868"><span id="local-6989586621679319870"><span id="local-6989586621679319872"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
[GetCausalHashByPathResponse] -&gt; ShowS
GetCausalHashByPathResponse -&gt; String
(Int -&gt; GetCausalHashByPathResponse -&gt; ShowS)
-&gt; (GetCausalHashByPathResponse -&gt; String)
-&gt; ([GetCausalHashByPathResponse] -&gt; ShowS)
-&gt; Show GetCausalHashByPathResponse
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GetCausalHashByPathResponse] -&gt; ShowS
$cshowList :: [GetCausalHashByPathResponse] -&gt; ShowS
show :: GetCausalHashByPathResponse -&gt; String
$cshow :: GetCausalHashByPathResponse -&gt; String
showsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319864"><span id="local-6989586621679319866"><span class="annot"><span class="annottext">GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
(GetCausalHashByPathResponse
 -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; Eq GetCausalHashByPathResponse
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319849"><span id="local-6989586621679319851"><span id="local-6989586621679319853"><span id="local-6989586621679319855"><span id="local-6989586621679319857"><span id="local-6989586621679319859"><span id="local-6989586621679319861"><span class="annot"><span class="annottext">Eq GetCausalHashByPathResponse
Eq GetCausalHashByPathResponse
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Ordering)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; Bool)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse)
-&gt; (GetCausalHashByPathResponse
    -&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse)
-&gt; Ord GetCausalHashByPathResponse
GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmin :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
max :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmax :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
compare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
$ccompare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
$cp1Ord :: Eq GetCausalHashByPathResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319842"><span id="local-6989586621679319844"><span id="local-6989586621679319846"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-540"></span><span>  </span><span id="local-6989586621679319841"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathResponse -&gt; Value
</span><a href="#local-6989586621679319841"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-541"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-type">GetCausalHashByPathSuccess</span></a></span><span> </span><span id="local-6989586621679319840"><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679319840"><span class="hs-identifier hs-var">hashJWT</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe HashJWT -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679319840"><span class="hs-identifier hs-var">hashJWT</span></a></span><span>
</span><span id="line-542"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-type">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span id="local-6989586621679319838"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319838"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319838"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; () -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-type">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679319837"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319837"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679319836"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319836"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319837"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319836"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319833"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-547"></span><span>  </span><span id="local-6989586621679319832"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathResponse
</span><a href="#local-6989586621679319832"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser GetCausalHashByPathResponse)
-&gt; Value
-&gt; Parser GetCausalHashByPathResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319831"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319831"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-548"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319831"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser GetCausalHashByPathResponse)
-&gt; Parser GetCausalHashByPathResponse
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser GetCausalHashByPathResponse)
-&gt; Value
-&gt; Parser GetCausalHashByPathResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe HashJWT -&gt; GetCausalHashByPathResponse)
-&gt; Parser (Maybe HashJWT) -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319831"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe HashJWT)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-550"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Path -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; GetCausalHashByPathResponse)
-&gt; Parser Path -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319831"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-551"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span>
</span><span id="line-552"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; RepoInfo -&gt; GetCausalHashByPathResponse)
-&gt; (Text, RepoInfo) -&gt; GetCausalHashByPathResponse
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, RepoInfo) -&gt; GetCausalHashByPathResponse)
-&gt; Parser (Text, RepoInfo) -&gt; Parser GetCausalHashByPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319831"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-553"></span><span>      </span><span id="local-6989586621679319829"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319829"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser GetCausalHashByPathResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser GetCausalHashByPathResponse)
-&gt; Text -&gt; Parser GetCausalHashByPathResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected GetCausalHashByPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319829"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-556"></span><span class="hs-comment">-- Download entities</span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-560"></span><span>    </span><span id="%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; NESet HashJWT
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-561"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319820"><span id="local-6989586621679319822"><span id="local-6989586621679319824"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesRequest -&gt; ShowS
[DownloadEntitiesRequest] -&gt; ShowS
DownloadEntitiesRequest -&gt; String
(Int -&gt; DownloadEntitiesRequest -&gt; ShowS)
-&gt; (DownloadEntitiesRequest -&gt; String)
-&gt; ([DownloadEntitiesRequest] -&gt; ShowS)
-&gt; Show DownloadEntitiesRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DownloadEntitiesRequest] -&gt; ShowS
$cshowList :: [DownloadEntitiesRequest] -&gt; ShowS
show :: DownloadEntitiesRequest -&gt; String
$cshow :: DownloadEntitiesRequest -&gt; String
showsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319816"><span id="local-6989586621679319818"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
(DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; Eq DownloadEntitiesRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319801"><span id="local-6989586621679319803"><span id="local-6989586621679319805"><span id="local-6989586621679319807"><span id="local-6989586621679319809"><span id="local-6989586621679319811"><span id="local-6989586621679319813"><span class="annot"><span class="annottext">Eq DownloadEntitiesRequest
Eq DownloadEntitiesRequest
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool)
-&gt; (DownloadEntitiesRequest
    -&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest)
-&gt; (DownloadEntitiesRequest
    -&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest)
-&gt; Ord DownloadEntitiesRequest
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmin :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
max :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmax :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
compare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
$ccompare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
$cp1Ord :: Eq DownloadEntitiesRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319794"><span id="local-6989586621679319796"><span id="local-6989586621679319798"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-565"></span><span>  </span><span id="local-6989586621679319793"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesRequest -&gt; Value
</span><a href="#local-6989586621679319793"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679319792"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319792"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679319791"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679319791"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-567"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319792"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-568"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; NESet HashJWT -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679319791"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-569"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319788"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-572"></span><span>  </span><span id="local-6989586621679319787"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesRequest
</span><a href="#local-6989586621679319787"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser DownloadEntitiesRequest)
-&gt; Value
-&gt; Parser DownloadEntitiesRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319786"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319786"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-573"></span><span>    </span><span id="local-6989586621679319785"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319785"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-574"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319786"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser RepoInfo -&gt; Parser RepoInfo -&gt; Parser RepoInfo
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-575"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-576"></span><span>        </span><span id="local-6989586621679319783"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319783"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319786"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-577"></span><span>        </span><span class="annot"><span class="annottext">RepoInfo -&gt; Parser RepoInfo
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; Parser RepoInfo)
-&gt; (Text -&gt; RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319783"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-578"></span><span>    </span><span id="local-6989586621679319782"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679319782"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319786"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NESet HashJWT)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesRequest :: RepoInfo -&gt; NESet HashJWT -&gt; DownloadEntitiesRequest
</span><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet HashJWT
RepoInfo
hashes :: NESet HashJWT
repoInfo :: RepoInfo
$sel:hashes:DownloadEntitiesRequest :: NESet HashJWT
$sel:repoInfo:DownloadEntitiesRequest :: RepoInfo
</span><a href="#local-6989586621679319782"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-var">DownloadEntitiesResponse</span></a></span></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DownloadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-type">DownloadEntitiesError</span></a></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-var">DownloadEntitiesError</span></a></span></span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | msg, repoInfo</span><span>
</span><span id="line-588"></span><span>    </span><span id="DownloadEntitiesInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-589"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | userHandle</span><span>
</span><span id="line-590"></span><span>    </span><span id="DownloadEntitiesUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | project shorthand</span><span>
</span><span id="line-592"></span><span>    </span><span id="DownloadEntitiesProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-593"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319772"><span id="local-6989586621679319774"><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
(DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool)
-&gt; (DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool)
-&gt; Eq DownloadEntitiesError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319766"><span id="local-6989586621679319768"><span id="local-6989586621679319770"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesError -&gt; ShowS
[DownloadEntitiesError] -&gt; ShowS
DownloadEntitiesError -&gt; String
(Int -&gt; DownloadEntitiesError -&gt; ShowS)
-&gt; (DownloadEntitiesError -&gt; String)
-&gt; ([DownloadEntitiesError] -&gt; ShowS)
-&gt; Show DownloadEntitiesError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DownloadEntitiesError] -&gt; ShowS
$cshowList :: [DownloadEntitiesError] -&gt; ShowS
show :: DownloadEntitiesError -&gt; String
$cshow :: DownloadEntitiesError -&gt; String
showsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
$cshowsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319759"><span id="local-6989586621679319761"><span id="local-6989586621679319763"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-596"></span><span>  </span><span id="local-6989586621679319758"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesResponse -&gt; Value
</span><a href="#local-6989586621679319758"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-597"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-type">DownloadEntitiesSuccess</span></a></span><span> </span><span id="local-6989586621679319757"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679319757"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; NEMap Hash32 (Entity Text Hash32 HashJWT) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679319757"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-type">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span id="local-6989586621679319756"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319756"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319756"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-type">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679319755"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319755"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679319754"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319754"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319755"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319754"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-type">DownloadEntitiesUserNotFound</span></a></span><span> </span><span id="local-6989586621679319753"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319753"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319753"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-type">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span id="local-6989586621679319752"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319752"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319752"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319749"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>  </span><span id="local-6989586621679319748"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesResponse
</span><a href="#local-6989586621679319748"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser DownloadEntitiesResponse)
-&gt; Value
-&gt; Parser DownloadEntitiesResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319747"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-605"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser DownloadEntitiesResponse)
-&gt; Parser DownloadEntitiesResponse
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser DownloadEntitiesResponse)
-&gt; Value
-&gt; Parser DownloadEntitiesResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-606"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
-&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">(NEMap Hash32 (Entity Text Hash32 HashJWT)
 -&gt; DownloadEntitiesResponse)
-&gt; Parser (NEMap Hash32 (Entity Text Hash32 HashJWT))
-&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object
-&gt; Text -&gt; Parser (NEMap Hash32 (Entity Text Hash32 HashJWT))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-607"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; (RepoInfo -&gt; DownloadEntitiesError)
-&gt; RepoInfo
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; DownloadEntitiesResponse)
-&gt; Parser RepoInfo -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; ((Text, RepoInfo) -&gt; DownloadEntitiesError)
-&gt; (Text, RepoInfo)
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; RepoInfo -&gt; DownloadEntitiesError)
-&gt; (Text, RepoInfo) -&gt; DownloadEntitiesError
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, RepoInfo) -&gt; DownloadEntitiesResponse)
-&gt; Parser (Text, RepoInfo) -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; (Text -&gt; DownloadEntitiesError)
-&gt; Text
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; DownloadEntitiesResponse)
-&gt; Parser Text -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-610"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(DownloadEntitiesError -&gt; DownloadEntitiesResponse)
-&gt; (Text -&gt; DownloadEntitiesError)
-&gt; Text
-&gt; DownloadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; DownloadEntitiesResponse)
-&gt; Parser Text -&gt; Parser DownloadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319747"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-611"></span><span>      </span><span id="local-6989586621679319746"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319746"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser DownloadEntitiesResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser DownloadEntitiesResponse)
-&gt; Text -&gt; Parser DownloadEntitiesResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected DownloadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319746"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-614"></span><span class="hs-comment">-- Upload entities</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-618"></span><span>    </span><span id="%24sel%3Aentities%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="Unison.Sync.Types.html#%24sel%3Aentities%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319737"><span id="local-6989586621679319739"><span id="local-6989586621679319741"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesRequest -&gt; ShowS
[UploadEntitiesRequest] -&gt; ShowS
UploadEntitiesRequest -&gt; String
(Int -&gt; UploadEntitiesRequest -&gt; ShowS)
-&gt; (UploadEntitiesRequest -&gt; String)
-&gt; ([UploadEntitiesRequest] -&gt; ShowS)
-&gt; Show UploadEntitiesRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesRequest] -&gt; ShowS
$cshowList :: [UploadEntitiesRequest] -&gt; ShowS
show :: UploadEntitiesRequest -&gt; String
$cshow :: UploadEntitiesRequest -&gt; String
showsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319733"><span id="local-6989586621679319735"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
(UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; Eq UploadEntitiesRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319718"><span id="local-6989586621679319720"><span id="local-6989586621679319722"><span id="local-6989586621679319724"><span id="local-6989586621679319726"><span id="local-6989586621679319728"><span id="local-6989586621679319730"><span class="annot"><span class="annottext">Eq UploadEntitiesRequest
Eq UploadEntitiesRequest
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool)
-&gt; (UploadEntitiesRequest
    -&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest)
-&gt; (UploadEntitiesRequest
    -&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest)
-&gt; Ord UploadEntitiesRequest
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmin :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
max :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmax :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
compare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
$ccompare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
$cp1Ord :: Eq UploadEntitiesRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319711"><span id="local-6989586621679319713"><span id="local-6989586621679319715"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-623"></span><span>  </span><span id="local-6989586621679319710"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesRequest -&gt; Value
</span><a href="#local-6989586621679319710"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679319709"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319709"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679319708"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679319708"><span class="hs-identifier hs-var">entities</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-624"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-625"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319709"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-626"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;entities&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; NEMap Hash32 (Entity Text Hash32 Hash32) -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679319708"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-627"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-628"></span><span>
</span><span id="line-629"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319705"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-630"></span><span>  </span><span id="local-6989586621679319704"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesRequest
</span><a href="#local-6989586621679319704"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser UploadEntitiesRequest)
-&gt; Value
-&gt; Parser UploadEntitiesRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319703"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319703"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-631"></span><span>    </span><span id="local-6989586621679319702"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319702"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-632"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319703"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser RepoInfo -&gt; Parser RepoInfo -&gt; Parser RepoInfo
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-633"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-634"></span><span>        </span><span id="local-6989586621679319701"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319701"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319703"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-635"></span><span>        </span><span class="annot"><span class="annottext">RepoInfo -&gt; Parser RepoInfo
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; Parser RepoInfo)
-&gt; (Text -&gt; RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser RepoInfo) -&gt; Text -&gt; Parser RepoInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319701"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-636"></span><span>    </span><span id="local-6989586621679319700"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679319700"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319703"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NEMap Hash32 (Entity Text Hash32 Hash32))
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;entities&quot;</span></span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesRequest :: RepoInfo
-&gt; NEMap Hash32 (Entity Text Hash32 Hash32)
-&gt; UploadEntitiesRequest
</span><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
RepoInfo
entities :: NEMap Hash32 (Entity Text Hash32 Hash32)
repoInfo :: RepoInfo
$sel:entities:UploadEntitiesRequest :: NEMap Hash32 (Entity Text Hash32 Hash32)
$sel:repoInfo:UploadEntitiesRequest :: RepoInfo
</span><a href="#local-6989586621679319700"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-638"></span><span>
</span><span id="line-639"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-var">UploadEntitiesResponse</span></a></span></span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span></span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-type">UploadEntitiesError</span></a></span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319692"><span id="local-6989586621679319694"><span id="local-6989586621679319696"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesResponse -&gt; ShowS
[UploadEntitiesResponse] -&gt; ShowS
UploadEntitiesResponse -&gt; String
(Int -&gt; UploadEntitiesResponse -&gt; ShowS)
-&gt; (UploadEntitiesResponse -&gt; String)
-&gt; ([UploadEntitiesResponse] -&gt; ShowS)
-&gt; Show UploadEntitiesResponse
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesResponse] -&gt; ShowS
$cshowList :: [UploadEntitiesResponse] -&gt; ShowS
show :: UploadEntitiesResponse -&gt; String
$cshow :: UploadEntitiesResponse -&gt; String
showsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319688"><span id="local-6989586621679319690"><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
(UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; Eq UploadEntitiesResponse
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319673"><span id="local-6989586621679319675"><span id="local-6989586621679319677"><span id="local-6989586621679319679"><span id="local-6989586621679319681"><span id="local-6989586621679319683"><span id="local-6989586621679319685"><span class="annot"><span class="annottext">Eq UploadEntitiesResponse
Eq UploadEntitiesResponse
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool)
-&gt; (UploadEntitiesResponse
    -&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse)
-&gt; (UploadEntitiesResponse
    -&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse)
-&gt; Ord UploadEntitiesResponse
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmin :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
max :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmax :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
compare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
$ccompare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
$cp1Ord :: Eq UploadEntitiesResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-var">UploadEntitiesError</span></a></span></span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesError%27HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | msg, repoInfo</span><span>
</span><span id="line-647"></span><span>    </span><span id="UploadEntitiesError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | project shorthand</span><span>
</span><span id="line-651"></span><span>    </span><span id="UploadEntitiesError%27ProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | userHandle</span><span>
</span><span id="line-653"></span><span>    </span><span id="UploadEntitiesError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319661"><span id="local-6989586621679319663"><span id="local-6989586621679319665"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesError -&gt; ShowS
[UploadEntitiesError] -&gt; ShowS
UploadEntitiesError -&gt; String
(Int -&gt; UploadEntitiesError -&gt; ShowS)
-&gt; (UploadEntitiesError -&gt; String)
-&gt; ([UploadEntitiesError] -&gt; ShowS)
-&gt; Show UploadEntitiesError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesError] -&gt; ShowS
$cshowList :: [UploadEntitiesError] -&gt; ShowS
show :: UploadEntitiesError -&gt; String
$cshow :: UploadEntitiesError -&gt; String
showsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319657"><span id="local-6989586621679319659"><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
(UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; Eq UploadEntitiesError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319642"><span id="local-6989586621679319644"><span id="local-6989586621679319646"><span id="local-6989586621679319648"><span id="local-6989586621679319650"><span id="local-6989586621679319652"><span id="local-6989586621679319654"><span class="annot"><span class="annottext">Eq UploadEntitiesError
Eq UploadEntitiesError
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool)
-&gt; (UploadEntitiesError
    -&gt; UploadEntitiesError -&gt; UploadEntitiesError)
-&gt; (UploadEntitiesError
    -&gt; UploadEntitiesError -&gt; UploadEntitiesError)
-&gt; Ord UploadEntitiesError
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmin :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
max :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmax :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
compare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
$ccompare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
$cp1Ord :: Eq UploadEntitiesError
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Asupplied%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Asupplied%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">supplied</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-658"></span><span>    </span><span id="%24sel%3Acomputed%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Acomputed%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">computed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-659"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-660"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319633"><span id="local-6989586621679319635"><span id="local-6989586621679319637"><span class="annot"><span class="annottext">Int -&gt; HashMismatchForEntity -&gt; ShowS
[HashMismatchForEntity] -&gt; ShowS
HashMismatchForEntity -&gt; String
(Int -&gt; HashMismatchForEntity -&gt; ShowS)
-&gt; (HashMismatchForEntity -&gt; String)
-&gt; ([HashMismatchForEntity] -&gt; ShowS)
-&gt; Show HashMismatchForEntity
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashMismatchForEntity] -&gt; ShowS
$cshowList :: [HashMismatchForEntity] -&gt; ShowS
show :: HashMismatchForEntity -&gt; String
$cshow :: HashMismatchForEntity -&gt; String
showsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
$cshowsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319629"><span id="local-6989586621679319631"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
(HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; Eq HashMismatchForEntity
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319614"><span id="local-6989586621679319616"><span id="local-6989586621679319618"><span id="local-6989586621679319620"><span id="local-6989586621679319622"><span id="local-6989586621679319624"><span id="local-6989586621679319626"><span class="annot"><span class="annottext">Eq HashMismatchForEntity
Eq HashMismatchForEntity
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool)
-&gt; (HashMismatchForEntity
    -&gt; HashMismatchForEntity -&gt; HashMismatchForEntity)
-&gt; (HashMismatchForEntity
    -&gt; HashMismatchForEntity -&gt; HashMismatchForEntity)
-&gt; Ord HashMismatchForEntity
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmin :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
max :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmax :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
compare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
$ccompare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
$cp1Ord :: Eq HashMismatchForEntity
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319607"><span id="local-6989586621679319609"><span id="local-6989586621679319611"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-663"></span><span>  </span><span id="local-6989586621679319606"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesResponse -&gt; Value
</span><a href="#local-6989586621679319606"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-664"></span><span>    </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-type">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679319604"><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679319604"><span class="hs-identifier hs-var">mismatch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; HashMismatchForEntity -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679319604"><span class="hs-identifier hs-var">mismatch</span></a></span><span>
</span><span id="line-667"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679319603"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319603"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679319602"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319602"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-668"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319603"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319602"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-type">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span id="local-6989586621679319601"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679319601"><span class="hs-identifier hs-var">nd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; NeedDependencies Hash32 -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679319601"><span class="hs-identifier hs-var">nd</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-type">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679319600"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319600"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319600"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span id="local-6989586621679319599"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319599"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-672"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319599"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-673"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span id="local-6989586621679319598"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319598"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319598"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319595"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-676"></span><span>  </span><span id="local-6989586621679319594"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesResponse
</span><a href="#local-6989586621679319594"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser UploadEntitiesResponse)
-&gt; Value
-&gt; Parser UploadEntitiesResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319593"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-677"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser UploadEntitiesResponse)
-&gt; Parser UploadEntitiesResponse
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser UploadEntitiesResponse)
-&gt; Value
-&gt; Parser UploadEntitiesResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-678"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (NeedDependencies Hash32 -&gt; UploadEntitiesError)
-&gt; NeedDependencies Hash32
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">(NeedDependencies Hash32 -&gt; UploadEntitiesResponse)
-&gt; Parser (NeedDependencies Hash32)
-&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NeedDependencies Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-680"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (RepoInfo -&gt; UploadEntitiesError)
-&gt; RepoInfo
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">(RepoInfo -&gt; UploadEntitiesResponse)
-&gt; Parser RepoInfo -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser RepoInfo
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-681"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-682"></span><span>        </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (HashMismatchForEntity -&gt; UploadEntitiesError)
-&gt; HashMismatchForEntity
-&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMismatchForEntity -&gt; UploadEntitiesResponse)
-&gt; Parser HashMismatchForEntity -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser HashMismatchForEntity
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-683"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-684"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679319592"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319592"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319591"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319591"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-685"></span><span>        </span><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319592"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319591"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (Text -&gt; UploadEntitiesError) -&gt; Text -&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; UploadEntitiesResponse)
-&gt; Parser Text -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-687"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UploadEntitiesError -&gt; UploadEntitiesResponse)
-&gt; (Text -&gt; UploadEntitiesError) -&gt; Text -&gt; UploadEntitiesResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; UploadEntitiesResponse)
-&gt; Parser Text -&gt; Parser UploadEntitiesResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319593"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-688"></span><span>      </span><span id="local-6989586621679319590"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319590"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser UploadEntitiesResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser UploadEntitiesResponse)
-&gt; Text -&gt; Parser UploadEntitiesResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UploadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319590"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319583"><span id="local-6989586621679319585"><span id="local-6989586621679319587"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-691"></span><span>  </span><span id="local-6989586621679319582"><span class="annot"><span class="annottext">toJSON :: HashMismatchForEntity -&gt; Value
</span><a href="#local-6989586621679319582"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679319581"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319581"><span class="hs-identifier hs-var">supplied</span></a></span></span><span> </span><span id="local-6989586621679319580"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319580"><span class="hs-identifier hs-var">computed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-692"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-693"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;supplied&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319581"><span class="hs-identifier hs-var">supplied</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-694"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;computed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319580"><span class="hs-identifier hs-var">computed</span></a></span><span>
</span><span id="line-695"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319577"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-698"></span><span>  </span><span id="local-6989586621679319576"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatchForEntity
</span><a href="#local-6989586621679319576"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser HashMismatchForEntity)
-&gt; Value
-&gt; Parser HashMismatchForEntity
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatchForEntity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319575"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319575"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-700"></span><span>      </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; HashMismatchForEntity
</span><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span><span>
</span><span id="line-701"></span><span>        </span><span class="annot"><span class="annottext">(Hash32 -&gt; Hash32 -&gt; HashMismatchForEntity)
-&gt; Parser Hash32 -&gt; Parser (Hash32 -&gt; HashMismatchForEntity)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319575"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;supplied&quot;</span></span><span>
</span><span id="line-702"></span><span>        </span><span class="annot"><span class="annottext">Parser (Hash32 -&gt; HashMismatchForEntity)
-&gt; Parser Hash32 -&gt; Parser HashMismatchForEntity
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319575"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;computed&quot;</span></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-705"></span><span class="hs-comment">-- Fast-forward path</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="hs-comment">-- | A non-empty list of causal hashes, latest first, that show the lineage from wherever the client wants to</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- fast-forward to back to wherever the (client believes the) server is (including the server head, in a separate</span><span>
</span><span id="line-709"></span><span class="hs-comment">-- field).</span><span>
</span><span id="line-710"></span><span class="hs-comment">--</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- For example, if the client wants to update</span><span>
</span><span id="line-712"></span><span class="hs-comment">--</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-714"></span><span class="hs-comment">-- A -&gt; B -&gt; C</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-716"></span><span class="hs-comment">--</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- to</span><span>
</span><span id="line-718"></span><span class="hs-comment">--</span><span>
</span><span id="line-719"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- A -&gt; B -&gt; C -&gt; D -&gt; E -&gt; F</span><span>
</span><span id="line-721"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-722"></span><span class="hs-comment">--</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- then it would send hashes</span><span>
</span><span id="line-724"></span><span class="hs-comment">--</span><span>
</span><span id="line-725"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- expectedHash = C</span><span>
</span><span id="line-727"></span><span class="hs-comment">-- hashes = [D, E, F]</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-729"></span><span class="hs-comment">--</span><span>
</span><span id="line-730"></span><span class="hs-comment">-- Note that if the client wants to begin a history at a new path on the server, it would use the &quot;update path&quot; endpoint</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- instead.</span><span>
</span><span id="line-732"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-var">FastForwardPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-var">FastForwardPathRequest</span></a></span></span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The causal that the client believes exists at `path`</span><span>
</span><span id="line-734"></span><span>    </span><span id="%24sel%3AexpectedHash%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-735"></span><span>    </span><span class="hs-comment">-- | The sequence of causals to fast-forward with, starting from the oldest new causal to the newest new causal</span><span>
</span><span id="line-736"></span><span>    </span><span id="%24sel%3Ahashes%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; NonEmpty Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-737"></span><span>    </span><span class="hs-comment">-- | The path to fast-forward</span><span>
</span><span id="line-738"></span><span>    </span><span id="%24sel%3Apath%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-740"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319565"><span id="local-6989586621679319567"><span id="local-6989586621679319569"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathRequest -&gt; ShowS
[FastForwardPathRequest] -&gt; ShowS
FastForwardPathRequest -&gt; String
(Int -&gt; FastForwardPathRequest -&gt; ShowS)
-&gt; (FastForwardPathRequest -&gt; String)
-&gt; ([FastForwardPathRequest] -&gt; ShowS)
-&gt; Show FastForwardPathRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathRequest] -&gt; ShowS
$cshowList :: [FastForwardPathRequest] -&gt; ShowS
show :: FastForwardPathRequest -&gt; String
$cshow :: FastForwardPathRequest -&gt; String
showsPrec :: Int -&gt; FastForwardPathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319558"><span id="local-6989586621679319560"><span id="local-6989586621679319562"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-743"></span><span>  </span><span id="local-6989586621679319557"><span class="annot"><span class="annottext">toJSON :: FastForwardPathRequest -&gt; Value
</span><a href="#local-6989586621679319557"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679319556"><span class="annot"><span class="annottext">Hash32
expectedHash :: Hash32
$sel:expectedHash:FastForwardPathRequest :: FastForwardPathRequest -&gt; Hash32
</span><a href="#local-6989586621679319556"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319555"><span class="annot"><span class="annottext">NonEmpty Hash32
hashes :: NonEmpty Hash32
$sel:hashes:FastForwardPathRequest :: FastForwardPathRequest -&gt; NonEmpty Hash32
</span><a href="#local-6989586621679319555"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319554"><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:FastForwardPathRequest :: FastForwardPathRequest -&gt; Path
</span><a href="#local-6989586621679319554"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-744"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-745"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319556"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-746"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; NonEmpty Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Hash32
</span><a href="#local-6989586621679319555"><span class="hs-identifier hs-var">hashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-747"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319554"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-748"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319551"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-751"></span><span>  </span><span id="local-6989586621679319550"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser FastForwardPathRequest
</span><a href="#local-6989586621679319550"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-752"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser FastForwardPathRequest)
-&gt; Value
-&gt; Parser FastForwardPathRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FastForwardPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319549"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319549"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-753"></span><span>      </span><span id="local-6989586621679319548"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319548"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319549"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-754"></span><span>      </span><span id="local-6989586621679319547"><span class="annot"><span class="annottext">NonEmpty Hash32
</span><a href="#local-6989586621679319547"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319549"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NonEmpty Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-755"></span><span>      </span><span id="local-6989586621679319546"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319546"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319549"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-756"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">FastForwardPathRequest :: Hash32 -&gt; NonEmpty Hash32 -&gt; Path -&gt; FastForwardPathRequest
</span><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Hash32
expectedHash :: Hash32
$sel:expectedHash:FastForwardPathRequest :: Hash32
</span><a href="#local-6989586621679319548"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonEmpty Hash32
hashes :: NonEmpty Hash32
$sel:hashes:FastForwardPathRequest :: NonEmpty Hash32
</span><a href="#local-6989586621679319547"><span class="hs-identifier hs-var hs-var">hashes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:FastForwardPathRequest :: Path
</span><a href="#local-6989586621679319546"><span class="hs-identifier hs-var hs-var">path</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-var">FastForwardPathResponse</span></a></span></span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span></span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathFailure"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier hs-type">FastForwardPathError</span></a></span><span>
</span><span id="line-761"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319538"><span id="local-6989586621679319540"><span id="local-6989586621679319542"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathResponse -&gt; ShowS
[FastForwardPathResponse] -&gt; ShowS
FastForwardPathResponse -&gt; String
(Int -&gt; FastForwardPathResponse -&gt; ShowS)
-&gt; (FastForwardPathResponse -&gt; String)
-&gt; ([FastForwardPathResponse] -&gt; ShowS)
-&gt; Show FastForwardPathResponse
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathResponse] -&gt; ShowS
$cshowList :: [FastForwardPathResponse] -&gt; ShowS
show :: FastForwardPathResponse -&gt; String
$cshow :: FastForwardPathResponse -&gt; String
showsPrec :: Int -&gt; FastForwardPathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathError"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier hs-var">FastForwardPathError</span></a></span></span><span>
</span><span id="line-764"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathError%27MissingDependencies"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-var">FastForwardPathError'MissingDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-var">FastForwardPathError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This wasn't a fast-forward. Here's a JWT to download the causal head, if you want it.</span><span>
</span><span id="line-767"></span><span>    </span><span id="FastForwardPathError%27NotFastForward"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-var">FastForwardPathError'NotFastForward</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-768"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | There was no history at this path; the client should use the &quot;update path&quot; endpoint instead.</span><span>
</span><span id="line-769"></span><span>    </span><span id="FastForwardPathError%27NoHistory"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span></span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This wasn't a fast-forward. You said the first hash was a parent of the second hash, but I disagree.</span><span>
</span><span id="line-771"></span><span>    </span><span id="FastForwardPathError%27InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-var">FastForwardPathError'InvalidParentage</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span>
</span><span id="line-772"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">FastForwardPathError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span></span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319525"><span id="local-6989586621679319527"><span id="local-6989586621679319529"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathError -&gt; ShowS
[FastForwardPathError] -&gt; ShowS
FastForwardPathError -&gt; String
(Int -&gt; FastForwardPathError -&gt; ShowS)
-&gt; (FastForwardPathError -&gt; String)
-&gt; ([FastForwardPathError] -&gt; ShowS)
-&gt; Show FastForwardPathError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathError] -&gt; ShowS
$cshowList :: [FastForwardPathError] -&gt; ShowS
show :: FastForwardPathError -&gt; String
$cshow :: FastForwardPathError -&gt; String
showsPrec :: Int -&gt; FastForwardPathError -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span class="hs-keyword">data</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aparent%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Achild%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Achild%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">}</span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319516"><span id="local-6989586621679319518"><span id="local-6989586621679319520"><span class="annot"><span class="annottext">Int -&gt; InvalidParentage -&gt; ShowS
[InvalidParentage] -&gt; ShowS
InvalidParentage -&gt; String
(Int -&gt; InvalidParentage -&gt; ShowS)
-&gt; (InvalidParentage -&gt; String)
-&gt; ([InvalidParentage] -&gt; ShowS)
-&gt; Show InvalidParentage
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [InvalidParentage] -&gt; ShowS
$cshowList :: [InvalidParentage] -&gt; ShowS
show :: InvalidParentage -&gt; String
$cshow :: InvalidParentage -&gt; String
showsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
$cshowsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319509"><span id="local-6989586621679319511"><span id="local-6989586621679319513"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-type">FastForwardPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-780"></span><span>  </span><span id="local-6989586621679319508"><span class="annot"><span class="annottext">toJSON :: FastForwardPathResponse -&gt; Value
</span><a href="#local-6989586621679319508"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-781"></span><span>    </span><span class="annot"><span class="annottext">FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-type">FastForwardPathError'MissingDependencies</span></a></span><span> </span><span id="local-6989586621679319507"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679319507"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; NeedDependencies Hash32 -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679319507"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-type">FastForwardPathError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679319506"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319506"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319506"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-type">FastForwardPathError'NotFastForward</span></a></span><span> </span><span id="local-6989586621679319505"><span class="annot"><span class="annottext">HashJWT
</span><a href="#local-6989586621679319505"><span class="hs-identifier hs-var">hashJwt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; HashJWT -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not_fast_forward&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashJWT
</span><a href="#local-6989586621679319505"><span class="hs-identifier hs-var">hashJwt</span></a></span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_history&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-type">FastForwardPathError'InvalidParentage</span></a></span><span> </span><span id="local-6989586621679319504"><span class="annot"><span class="annottext">InvalidParentage
</span><a href="#local-6989586621679319504"><span class="hs-identifier hs-var">invalidParentage</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-787"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; InvalidParentage -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_parentage&quot;</span></span><span> </span><span class="annot"><span class="annottext">InvalidParentage
</span><a href="#local-6989586621679319504"><span class="hs-identifier hs-var">invalidParentage</span></a></span><span>
</span><span id="line-788"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-type">FastForwardPathError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679319503"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319503"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679319502"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319502"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-789"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319503"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319502"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-791"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319499"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-type">FastForwardPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-794"></span><span>  </span><span id="local-6989586621679319498"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser FastForwardPathResponse
</span><a href="#local-6989586621679319498"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-795"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser FastForwardPathResponse)
-&gt; Value
-&gt; Parser FastForwardPathResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FastForwardPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319497"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-796"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser FastForwardPathResponse)
-&gt; Parser FastForwardPathResponse
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser FastForwardPathResponse)
-&gt; Value
-&gt; Parser FastForwardPathResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-797"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathResponse -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span><span>
</span><span id="line-798"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(FastForwardPathError -&gt; FastForwardPathResponse)
-&gt; (NeedDependencies Hash32 -&gt; FastForwardPathError)
-&gt; NeedDependencies Hash32
-&gt; FastForwardPathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-var">FastForwardPathError'MissingDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">(NeedDependencies Hash32 -&gt; FastForwardPathResponse)
-&gt; Parser (NeedDependencies Hash32)
-&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NeedDependencies Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-799"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(FastForwardPathError -&gt; FastForwardPathResponse)
-&gt; (Path -&gt; FastForwardPathError)
-&gt; Path
-&gt; FastForwardPathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-var">FastForwardPathError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; FastForwardPathResponse)
-&gt; Parser Path -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-800"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not_fast_forward&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(FastForwardPathError -&gt; FastForwardPathResponse)
-&gt; (HashJWT -&gt; FastForwardPathError)
-&gt; HashJWT
-&gt; FastForwardPathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashJWT -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-var">FastForwardPathError'NotFastForward</span></a></span><span> </span><span class="annot"><span class="annottext">(HashJWT -&gt; FastForwardPathResponse)
-&gt; Parser HashJWT -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser HashJWT
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-801"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_history&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathResponse -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_parentage&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(FastForwardPathError -&gt; FastForwardPathResponse)
-&gt; (InvalidParentage -&gt; FastForwardPathError)
-&gt; InvalidParentage
-&gt; FastForwardPathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">InvalidParentage -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-var">FastForwardPathError'InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">(InvalidParentage -&gt; FastForwardPathResponse)
-&gt; Parser InvalidParentage -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser InvalidParentage
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-803"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-804"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679319496"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319496"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319495"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319495"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319497"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-805"></span><span>          </span><span class="annot"><span class="annottext">FastForwardPathResponse -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">FastForwardPathError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319496"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319495"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathResponse -&gt; Parser FastForwardPathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>        </span><span id="local-6989586621679319494"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319494"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser FastForwardPathResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser FastForwardPathResponse)
-&gt; Text -&gt; Parser FastForwardPathResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected FastForwardPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319494"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319487"><span id="local-6989586621679319489"><span id="local-6989586621679319491"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-810"></span><span>  </span><span id="local-6989586621679319486"><span class="annot"><span class="annottext">toJSON :: InvalidParentage -&gt; Value
</span><a href="#local-6989586621679319486"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span> </span><span id="local-6989586621679319485"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319485"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679319484"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319484"><span class="hs-identifier hs-var">child</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319485"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319484"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319481"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-813"></span><span>  </span><span id="local-6989586621679319480"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser InvalidParentage
</span><a href="#local-6989586621679319480"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-814"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser InvalidParentage)
-&gt; Value
-&gt; Parser InvalidParentage
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;InvalidParentage&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319479"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319479"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; InvalidParentage
</span><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">(Hash32 -&gt; Hash32 -&gt; InvalidParentage)
-&gt; Parser Hash32 -&gt; Parser (Hash32 -&gt; InvalidParentage)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319479"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (Hash32 -&gt; InvalidParentage)
-&gt; Parser Hash32 -&gt; Parser InvalidParentage
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319479"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;child&quot;</span></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- Update path</span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathRequest"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-var">UpdatePathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathRequest"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-var">UpdatePathRequest</span></a></span></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-821"></span><span>    </span><span id="%24sel%3AexpectedHash%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Nothing requires empty history at destination</span><span>
</span><span id="line-822"></span><span>    </span><span id="%24sel%3AnewHash%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHash%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">newHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-824"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319469"><span id="local-6989586621679319471"><span id="local-6989586621679319473"><span class="annot"><span class="annottext">Int -&gt; UpdatePathRequest -&gt; ShowS
[UpdatePathRequest] -&gt; ShowS
UpdatePathRequest -&gt; String
(Int -&gt; UpdatePathRequest -&gt; ShowS)
-&gt; (UpdatePathRequest -&gt; String)
-&gt; ([UpdatePathRequest] -&gt; ShowS)
-&gt; Show UpdatePathRequest
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathRequest] -&gt; ShowS
$cshowList :: [UpdatePathRequest] -&gt; ShowS
show :: UpdatePathRequest -&gt; String
$cshow :: UpdatePathRequest -&gt; String
showsPrec :: Int -&gt; UpdatePathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319465"><span id="local-6989586621679319467"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
(UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool)
-&gt; Eq UpdatePathRequest
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c/= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
== :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c== :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319450"><span id="local-6989586621679319452"><span id="local-6989586621679319454"><span id="local-6989586621679319456"><span id="local-6989586621679319458"><span id="local-6989586621679319460"><span id="local-6989586621679319462"><span class="annot"><span class="annottext">Eq UpdatePathRequest
Eq UpdatePathRequest
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest)
-&gt; (UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest)
-&gt; Ord UpdatePathRequest
UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
$cmin :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
max :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
$cmax :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
&gt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&gt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&gt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&gt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&lt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&lt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&lt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&lt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
compare :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
$ccompare :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
$cp1Ord :: Eq UpdatePathRequest
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>
</span><span id="line-826"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319443"><span id="local-6989586621679319445"><span id="local-6989586621679319447"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-827"></span><span>  </span><span id="local-6989586621679319442"><span class="annot"><span class="annottext">toJSON :: UpdatePathRequest -&gt; Value
</span><a href="#local-6989586621679319442"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span><span> </span><span id="local-6989586621679319441"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319441"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679319440"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319440"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span id="local-6989586621679319439"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319439"><span class="hs-identifier hs-var">newHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-828"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-829"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319441"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-830"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319440"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-831"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;new_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319439"><span class="hs-identifier hs-var">newHash</span></a></span><span>
</span><span id="line-832"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319436"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-835"></span><span>  </span><span id="local-6989586621679319435"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UpdatePathRequest
</span><a href="#local-6989586621679319435"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser UpdatePathRequest)
-&gt; Value
-&gt; Parser UpdatePathRequest
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdatePathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319434"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319434"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-836"></span><span>    </span><span id="local-6989586621679319433"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319433"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319434"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-837"></span><span>    </span><span id="local-6989586621679319432"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319432"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319434"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-838"></span><span>    </span><span id="local-6989586621679319431"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679319431"><span class="hs-identifier hs-var">newHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319434"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Hash32
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;new_hash&quot;</span></span><span>
</span><span id="line-839"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">UpdatePathRequest :: Path -&gt; Maybe Hash32 -&gt; Hash32 -&gt; UpdatePathRequest
</span><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe Hash32
Hash32
Path
newHash :: Hash32
expectedHash :: Maybe Hash32
path :: Path
$sel:newHash:UpdatePathRequest :: Hash32
$sel:expectedHash:UpdatePathRequest :: Maybe Hash32
$sel:path:UpdatePathRequest :: Path
</span><a href="#local-6989586621679319431"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathResponse"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-var">UpdatePathResponse</span></a></span></span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span></span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathFailure"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier hs-type">UpdatePathError</span></a></span><span>
</span><span id="line-844"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319423"><span id="local-6989586621679319425"><span id="local-6989586621679319427"><span class="annot"><span class="annottext">Int -&gt; UpdatePathResponse -&gt; ShowS
[UpdatePathResponse] -&gt; ShowS
UpdatePathResponse -&gt; String
(Int -&gt; UpdatePathResponse -&gt; ShowS)
-&gt; (UpdatePathResponse -&gt; String)
-&gt; ([UpdatePathResponse] -&gt; ShowS)
-&gt; Show UpdatePathResponse
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathResponse] -&gt; ShowS
$cshowList :: [UpdatePathResponse] -&gt; ShowS
show :: UpdatePathResponse -&gt; String
$cshow :: UpdatePathResponse -&gt; String
showsPrec :: Int -&gt; UpdatePathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319419"><span id="local-6989586621679319421"><span class="annot"><span class="annottext">UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
(UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool)
-&gt; Eq UpdatePathResponse
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c/= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
== :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c== :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319404"><span id="local-6989586621679319406"><span id="local-6989586621679319408"><span id="local-6989586621679319410"><span id="local-6989586621679319412"><span id="local-6989586621679319414"><span id="local-6989586621679319416"><span class="annot"><span class="annottext">Eq UpdatePathResponse
Eq UpdatePathResponse
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse)
-&gt; (UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse)
-&gt; Ord UpdatePathResponse
UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
$cmin :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
max :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
$cmax :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
&gt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&gt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&gt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&gt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&lt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&lt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&lt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&lt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
compare :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
$ccompare :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
$cp1Ord :: Eq UpdatePathResponse
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>
</span><span id="line-846"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathError"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier hs-var">UpdatePathError</span></a></span></span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathError%27HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-var">UpdatePathError'HashMismatch</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span>
</span><span id="line-848"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UpdatePathError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span> </span><span class="hs-comment">-- err msg, repo info</span><span>
</span><span id="line-849"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27MissingDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-var">UpdatePathError'MissingDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-var">UpdatePathError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span></span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319393"><span id="local-6989586621679319395"><span id="local-6989586621679319397"><span class="annot"><span class="annottext">Int -&gt; UpdatePathError -&gt; ShowS
[UpdatePathError] -&gt; ShowS
UpdatePathError -&gt; String
(Int -&gt; UpdatePathError -&gt; ShowS)
-&gt; (UpdatePathError -&gt; String)
-&gt; ([UpdatePathError] -&gt; ShowS)
-&gt; Show UpdatePathError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathError] -&gt; ShowS
$cshowList :: [UpdatePathError] -&gt; ShowS
show :: UpdatePathError -&gt; String
$cshow :: UpdatePathError -&gt; String
showsPrec :: Int -&gt; UpdatePathError -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319389"><span id="local-6989586621679319391"><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathError -&gt; Bool
(UpdatePathError -&gt; UpdatePathError -&gt; Bool)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; Bool)
-&gt; Eq UpdatePathError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c/= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
== :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c== :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319374"><span id="local-6989586621679319376"><span id="local-6989586621679319378"><span id="local-6989586621679319380"><span id="local-6989586621679319382"><span id="local-6989586621679319384"><span id="local-6989586621679319386"><span class="annot"><span class="annottext">Eq UpdatePathError
Eq UpdatePathError
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; Ordering)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; Bool)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; Bool)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; Bool)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; Bool)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError)
-&gt; (UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError)
-&gt; Ord UpdatePathError
UpdatePathError -&gt; UpdatePathError -&gt; Bool
UpdatePathError -&gt; UpdatePathError -&gt; Ordering
UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
$cmin :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
max :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
$cmax :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
&gt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&gt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&gt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&gt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&lt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&lt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&lt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&lt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
compare :: UpdatePathError -&gt; UpdatePathError -&gt; Ordering
$ccompare :: UpdatePathError -&gt; UpdatePathError -&gt; Ordering
$cp1Ord :: Eq UpdatePathError
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>
</span><span id="line-854"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319367"><span id="local-6989586621679319369"><span id="local-6989586621679319371"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-type">UpdatePathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-855"></span><span>  </span><span id="local-6989586621679319366"><span class="annot"><span class="annottext">toJSON :: UpdatePathResponse -&gt; Value
</span><a href="#local-6989586621679319366"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-856"></span><span>    </span><span class="annot"><span class="annottext">UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-type">UpdatePathError'HashMismatch</span></a></span><span> </span><span id="local-6989586621679319365"><span class="annot"><span class="annottext">HashMismatch
</span><a href="#local-6989586621679319365"><span class="hs-identifier hs-var">hm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; HashMismatch -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatch
</span><a href="#local-6989586621679319365"><span class="hs-identifier hs-var">hm</span></a></span><span>
</span><span id="line-858"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-type">UpdatePathError'MissingDependencies</span></a></span><span> </span><span id="local-6989586621679319364"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679319364"><span class="hs-identifier hs-var">md</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; NeedDependencies Hash32 -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679319364"><span class="hs-identifier hs-var">md</span></a></span><span>
</span><span id="line-859"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-type">UpdatePathError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679319363"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319363"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319363"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-860"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UpdatePathError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679319362"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319362"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span id="local-6989586621679319361"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319361"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, RepoInfo) -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319362"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319361"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Value
forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>
</span><span id="line-863"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319358"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-type">UpdatePathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-864"></span><span>  </span><span id="local-6989586621679319357"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UpdatePathResponse
</span><a href="#local-6989586621679319357"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621679319356"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679319356"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-865"></span><span>    </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679319356"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Value
-&gt; (Value -&gt; Parser UpdatePathResponse)
-&gt; Parser UpdatePathResponse
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser UpdatePathResponse)
-&gt; Value
-&gt; Parser UpdatePathResponse
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdatePathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319354"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319354"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-866"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319354"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Value
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Value
-&gt; (Value -&gt; Parser UpdatePathResponse)
-&gt; Parser UpdatePathResponse
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Text -&gt; Parser UpdatePathResponse)
-&gt; Value
-&gt; Parser UpdatePathResponse
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-867"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathResponse -&gt; Parser UpdatePathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span><span>
</span><span id="line-868"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UpdatePathError -&gt; UpdatePathResponse)
-&gt; (HashMismatch -&gt; UpdatePathError)
-&gt; HashMismatch
-&gt; UpdatePathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatch -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-var">UpdatePathError'HashMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMismatch -&gt; UpdatePathResponse)
-&gt; Parser HashMismatch -&gt; Parser UpdatePathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319354"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser HashMismatch
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-869"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UpdatePathError -&gt; UpdatePathResponse)
-&gt; (NeedDependencies Hash32 -&gt; UpdatePathError)
-&gt; NeedDependencies Hash32
-&gt; UpdatePathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-var">UpdatePathError'MissingDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">(NeedDependencies Hash32 -&gt; UpdatePathResponse)
-&gt; Parser (NeedDependencies Hash32) -&gt; Parser UpdatePathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319354"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NeedDependencies Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-870"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(UpdatePathError -&gt; UpdatePathResponse)
-&gt; (Path -&gt; UpdatePathError) -&gt; Path -&gt; UpdatePathResponse
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-var">UpdatePathError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; UpdatePathResponse)
-&gt; Parser Path -&gt; Parser UpdatePathResponse
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319354"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-871"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-872"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679319353"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319353"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319352"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319352"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319354"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Text, RepoInfo)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-873"></span><span>          </span><span class="annot"><span class="annottext">UpdatePathResponse -&gt; Parser UpdatePathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UpdatePathError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319353"><span class="hs-identifier hs-var">errMsg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679319352"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathResponse -&gt; Parser UpdatePathResponse
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>        </span><span id="local-6989586621679319351"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319351"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser UpdatePathResponse
forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Parser UpdatePathResponse)
-&gt; Text -&gt; Parser UpdatePathResponse
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UpdatePathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319351"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-876"></span><span>
</span><span id="line-877"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-var">HashMismatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-var">HashMismatch</span></a></span></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AHashMismatch"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-879"></span><span>    </span><span id="%24sel%3AexpectedHash%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AHashMismatch"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-880"></span><span>    </span><span id="%24sel%3AactualHash%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AactualHash%3AHashMismatch"><span class="hs-identifier hs-var hs-var">actualHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-881"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319341"><span id="local-6989586621679319343"><span id="local-6989586621679319345"><span class="annot"><span class="annottext">Int -&gt; HashMismatch -&gt; ShowS
[HashMismatch] -&gt; ShowS
HashMismatch -&gt; String
(Int -&gt; HashMismatch -&gt; ShowS)
-&gt; (HashMismatch -&gt; String)
-&gt; ([HashMismatch] -&gt; ShowS)
-&gt; Show HashMismatch
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashMismatch] -&gt; ShowS
$cshowList :: [HashMismatch] -&gt; ShowS
show :: HashMismatch -&gt; String
$cshow :: HashMismatch -&gt; String
showsPrec :: Int -&gt; HashMismatch -&gt; ShowS
$cshowsPrec :: Int -&gt; HashMismatch -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319337"><span id="local-6989586621679319339"><span class="annot"><span class="annottext">HashMismatch -&gt; HashMismatch -&gt; Bool
(HashMismatch -&gt; HashMismatch -&gt; Bool)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; Bool) -&gt; Eq HashMismatch
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c/= :: HashMismatch -&gt; HashMismatch -&gt; Bool
== :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c== :: HashMismatch -&gt; HashMismatch -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319322"><span id="local-6989586621679319324"><span id="local-6989586621679319326"><span id="local-6989586621679319328"><span id="local-6989586621679319330"><span id="local-6989586621679319332"><span id="local-6989586621679319334"><span class="annot"><span class="annottext">Eq HashMismatch
Eq HashMismatch
-&gt; (HashMismatch -&gt; HashMismatch -&gt; Ordering)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; Bool)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; Bool)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; Bool)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; Bool)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; HashMismatch)
-&gt; (HashMismatch -&gt; HashMismatch -&gt; HashMismatch)
-&gt; Ord HashMismatch
HashMismatch -&gt; HashMismatch -&gt; Bool
HashMismatch -&gt; HashMismatch -&gt; Ordering
HashMismatch -&gt; HashMismatch -&gt; HashMismatch
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
$cmin :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
max :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
$cmax :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
&gt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&gt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
&gt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&gt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
&lt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&lt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
&lt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&lt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
compare :: HashMismatch -&gt; HashMismatch -&gt; Ordering
$ccompare :: HashMismatch -&gt; HashMismatch -&gt; Ordering
$cp1Ord :: Eq HashMismatch
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319315"><span id="local-6989586621679319317"><span id="local-6989586621679319319"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-885"></span><span>  </span><span id="local-6989586621679319314"><span class="annot"><span class="annottext">toJSON :: HashMismatch -&gt; Value
</span><a href="#local-6989586621679319314"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span> </span><span id="local-6989586621679319313"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319313"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679319312"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319312"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span id="local-6989586621679319311"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319311"><span class="hs-identifier hs-var">actualHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-886"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-887"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Path -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319313"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-888"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319312"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-889"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;actual_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Hash32 -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319311"><span class="hs-identifier hs-var">actualHash</span></a></span><span>
</span><span id="line-890"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319308"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-893"></span><span>  </span><span id="local-6989586621679319307"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatch
</span><a href="#local-6989586621679319307"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser HashMismatch) -&gt; Value -&gt; Parser HashMismatch
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319306"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319306"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-894"></span><span>    </span><span id="local-6989586621679319305"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679319305"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319306"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Path
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-895"></span><span>    </span><span id="local-6989586621679319304"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319304"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319306"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-896"></span><span>    </span><span id="local-6989586621679319303"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679319303"><span class="hs-identifier hs-var">actualHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319306"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Hash32)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;actual_hash&quot;</span></span><span>
</span><span id="line-897"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">HashMismatch :: Path -&gt; Maybe Hash32 -&gt; Maybe Hash32 -&gt; HashMismatch
</span><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe Hash32
Path
actualHash :: Maybe Hash32
expectedHash :: Maybe Hash32
path :: Path
$sel:actualHash:HashMismatch :: Maybe Hash32
$sel:expectedHash:HashMismatch :: Maybe Hash32
$sel:path:HashMismatch :: Path
</span><a href="#local-6989586621679319303"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-900"></span><span class="hs-comment">-- Common/shared error types</span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-keyword">data</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span> </span><span id="local-6989586621679320779"><span class="annot"><a href="#local-6989586621679320779"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AmissingDependencies%3ANeedDependencies"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NESet hash
</span><a href="Unison.Sync.Types.html#%24sel%3AmissingDependencies%3ANeedDependencies"><span class="hs-identifier hs-var hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><a href="#local-6989586621679320779"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-904"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-905"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679319295"><span id="local-6989586621679319297"><span id="local-6989586621679319299"><span class="annot"><span class="annottext">Int -&gt; NeedDependencies hash -&gt; ShowS
[NeedDependencies hash] -&gt; ShowS
NeedDependencies hash -&gt; String
(Int -&gt; NeedDependencies hash -&gt; ShowS)
-&gt; (NeedDependencies hash -&gt; String)
-&gt; ([NeedDependencies hash] -&gt; ShowS)
-&gt; Show (NeedDependencies hash)
forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [NeedDependencies hash] -&gt; ShowS
$cshowList :: forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
show :: NeedDependencies hash -&gt; String
$cshow :: forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
showsPrec :: Int -&gt; NeedDependencies hash -&gt; ShowS
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319291"><span id="local-6989586621679319293"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
(NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; Eq (NeedDependencies hash)
forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c/= :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
== :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c== :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679319276"><span id="local-6989586621679319278"><span id="local-6989586621679319280"><span id="local-6989586621679319282"><span id="local-6989586621679319284"><span id="local-6989586621679319286"><span id="local-6989586621679319288"><span class="annot"><span class="annottext">Eq (NeedDependencies hash)
Eq (NeedDependencies hash)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool)
-&gt; (NeedDependencies hash
    -&gt; NeedDependencies hash -&gt; NeedDependencies hash)
-&gt; (NeedDependencies hash
    -&gt; NeedDependencies hash -&gt; NeedDependencies hash)
-&gt; Ord (NeedDependencies hash)
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall hash. Ord hash =&gt; Eq (NeedDependencies hash)
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
min :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmin :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
max :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmax :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
&gt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&gt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
compare :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
$ccompare :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
$cp1Ord :: forall hash. Ord hash =&gt; Eq (NeedDependencies hash)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span id="local-6989586621679319275"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319268"><span id="local-6989586621679319270"><span id="local-6989586621679319272"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679319275"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679319275"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-908"></span><span>  </span><span id="local-6989586621679319267"><span class="annot"><span class="annottext">toJSON :: NeedDependencies hash -&gt; Value
</span><a href="#local-6989586621679319267"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span id="local-6989586621679319266"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679319266"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-909"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; NESet hash -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679319266"><span class="hs-identifier hs-var">missingDependencies</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span id="local-6989586621679319265"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679319262"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679319265"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679319265"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679319265"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-912"></span><span>  </span><span id="local-6989586621679319261"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NeedDependencies hash)
</span><a href="#local-6989586621679319261"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (Object -&gt; Parser (NeedDependencies hash))
-&gt; Value
-&gt; Parser (NeedDependencies hash)
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NeedDependencies&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679319260"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319260"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-913"></span><span>    </span><span id="local-6989586621679319259"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679319259"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679319260"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (NESet hash)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span>
</span><span id="line-914"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">NeedDependencies :: forall hash. NESet hash -&gt; NeedDependencies hash
</span><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet hash
missingDependencies :: NESet hash
$sel:missingDependencies:NeedDependencies :: NESet hash
</span><a href="#local-6989586621679319259"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span></span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-917"></span><span class="hs-comment">-- Misc. helpers</span><span>
</span><span id="line-918"></span><span>
</span><span id="line-919"></span><span id="local-6989586621679320814"><span id="local-6989586621679320815"><span class="annot"><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-type">failText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679320815"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679320815"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679320814"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-920"></span><span id="failText"><span class="annot"><span class="annottext">failText :: Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var hs-var">failText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; m a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m a) -&gt; (Text -&gt; String) -&gt; Text -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span id="local-6989586621679320810"><span class="annot"><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-type">jsonUnion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679320810"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679320810"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span><span>
</span><span id="line-923"></span><span id="jsonUnion"><span class="annot"><span class="annottext">jsonUnion :: Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var hs-var">jsonUnion</span></a></span></span><span> </span><span id="local-6989586621679319257"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319257"><span class="hs-identifier hs-var">typeName</span></a></span></span><span> </span><span id="local-6989586621679319256"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679319256"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-924"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-925"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679319257"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-926"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; a -&gt; Pair
forall kv v. (KeyValue kv, ToJSON v) =&gt; Text -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679319256"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-927"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-928"></span></pre></body></html>