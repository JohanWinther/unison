<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- Name shadowing is really helpful for writing some custom traversals</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-name-shadowing #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.Sync.Types</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Misc. types</span></span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier">Base64Bytes</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier">pathRepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier">pathCodebasePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Entity types</span></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier">Entity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier">TermComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier">DeclComponent</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier">Patch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier">PatchDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier">Namespace</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier">NamespaceDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier">Causal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier">LocalIds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier">entityDependencies</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier">EntityType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Entity Traversals</span></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier">entityHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier">patchHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier">patchDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier">namespaceDiffHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier">causalHashes_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Request/response types</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Get causal hash by path</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier">GetCausalHashByPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Download entities</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier">DownloadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier">DownloadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Upload entities</span></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier">UploadEntitiesResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier">UploadEntitiesError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Fast-forward path</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier">FastForwardPathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier">FastForwardPathError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Update path</span></span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier">UpdatePathRequest</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier">UpdatePathResponse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier">UpdatePathError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier">HashMismatch</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Common/shared error types</span></span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier">HashMismatchForEntity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier">InvalidParentage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier">NeedDependencies</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">both</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traverseOf</span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifoldable</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteArray.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Base64</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertFromBase</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">convertToBase</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NEMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NESet</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Hash32.Orphans.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Share.API.Hash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-88"></span><span class="hs-comment">-- Misc. types</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">-- | A newtype for JSON encoding binary data.</span><span>
</span><span id="line-91"></span><span class="hs-keyword">newtype</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Base64Bytes"><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386501"><span id="local-6989586621679386503"><span id="local-6989586621679386505"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-94"></span><span>  </span><span id="local-6989586621679386495"><span class="annot"><span class="annottext">toJSON :: Base64Bytes -&gt; Value
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679386493"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679386493"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">Text.decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; bout
</span><span class="hs-identifier hs-var">convertToBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679386493"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386487"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621679386479"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Base64Bytes
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Base64&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679386476"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679386476"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="annottext">forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall bin bout.
(ByteArrayAccess bin, ByteArray bout) =&gt;
Base -&gt; bin -&gt; Either String bout
</span><span class="hs-identifier hs-var">convertFromBase</span></span><span> </span><span class="annot"><span class="annottext">Base
</span><span class="hs-identifier hs-var">Base64</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">Text.encodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679386476"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">newtype</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunRepoInfo%3ARepoInfo"><span class="annot"><span class="annottext">RepoInfo -&gt; Text
</span><a href="Unison.Sync.Types.html#%24sel%3AunRepoInfo%3ARepoInfo"><span class="hs-identifier hs-var hs-var">unRepoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679386461"><span id="local-6989586621679386465"><span id="local-6989586621679386470"><span class="annot"><span class="annottext">Int -&gt; RepoInfo -&gt; ShowS
[RepoInfo] -&gt; ShowS
RepoInfo -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RepoInfo] -&gt; ShowS
$cshowList :: [RepoInfo] -&gt; ShowS
show :: RepoInfo -&gt; String
$cshow :: RepoInfo -&gt; String
showsPrec :: Int -&gt; RepoInfo -&gt; ShowS
$cshowsPrec :: Int -&gt; RepoInfo -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386450"><span id="local-6989586621679386455"><span class="annot"><span class="annottext">RepoInfo -&gt; RepoInfo -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c/= :: RepoInfo -&gt; RepoInfo -&gt; Bool
== :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c== :: RepoInfo -&gt; RepoInfo -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386417"><span id="local-6989586621679386421"><span id="local-6989586621679386425"><span id="local-6989586621679386429"><span id="local-6989586621679386433"><span id="local-6989586621679386437"><span id="local-6989586621679386442"><span class="annot"><span class="annottext">Eq RepoInfo
RepoInfo -&gt; RepoInfo -&gt; Bool
RepoInfo -&gt; RepoInfo -&gt; Ordering
RepoInfo -&gt; RepoInfo -&gt; RepoInfo
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmin :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
max :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
$cmax :: RepoInfo -&gt; RepoInfo -&gt; RepoInfo
&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&gt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt;= :: RepoInfo -&gt; RepoInfo -&gt; Bool
&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
$c&lt; :: RepoInfo -&gt; RepoInfo -&gt; Bool
compare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
$ccompare :: RepoInfo -&gt; RepoInfo -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386398"><span id="local-6989586621679386402"><span id="local-6989586621679386406"><span id="local-6989586621679386411"><span class="annot"><span class="annottext">[RepoInfo] -&gt; Encoding
[RepoInfo] -&gt; Value
RepoInfo -&gt; Encoding
RepoInfo -&gt; Value
forall a.
(a -&gt; Value)
-&gt; (a -&gt; Encoding)
-&gt; ([a] -&gt; Value)
-&gt; ([a] -&gt; Encoding)
-&gt; ToJSON a
toEncodingList :: [RepoInfo] -&gt; Encoding
$ctoEncodingList :: [RepoInfo] -&gt; Encoding
toJSONList :: [RepoInfo] -&gt; Value
$ctoJSONList :: [RepoInfo] -&gt; Value
toEncoding :: RepoInfo -&gt; Encoding
$ctoEncoding :: RepoInfo -&gt; Encoding
toJSON :: RepoInfo -&gt; Value
$ctoJSON :: RepoInfo -&gt; Value
</span><a href="#local-6989586621679386398"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ToJSON</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386388"><span id="local-6989586621679386393"><span class="annot"><span class="annottext">Value -&gt; Parser [RepoInfo]
Value -&gt; Parser RepoInfo
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [RepoInfo]
$cparseJSONList :: Value -&gt; Parser [RepoInfo]
parseJSON :: Value -&gt; Parser RepoInfo
$cparseJSON :: Value -&gt; Parser RepoInfo
</span><a href="#local-6989586621679386388"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">data</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Path"><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-var">Path</span></a></span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- This is a nonempty list, where we require the first segment to be the repo name / user name / whatever,</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-comment">-- which we need on the server side as an implementation detail of how we're representing different users' codebases.</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-comment">-- This could be relaxed in some other share implementation that allows access to the &quot;root&quot; of the shared codebase.</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-comment">-- Our share implementation doesn't have a root, just a collection of sub-roots, one per user or (eventually) organization.</span><span>
</span><span id="line-109"></span><span>    </span><span id="%24sel%3ApathSegments%3APath"><span class="annot"><span class="annottext">Path -&gt; NonEmpty Text
</span><a href="Unison.Sync.Types.html#%24sel%3ApathSegments%3APath"><span class="hs-identifier hs-var hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679386372"><span id="local-6989586621679386374"><span id="local-6989586621679386381"><span class="annot"><span class="annottext">Int -&gt; Path -&gt; ShowS
[Path] -&gt; ShowS
Path -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Path] -&gt; ShowS
$cshowList :: [Path] -&gt; ShowS
show :: Path -&gt; String
$cshow :: Path -&gt; String
showsPrec :: Int -&gt; Path -&gt; ShowS
$cshowsPrec :: Int -&gt; Path -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386365"><span id="local-6989586621679386370"><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Path -&gt; Path -&gt; Bool
$c/= :: Path -&gt; Path -&gt; Bool
== :: Path -&gt; Path -&gt; Bool
$c== :: Path -&gt; Path -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386341"><span id="local-6989586621679386343"><span id="local-6989586621679386346"><span id="local-6989586621679386349"><span id="local-6989586621679386352"><span id="local-6989586621679386356"><span id="local-6989586621679386361"><span class="annot"><span class="annottext">Eq Path
Path -&gt; Path -&gt; Bool
Path -&gt; Path -&gt; Ordering
Path -&gt; Path -&gt; Path
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Path -&gt; Path -&gt; Path
$cmin :: Path -&gt; Path -&gt; Path
max :: Path -&gt; Path -&gt; Path
$cmax :: Path -&gt; Path -&gt; Path
&gt;= :: Path -&gt; Path -&gt; Bool
$c&gt;= :: Path -&gt; Path -&gt; Bool
&gt; :: Path -&gt; Path -&gt; Bool
$c&gt; :: Path -&gt; Path -&gt; Bool
&lt;= :: Path -&gt; Path -&gt; Bool
$c&lt;= :: Path -&gt; Path -&gt; Bool
&lt; :: Path -&gt; Path -&gt; Bool
$c&lt; :: Path -&gt; Path -&gt; Bool
compare :: Path -&gt; Path -&gt; Ordering
$ccompare :: Path -&gt; Path -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-- | Convert a path like arya.public.mystuff to a &quot;repo info&quot; by treating the first segment as a user handle.</span><span>
</span><span id="line-114"></span><span class="annot"><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-type">pathRepoInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-115"></span><span id="pathRepoInfo"><span class="annot"><span class="annottext">pathRepoInfo :: Path -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#pathRepoInfo"><span class="hs-identifier hs-var hs-var">pathRepoInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679386340"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679386340"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679386340"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-type">pathCodebasePath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-118"></span><span id="pathCodebasePath"><span class="annot"><span class="annottext">pathCodebasePath :: Path -&gt; [Text]
</span><a href="Unison.Sync.Types.html#pathCodebasePath"><span class="hs-identifier hs-var hs-var">pathCodebasePath</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679386338"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679386338"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679386338"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386331"><span id="local-6989586621679386333"><span id="local-6989586621679386335"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621679386323"><span class="annot"><span class="annottext">toJSON :: Path -&gt; Value
</span><a href="#local-6989586621679386323"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span id="local-6989586621679386322"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679386322"><span class="hs-identifier hs-var">segments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-123"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679386322"><span class="hs-identifier hs-var">segments</span></a></span><span>
</span><span id="line-124"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386317"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-127"></span><span>  </span><span id="local-6989586621679386310"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Path
</span><a href="#local-6989586621679386310"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Path&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679386308"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386308"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>    </span><span id="local-6989586621679386307"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679386307"><span class="hs-identifier hs-var">pathSegments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386308"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NonEmpty Text
pathSegments :: NonEmpty Text
$sel:pathSegments:Path :: NonEmpty Text
</span><a href="#local-6989586621679386307"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- Entity types</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-keyword">data</span><span> </span><span id="Entity"><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-var">Entity</span></a></span></span><span> </span><span id="local-6989586621679387417"><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387416"><span class="annot"><a href="#local-6989586621679387416"><span class="hs-identifier hs-type">noSyncHash</span></a></span></span><span> </span><span id="local-6989586621679387415"><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span></span><span>
</span><span id="line-135"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TC"><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DC"><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="P"><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387416"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PD"><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387416"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="N"><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ND"><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387417"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="C"><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387415"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679386279"><span id="local-6989586621679386281"><span id="local-6989586621679386297"><span class="annot"><span class="annottext">Int -&gt; Entity text noSyncHash hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
showList :: [Entity text noSyncHash hash] -&gt; ShowS
$cshowList :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
[Entity text noSyncHash hash] -&gt; ShowS
show :: Entity text noSyncHash hash -&gt; String
$cshow :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Entity text noSyncHash hash -&gt; String
showsPrec :: Int -&gt; Entity text noSyncHash hash -&gt; ShowS
$cshowsPrec :: forall text noSyncHash hash.
(Show text, Show noSyncHash, Show hash) =&gt;
Int -&gt; Entity text noSyncHash hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386268"><span id="local-6989586621679386277"><span class="annot"><span class="annottext">Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
/= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c/= :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
== :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c== :: forall text noSyncHash hash.
(Eq text, Eq noSyncHash, Eq hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386245"><span id="local-6989586621679386247"><span id="local-6989586621679386249"><span id="local-6989586621679386251"><span id="local-6989586621679386253"><span id="local-6989586621679386255"><span id="local-6989586621679386264"><span class="annot"><span class="annottext">Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {noSyncHash} {hash}.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Eq (Entity text noSyncHash hash)
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
min :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmin :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
max :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
$cmax :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Entity text noSyncHash hash
&gt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&gt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&gt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt;= :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt;= :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
&lt; :: Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
$c&lt; :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash -&gt; Entity text noSyncHash hash -&gt; Bool
compare :: Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
$ccompare :: forall text noSyncHash hash.
(Ord text, Ord noSyncHash, Ord hash) =&gt;
Entity text noSyncHash hash
-&gt; Entity text noSyncHash hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386238"><span id="local-6989586621679386240"><span id="local-6989586621679386242"><span id="local-6989586621679387397"><span id="local-6989586621679387398"><span id="local-6989586621679387399"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387399"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387398"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387397"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387399"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387398"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387397"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679386230"><span class="annot"><span class="annottext">toJSON :: Entity text noSyncHash hash -&gt; Value
</span><a href="#local-6989586621679386230"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679386229"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679386229"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679386229"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679386226"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679386226"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679386226"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679386224"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679386224"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679386224"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679386222"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679386222"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679386222"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679386220"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679386220"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679386220"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679386218"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679386218"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679386218"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679386216"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679386216"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679386216"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>      </span><span id="local-6989586621679387381"><span class="annot"><a href="#local-6989586621679386228"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387381"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387381"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span></span><span>
</span><span id="line-155"></span><span>      </span><span id="local-6989586621679386228"><span class="annot"><span class="annottext">go :: forall a. ToJSON a =&gt; EntityType -&gt; a -&gt; Value
</span><a href="#local-6989586621679386228"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679386207"><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679386207"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621679386206"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679386206"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="#local-6989586621679386207"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679386206"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386203"><span id="local-6989586621679387377"><span id="local-6989586621679387378"><span id="local-6989586621679387379"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387379"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387378"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387377"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387377"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387379"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387378"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387377"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>  </span><span id="local-6989586621679386177"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Entity text noSyncHash hash)
</span><a href="#local-6989586621679386177"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Entity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679386176"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-160"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-161"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-163"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-164"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-165"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679386176"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;object&quot;</span></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span id="local-6989586621679387351"><span id="local-6989586621679387352"><span id="local-6989586621679387353"><span id="local-6989586621679387354"><span id="local-6989586621679387355"><span class="annot"><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-type">entityHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387355"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387354"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387353"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387355"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387354"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387352"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387351"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387353"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387355"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387352"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387351"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387354"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-169"></span><span id="entityHashes_"><span class="annot"><span class="annottext">entityHashes_ :: forall (m :: * -&gt; *) hash' hash text noSyncHash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash')
-&gt; Entity text noSyncHash hash -&gt; m (Entity text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#entityHashes_"><span class="hs-identifier hs-var hs-var">entityHashes_</span></a></span></span><span> </span><span id="local-6989586621679386146"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span id="local-6989586621679386145"><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679386145"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
TermComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-var">TC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">TermComponent text hash
</span><a href="#local-6989586621679386145"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span id="local-6989586621679386143"><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679386143"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
DeclComponent text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-var">DC</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">DeclComponent text hash
</span><a href="#local-6989586621679386143"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span id="local-6989586621679386142"><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679386142"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Patch text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-var">patchHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Patch text noSyncHash hash
</span><a href="#local-6989586621679386142"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span id="local-6989586621679386141"><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679386141"><span class="hs-identifier hs-var">patch</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
PatchDiff text noSyncHash hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-var">PD</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var">patchDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PatchDiff text noSyncHash hash
</span><a href="#local-6989586621679386141"><span class="hs-identifier hs-var">patch</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span id="local-6989586621679386140"><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679386140"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Namespace text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-var">N</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Namespace text hash
</span><a href="#local-6989586621679386140"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span id="local-6989586621679386139"><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679386139"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
NamespaceDiff text hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-var">ND</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var">namespaceDiffHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceDiff text hash
</span><a href="#local-6989586621679386139"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span id="local-6989586621679386138"><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679386138"><span class="hs-identifier hs-var">causal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall text noSyncHash hash.
Causal hash -&gt; Entity text noSyncHash hash
</span><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-var">C</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var">causalHashes_</span></a></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679386146"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Causal hash
</span><a href="#local-6989586621679386138"><span class="hs-identifier hs-var">causal</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | Get the direct dependencies of an entity (which are actually sync'd).</span><span>
</span><span id="line-179"></span><span class="hs-comment">--</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- FIXME use generic-lens here? (typed @hash)</span><span>
</span><span id="line-181"></span><span id="local-6989586621679387319"><span id="local-6989586621679387320"><span id="local-6989586621679387321"><span class="annot"><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-type">entityDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387321"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387320"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387319"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387321"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679387321"><span class="hs-identifier hs-type">hash</span></a></span></span></span></span><span>
</span><span id="line-182"></span><span id="entityDependencies"><span class="annot"><span class="annottext">entityDependencies :: forall hash text noSyncHash.
Ord hash =&gt;
Entity text noSyncHash hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#entityDependencies"><span class="hs-identifier hs-var hs-var">entityDependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#TC"><span class="hs-identifier hs-type">TC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679386109"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679386109"><span class="hs-identifier hs-var">terms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679386109"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386105"><span class="annot"><span class="annottext">[hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
hashes :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386103"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679386103"><span class="hs-identifier hs-var">_term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386105"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#DC"><span class="hs-identifier hs-type">DC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679386100"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679386100"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679386100"><span class="hs-identifier hs-var">decls</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386099"><span class="annot"><span class="annottext">[hash]
hashes :: [hash]
$sel:hashes:LocalIds :: forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="#local-6989586621679386099"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386098"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679386098"><span class="hs-identifier hs-var">_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386099"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386096"><span class="annot"><span class="annottext">[hash]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
newHashLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386096"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#PD"><span class="hs-identifier hs-type">PD</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386093"><span class="annot"><span class="annottext">hash
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
parent :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386091"><span class="annot"><span class="annottext">[hash]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
newHashLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386093"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386091"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#N"><span class="hs-identifier hs-type">N</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386087"><span class="annot"><span class="annottext">[hash]
$sel:defnLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
defnLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386085"><span class="annot"><span class="annottext">[hash]
$sel:patchLookup:Namespace :: forall text hash. Namespace text hash -&gt; [hash]
patchLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386083"><span class="annot"><span class="annottext">[(hash, hash)]
$sel:childLookup:Namespace :: forall text hash. Namespace text hash -&gt; [(hash, hash)]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386087"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-190"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386085"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679386080"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386080"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386079"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386079"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386080"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386079"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679386083"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#ND"><span class="hs-identifier hs-type">ND</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386077"><span class="annot"><span class="annottext">hash
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
parent :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386075"><span class="annot"><span class="annottext">[hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
defnLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386073"><span class="annot"><span class="annottext">[hash]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
patchLookup :: [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386071"><span class="annot"><span class="annottext">[(hash, hash)]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
childLookup :: [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span>
</span><span id="line-195"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386077"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-196"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386075"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679386073"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679386068"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386068"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386067"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386067"><span class="hs-identifier hs-var">causalHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386068"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386067"><span class="hs-identifier hs-var">causalHash</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679386071"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#C"><span class="hs-identifier hs-type">C</span></a></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679386065"><span class="annot"><span class="annottext">hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
namespaceHash :: hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386063"><span class="annot"><span class="annottext">Set hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
parents :: Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679386065"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679386063"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">data</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span id="local-6989586621679387403"><span class="annot"><a href="#local-6989586621679387403"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387402"><span class="annot"><a href="#local-6989586621679387402"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermComponent"><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387403"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387402"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679386052"><span id="local-6989586621679386054"><span id="local-6989586621679386060"><span class="annot"><span class="annottext">Int -&gt; TermComponent text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
showList :: [TermComponent text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[TermComponent text hash] -&gt; ShowS
show :: TermComponent text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
TermComponent text hash -&gt; String
showsPrec :: Int -&gt; TermComponent text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; TermComponent text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386041"><span id="local-6989586621679386046"><span class="annot"><span class="annottext">TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
/= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
== :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679386013"><span id="local-6989586621679386015"><span id="local-6989586621679386018"><span id="local-6989586621679386021"><span id="local-6989586621679386024"><span id="local-6989586621679386028"><span id="local-6989586621679386033"><span class="annot"><span class="annottext">TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (TermComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
min :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
max :: TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash
-&gt; TermComponent text hash -&gt; TermComponent text hash
&gt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&gt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt;= :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
&lt; :: TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Bool
compare :: TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
TermComponent text hash -&gt; TermComponent text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679386000"><span id="local-6989586621679386002"><span id="local-6989586621679386005"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621679385995"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; TermComponent a b -&gt; m
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385988"><span id="local-6989586621679385990"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621679385985"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; TermComponent a c -&gt; TermComponent b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>  </span><span id="local-6989586621679385972"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; TermComponent a b -&gt; f (TermComponent c d)
</span><a href="#local-6989586621679385972"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679385971"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385971"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679385970"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385970"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679385969"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679385969"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385971"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385970"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679385969"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385961"><span id="local-6989586621679385963"><span id="local-6989586621679385965"><span id="local-6989586621679387393"><span id="local-6989586621679387394"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387394"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387393"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387394"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387393"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>  </span><span id="local-6989586621679385950"><span class="annot"><span class="annottext">toJSON :: TermComponent text hash -&gt; Value
</span><a href="#local-6989586621679385950"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span id="local-6989586621679385949"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385949"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-218"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;terms&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385949"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385945"><span id="local-6989586621679387373"><span id="local-6989586621679387374"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387374"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387373"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-type">TermComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387374"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387373"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621679385932"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (TermComponent text hash)
</span><a href="#local-6989586621679385932"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TermComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385931"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385931"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621679385930"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679385930"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385931"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;terms&quot;</span></span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621679385929"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385929"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679385930"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; TermComponent text hash
</span><a href="Unison.Sync.Types.html#TermComponent"><span class="hs-identifier hs-var">TermComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385929"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span id="local-6989586621679387250"><span id="local-6989586621679387251"><span id="local-6989586621679387252"><span id="local-6989586621679387253"><span id="local-6989586621679387254"><span class="annot"><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-type">bitraverseComponents</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387254"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387253"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387254"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387252"><span class="hs-identifier hs-type">a'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387251"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387254"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387250"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387253"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387251"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><a href="#local-6989586621679387254"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387252"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387250"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span></span></span></span><span>
</span><span id="line-233"></span><span id="bitraverseComponents"><span class="annot"><span class="annottext">bitraverseComponents :: forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var hs-var">bitraverseComponents</span></a></span></span><span> </span><span id="local-6989586621679385918"><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679385918"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679385917"><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679385917"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall {f :: * -&gt; *} {t} {a} {t}.
Functor f =&gt;
(t -&gt; f a) -&gt; (t, t) -&gt; f (a, t)
</span><a href="#local-6989586621679385916"><span class="hs-identifier hs-var">_1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a'
</span><a href="#local-6989586621679385918"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f b'
</span><a href="#local-6989586621679385917"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621679385916"><span class="annot"><span class="annottext">_1 :: (t -&gt; f a) -&gt; (t, t) -&gt; f (a, t)
</span><a href="#local-6989586621679385916"><span class="hs-identifier hs-var hs-var">_1</span></a></span></span><span> </span><span id="local-6989586621679385913"><span class="annot"><span class="annottext">t -&gt; f a
</span><a href="#local-6989586621679385913"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385912"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679385912"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385911"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679385911"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679385911"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; f a
</span><a href="#local-6989586621679385913"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679385912"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span id="local-6989586621679387247"><span id="local-6989586621679387248"><span class="annot"><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-type">encodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387248"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387247"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387248"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387247"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span></span><span>
</span><span id="line-239"></span><span id="encodeComponentPiece"><span class="annot"><span class="annottext">encodeComponentPiece :: forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var hs-var">encodeComponentPiece</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385902"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679385902"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385901"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385901"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679385902"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385901"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span id="local-6989586621679387240"><span id="local-6989586621679387241"><span class="annot"><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-type">decodeComponentPiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387241"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387240"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387241"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387240"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-246"></span><span id="decodeComponentPiece"><span class="annot"><span class="annottext">decodeComponentPiece :: forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var hs-var">decodeComponentPiece</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Component Piece&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385890"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385890"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621679385889"><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679385889"><span class="hs-identifier hs-var">localIDs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385890"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;local_ids&quot;</span></span><span>
</span><span id="line-248"></span><span>  </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679385888"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385888"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385890"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalIds text hash
</span><a href="#local-6989586621679385889"><span class="hs-identifier hs-var">localIDs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385888"><span class="hs-identifier hs-var">bytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-keyword">data</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span id="local-6989586621679387401"><span class="annot"><a href="#local-6989586621679387401"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387400"><span class="annot"><a href="#local-6989586621679387400"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeclComponent"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387401"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387400"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385879"><span id="local-6989586621679385881"><span id="local-6989586621679385886"><span class="annot"><span class="annottext">Int -&gt; DeclComponent text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
showList :: [DeclComponent text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[DeclComponent text hash] -&gt; ShowS
show :: DeclComponent text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
DeclComponent text hash -&gt; String
showsPrec :: Int -&gt; DeclComponent text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; DeclComponent text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385871"><span id="local-6989586621679385875"><span class="annot"><span class="annottext">DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
/= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
== :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385846"><span id="local-6989586621679385848"><span id="local-6989586621679385851"><span id="local-6989586621679385854"><span id="local-6989586621679385857"><span id="local-6989586621679385861"><span id="local-6989586621679385865"><span class="annot"><span class="annottext">DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (DeclComponent text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
min :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
max :: DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash
-&gt; DeclComponent text hash -&gt; DeclComponent text hash
&gt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&gt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt;= :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
&lt; :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Bool
compare :: DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
DeclComponent text hash -&gt; DeclComponent text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385835"><span id="local-6989586621679385837"><span id="local-6989586621679385840"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>  </span><span id="local-6989586621679385831"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; DeclComponent a b -&gt; m
</span><a href="#local-6989586621679385831"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385826"><span id="local-6989586621679385828"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621679385824"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; DeclComponent a c -&gt; DeclComponent b d
</span><a href="#local-6989586621679385824"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621679385814"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c)
-&gt; (b -&gt; f d) -&gt; DeclComponent a b -&gt; f (DeclComponent c d)
</span><a href="#local-6989586621679385814"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679385813"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385813"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679385812"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385812"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679385811"><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679385811"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a a' b b'.
Applicative f =&gt;
(a -&gt; f a')
-&gt; (b -&gt; f b')
-&gt; [(LocalIds a b, ByteString)]
-&gt; f [(LocalIds a' b', ByteString)]
</span><a href="Unison.Sync.Types.html#bitraverseComponents"><span class="hs-identifier hs-var">bitraverseComponents</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385813"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385812"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds a b, ByteString)]
</span><a href="#local-6989586621679385811"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385804"><span id="local-6989586621679385806"><span id="local-6989586621679385808"><span id="local-6989586621679387395"><span id="local-6989586621679387396"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387396"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387395"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387396"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387395"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-265"></span><span>  </span><span id="local-6989586621679385796"><span class="annot"><span class="annottext">toJSON :: DeclComponent text hash -&gt; Value
</span><a href="#local-6989586621679385796"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span id="local-6989586621679385795"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385795"><span class="hs-identifier hs-var">components</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-267"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;decls&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
(ToJSON text, ToJSON hash) =&gt;
(LocalIds text hash, ByteString) -&gt; Value
</span><a href="Unison.Sync.Types.html#encodeComponentPiece"><span class="hs-identifier hs-var">encodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385795"><span class="hs-identifier hs-var">components</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385792"><span id="local-6989586621679387375"><span id="local-6989586621679387376"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387376"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387375"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-type">DeclComponent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387376"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387375"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621679385782"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (DeclComponent text hash)
</span><a href="#local-6989586621679385782"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DeclComponent&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385781"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385781"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621679385780"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679385780"><span class="hs-identifier hs-var">pieces</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385781"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;decls&quot;</span></span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621679385779"><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385779"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall text hash.
(FromJSON text, FromJSON hash) =&gt;
Value -&gt; Parser (LocalIds text hash, ByteString)
</span><a href="Unison.Sync.Types.html#decodeComponentPiece"><span class="hs-identifier hs-var">decodeComponentPiece</span></a></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679385780"><span class="hs-identifier hs-var">pieces</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall text hash.
[(LocalIds text hash, ByteString)] -&gt; DeclComponent text hash
</span><a href="Unison.Sync.Types.html#DeclComponent"><span class="hs-identifier hs-var">DeclComponent</span></a></span><span> </span><span class="annot"><span class="annottext">[(LocalIds text hash, ByteString)]
</span><a href="#local-6989586621679385779"><span class="hs-identifier hs-var">terms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-keyword">data</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span> </span><span id="local-6989586621679387307"><span class="annot"><a href="#local-6989586621679387307"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387306"><span class="annot"><a href="#local-6989586621679387306"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LocalIds"><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Atexts%3ALocalIds"><span class="annot"><span class="annottext">forall text hash. LocalIds text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3Atexts%3ALocalIds"><span class="hs-identifier hs-var hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387307"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-278"></span><span>    </span><span id="%24sel%3Ahashes%3ALocalIds"><span class="annot"><span class="annottext">forall text hash. LocalIds text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ALocalIds"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387306"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385769"><span id="local-6989586621679385771"><span id="local-6989586621679385776"><span class="annot"><span class="annottext">Int -&gt; LocalIds text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
showList :: [LocalIds text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[LocalIds text hash] -&gt; ShowS
show :: LocalIds text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
LocalIds text hash -&gt; String
showsPrec :: Int -&gt; LocalIds text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; LocalIds text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385763"><span id="local-6989586621679385767"><span class="annot"><span class="annottext">LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
/= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
== :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385740"><span id="local-6989586621679385742"><span id="local-6989586621679385745"><span id="local-6989586621679385748"><span id="local-6989586621679385751"><span id="local-6989586621679385755"><span id="local-6989586621679385759"><span class="annot"><span class="annottext">LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (LocalIds text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
min :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
max :: LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; LocalIds text hash
&gt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&gt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt;= :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
&lt; :: LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Bool
compare :: LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
LocalIds text hash -&gt; LocalIds text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385733"><span id="local-6989586621679385735"><span id="local-6989586621679385738"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>  </span><span id="local-6989586621679385729"><span class="annot"><span class="annottext">bifoldMap :: forall m a b. Monoid m =&gt; (a -&gt; m) -&gt; (b -&gt; m) -&gt; LocalIds a b -&gt; m
</span><a href="#local-6989586621679385729"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385724"><span id="local-6989586621679385726"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621679385722"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; LocalIds a c -&gt; LocalIds b d
</span><a href="#local-6989586621679385722"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>  </span><span id="local-6989586621679385708"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; LocalIds a b -&gt; f (LocalIds c d)
</span><a href="#local-6989586621679385708"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679385707"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385707"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679385706"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385706"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679385705"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679385705"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679385704"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679385704"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">forall text hash. [text] -&gt; [hash] -&gt; LocalIds text hash
</span><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-var">LocalIds</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385707"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679385705"><span class="hs-identifier hs-var">texts</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385706"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679385704"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385697"><span id="local-6989586621679385699"><span id="local-6989586621679385701"><span id="local-6989586621679387227"><span id="local-6989586621679387228"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387228"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387227"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387228"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387227"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span id="local-6989586621679385690"><span class="annot"><span class="annottext">toJSON :: LocalIds text hash -&gt; Value
</span><a href="#local-6989586621679385690"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span id="local-6989586621679385689"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385689"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span id="local-6989586621679385688"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385688"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;texts&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385689"><span class="hs-identifier hs-var">texts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385688"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-297"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385685"><span id="local-6989586621679387223"><span id="local-6989586621679387224"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387224"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387223"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387224"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387223"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621679385678"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (LocalIds text hash)
</span><a href="#local-6989586621679385678"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LocalIds&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385677"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385677"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621679385676"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385676"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385677"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;texts&quot;</span></span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621679385675"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385675"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385677"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#LocalIds"><span class="hs-identifier hs-type">LocalIds</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[hash]
hashes :: [hash]
texts :: [text]
$sel:texts:LocalIds :: [text]
$sel:hashes:LocalIds :: [hash]
</span><a href="#local-6989586621679385675"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-keyword">data</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span> </span><span id="local-6989586621679387406"><span class="annot"><a href="#local-6989586621679387406"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387405"><span class="annot"><a href="#local-6989586621679387405"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679387404"><span class="annot"><a href="#local-6989586621679387404"><span class="hs-identifier hs-type">newHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Patch"><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-var">Patch</span></a></span></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatch"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387406"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-307"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387405"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatch"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387404"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>    </span><span id="%24sel%3Abytes%3APatch"><span class="annot"><span class="annottext">forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatch"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385661"><span id="local-6989586621679385663"><span id="local-6989586621679385670"><span class="annot"><span class="annottext">Int -&gt; Patch text oldHash newHash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
showList :: [Patch text oldHash newHash] -&gt; ShowS
$cshowList :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
[Patch text oldHash newHash] -&gt; ShowS
show :: Patch text oldHash newHash -&gt; String
$cshow :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Patch text oldHash newHash -&gt; String
showsPrec :: Int -&gt; Patch text oldHash newHash -&gt; ShowS
$cshowsPrec :: forall text oldHash newHash.
(Show text, Show oldHash, Show newHash) =&gt;
Int -&gt; Patch text oldHash newHash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385653"><span id="local-6989586621679385659"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
/= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c/= :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
== :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c== :: forall text oldHash newHash.
(Eq text, Eq oldHash, Eq newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385626"><span id="local-6989586621679385628"><span id="local-6989586621679385631"><span id="local-6989586621679385634"><span id="local-6989586621679385637"><span id="local-6989586621679385643"><span id="local-6989586621679385649"><span class="annot"><span class="annottext">Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {oldHash} {newHash}.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Eq (Patch text oldHash newHash)
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
min :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmin :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
max :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
$cmax :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Patch text oldHash newHash
&gt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&gt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&gt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt;= :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt;= :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
&lt; :: Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
$c&lt; :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash -&gt; Patch text oldHash newHash -&gt; Bool
compare :: Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
$ccompare :: forall text oldHash newHash.
(Ord text, Ord oldHash, Ord newHash) =&gt;
Patch text oldHash newHash
-&gt; Patch text oldHash newHash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385619"><span id="local-6989586621679385621"><span id="local-6989586621679385623"><span id="local-6989586621679387390"><span id="local-6989586621679387391"><span id="local-6989586621679387392"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387392"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387391"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387390"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387392"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387391"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387390"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-314"></span><span>  </span><span id="local-6989586621679385606"><span class="annot"><span class="annottext">toJSON :: Patch text oldHash newHash -&gt; Value
</span><a href="#local-6989586621679385606"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span id="local-6989586621679385605"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385605"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679385604"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679385604"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679385603"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679385603"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679385602"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385602"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-316"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385605"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-317"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679385604"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-318"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679385603"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-319"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385602"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-320"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385599"><span id="local-6989586621679387370"><span id="local-6989586621679387371"><span id="local-6989586621679387372"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387372"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387371"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387370"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387372"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387371"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387370"><span class="hs-identifier hs-type">newHash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621679385584"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Patch text oldHash newHash)
</span><a href="#local-6989586621679385584"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Patch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385583"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385583"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621679385582"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385582"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385583"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679385581"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679385581"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385583"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-326"></span><span>    </span><span id="local-6989586621679385580"><span class="annot"><span class="annottext">[newHash]
</span><a href="#local-6989586621679385580"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385583"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679385579"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385579"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385583"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[oldHash]
[newHash]
ByteString
bytes :: ByteString
newHashLookup :: [newHash]
oldHashLookup :: [oldHash]
textLookup :: [text]
$sel:bytes:Patch :: ByteString
$sel:oldHashLookup:Patch :: [oldHash]
$sel:textLookup:Patch :: [text]
$sel:newHashLookup:Patch :: [newHash]
</span><a href="#local-6989586621679385579"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span id="local-6989586621679387334"><span id="local-6989586621679387335"><span id="local-6989586621679387336"><span id="local-6989586621679387337"><span id="local-6989586621679387338"><span class="annot"><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-type">patchHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387337"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387336"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387335"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387334"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387337"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387335"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387334"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387336"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-331"></span><span id="patchHashes_"><span class="annot"><span class="annottext">patchHashes_ :: forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; Patch text noSyncHash hash -&gt; m (Patch text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchHashes_"><span class="hs-identifier hs-var hs-var">patchHashes_</span></a></span></span><span> </span><span id="local-6989586621679385573"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385573"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679385569"><span id="local-6989586621679385570"><span id="local-6989586621679385571"><span id="local-6989586621679385572"><span class="annot"><span class="annottext">[hash]
[text]
[noSyncHash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; ByteString
$sel:oldHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [oldHash]
$sel:textLookup:Patch :: forall text oldHash newHash. Patch text oldHash newHash -&gt; [text]
$sel:newHashLookup:Patch :: forall text oldHash newHash.
Patch text oldHash newHash -&gt; [newHash]
</span><a href="#local-6989586621679385569"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-332"></span><span>  </span><span id="local-6989586621679385568"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679385568"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385573"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385570"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Patch"><span class="hs-identifier hs-type">Patch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[hash']
[text]
[noSyncHash]
ByteString
newHashLookup :: [hash']
bytes :: ByteString
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:Patch :: ByteString
$sel:oldHashLookup:Patch :: [noSyncHash]
$sel:textLookup:Patch :: [text]
$sel:newHashLookup:Patch :: [hash']
</span><a href="#local-6989586621679385568"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-keyword">data</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span> </span><span id="local-6989586621679387408"><span class="annot"><a href="#local-6989586621679387408"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387407"><span class="annot"><a href="#local-6989586621679387407"><span class="hs-identifier hs-type">oldHash</span></a></span></span><span> </span><span id="local-6989586621679387409"><span class="annot"><a href="#local-6989586621679387409"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PatchDiff"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-var">PatchDiff</span></a></span></span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3APatchDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679387409"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-337"></span><span>    </span><span id="%24sel%3AtextLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387408"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-338"></span><span>    </span><span id="%24sel%3AoldHashLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
</span><a href="Unison.Sync.Types.html#%24sel%3AoldHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387407"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-339"></span><span>    </span><span id="%24sel%3AnewHashLookup%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHashLookup%3APatchDiff"><span class="hs-identifier hs-var hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387409"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-340"></span><span>    </span><span id="%24sel%3Abytes%3APatchDiff"><span class="annot"><span class="annottext">forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3APatchDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385556"><span id="local-6989586621679385563"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
/= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c/= :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
== :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c== :: forall text oldHash hash.
(Eq hash, Eq text, Eq oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385527"><span id="local-6989586621679385529"><span id="local-6989586621679385532"><span id="local-6989586621679385535"><span id="local-6989586621679385538"><span id="local-6989586621679385545"><span id="local-6989586621679385552"><span class="annot"><span class="annottext">PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {oldHash} {hash}.
(Ord hash, Ord text, Ord oldHash) =&gt;
Eq (PatchDiff text oldHash hash)
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
min :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmin :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
max :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
$cmax :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash
&gt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&gt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&gt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt;= :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt;= :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
&lt; :: PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
$c&lt; :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash -&gt; PatchDiff text oldHash hash -&gt; Bool
compare :: PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
$ccompare :: forall text oldHash hash.
(Ord hash, Ord text, Ord oldHash) =&gt;
PatchDiff text oldHash hash
-&gt; PatchDiff text oldHash hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385515"><span id="local-6989586621679385517"><span id="local-6989586621679385525"><span class="annot"><span class="annottext">Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
showList :: [PatchDiff text oldHash hash] -&gt; ShowS
$cshowList :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
[PatchDiff text oldHash hash] -&gt; ShowS
show :: PatchDiff text oldHash hash -&gt; String
$cshow :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
PatchDiff text oldHash hash -&gt; String
showsPrec :: Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
$cshowsPrec :: forall text oldHash hash.
(Show hash, Show text, Show oldHash) =&gt;
Int -&gt; PatchDiff text oldHash hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385508"><span id="local-6989586621679385510"><span id="local-6989586621679385512"><span id="local-6989586621679387387"><span id="local-6989586621679387388"><span id="local-6989586621679387389"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387389"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387388"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387387"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387389"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387388"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387387"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-345"></span><span>  </span><span id="local-6989586621679385492"><span class="annot"><span class="annottext">toJSON :: PatchDiff text oldHash hash -&gt; Value
</span><a href="#local-6989586621679385492"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span id="local-6989586621679385491"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385491"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679385490"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385490"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679385489"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679385489"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span id="local-6989586621679385488"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385488"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span id="local-6989586621679385487"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385487"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385491"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-348"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385490"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679385489"><span class="hs-identifier hs-var">oldHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385488"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385487"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385484"><span id="local-6989586621679387367"><span id="local-6989586621679387368"><span id="local-6989586621679387369"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387369"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387368"><span class="hs-identifier hs-type">oldHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387367"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387369"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387368"><span class="hs-identifier hs-type">oldHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387367"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>  </span><span id="local-6989586621679385466"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (PatchDiff text oldHash hash)
</span><a href="#local-6989586621679385466"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PatchDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385465"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385465"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-356"></span><span>    </span><span id="local-6989586621679385464"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385464"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385465"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621679385463"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385463"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385465"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-358"></span><span>    </span><span id="local-6989586621679385462"><span class="annot"><span class="annottext">[oldHash]
</span><a href="#local-6989586621679385462"><span class="hs-identifier hs-var">oldHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385465"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;optional_hash_lookup&quot;</span></span><span>
</span><span id="line-359"></span><span>    </span><span id="local-6989586621679385461"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385461"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385465"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hash_lookup&quot;</span></span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679385460"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385460"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385465"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
[text]
[oldHash]
[hash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [oldHash]
textLookup :: [text]
parent :: hash
$sel:bytes:PatchDiff :: ByteString
$sel:oldHashLookup:PatchDiff :: [oldHash]
$sel:textLookup:PatchDiff :: [text]
$sel:newHashLookup:PatchDiff :: [hash]
$sel:parent:PatchDiff :: hash
</span><a href="#local-6989586621679385460"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span id="local-6989586621679387329"><span id="local-6989586621679387330"><span id="local-6989586621679387331"><span id="local-6989586621679387332"><span id="local-6989586621679387333"><span class="annot"><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-type">patchDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387333"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387332"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387333"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387331"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387330"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387329"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387332"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387333"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387330"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387329"><span class="hs-identifier hs-type">noSyncHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387331"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-364"></span><span id="patchDiffHashes_"><span class="annot"><span class="annottext">patchDiffHashes_ :: forall (m :: * -&gt; *) hash hash' text noSyncHash.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; PatchDiff text noSyncHash hash
-&gt; m (PatchDiff text noSyncHash hash')
</span><a href="Unison.Sync.Types.html#patchDiffHashes_"><span class="hs-identifier hs-var hs-var">patchDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679385453"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385453"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679385448"><span id="local-6989586621679385449"><span id="local-6989586621679385450"><span id="local-6989586621679385451"><span id="local-6989586621679385452"><span class="annot"><span class="annottext">hash
[hash]
[text]
[noSyncHash]
ByteString
bytes :: ByteString
newHashLookup :: [hash]
oldHashLookup :: [noSyncHash]
textLookup :: [text]
parent :: hash
$sel:bytes:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; ByteString
$sel:oldHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [oldHash]
$sel:textLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [text]
$sel:newHashLookup:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; [hash]
$sel:parent:PatchDiff :: forall text oldHash hash. PatchDiff text oldHash hash -&gt; hash
</span><a href="#local-6989586621679385448"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-365"></span><span>  </span><span id="local-6989586621679385447"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679385447"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385453"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385452"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621679385446"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679385446"><span class="hs-identifier hs-var">newHashLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385453"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385449"><span class="hs-identifier hs-var">newHashLookup</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#PatchDiff"><span class="hs-identifier hs-type">PatchDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[noSyncHash]
ByteString
newHashLookup :: [hash']
parent :: hash'
bytes :: ByteString
oldHashLookup :: [noSyncHash]
textLookup :: [text]
$sel:bytes:PatchDiff :: ByteString
$sel:oldHashLookup:PatchDiff :: [noSyncHash]
$sel:textLookup:PatchDiff :: [text]
$sel:newHashLookup:PatchDiff :: [hash']
$sel:parent:PatchDiff :: hash'
</span><a href="#local-6989586621679385446"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-keyword">data</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span> </span><span id="local-6989586621679387411"><span class="annot"><a href="#local-6989586621679387411"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387410"><span class="annot"><a href="#local-6989586621679387410"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Namespace"><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtextLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387411"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-371"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387410"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-372"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387410"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-373"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespace"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387410"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679387410"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-374"></span><span>    </span><span id="%24sel%3Abytes%3ANamespace"><span class="annot"><span class="annottext">forall text hash. Namespace text hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespace"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-375"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385434"><span id="local-6989586621679385442"><span class="annot"><span class="annottext">Namespace text hash -&gt; Namespace text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
/= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c/= :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
== :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c== :: forall text hash.
(Eq text, Eq hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385403"><span id="local-6989586621679385405"><span id="local-6989586621679385408"><span id="local-6989586621679385411"><span id="local-6989586621679385414"><span id="local-6989586621679385422"><span id="local-6989586621679385430"><span class="annot"><span class="annottext">Namespace text hash -&gt; Namespace text hash -&gt; Bool
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord text, Ord hash) =&gt;
Eq (Namespace text hash)
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
min :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmin :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
max :: Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
$cmax :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Namespace text hash
&gt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&gt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt;= :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
&lt; :: Namespace text hash -&gt; Namespace text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Bool
compare :: Namespace text hash -&gt; Namespace text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord text, Ord hash) =&gt;
Namespace text hash -&gt; Namespace text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385390"><span id="local-6989586621679385392"><span id="local-6989586621679385401"><span class="annot"><span class="annottext">Int -&gt; Namespace text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
showList :: [Namespace text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show text, Show hash) =&gt;
[Namespace text hash] -&gt; ShowS
show :: Namespace text hash -&gt; String
$cshow :: forall text hash.
(Show text, Show hash) =&gt;
Namespace text hash -&gt; String
showsPrec :: Int -&gt; Namespace text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show text, Show hash) =&gt;
Int -&gt; Namespace text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385383"><span id="local-6989586621679385385"><span id="local-6989586621679385388"><span class="annot"><span class="hs-identifier hs-type">Bifoldable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-379"></span><span>  </span><span id="local-6989586621679385379"><span class="annot"><span class="annottext">bifoldMap :: forall m a b.
Monoid m =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; Namespace a b -&gt; m
</span><a href="#local-6989586621679385379"><span class="hs-identifier hs-var hs-var hs-var hs-var">bifoldMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) m a b.
(Bitraversable t, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; t a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMapDefault</span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385374"><span id="local-6989586621679385376"><span class="annot"><span class="hs-identifier hs-type">Bifunctor</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>  </span><span id="local-6989586621679385372"><span class="annot"><span class="annottext">bimap :: forall a b c d.
(a -&gt; b) -&gt; (c -&gt; d) -&gt; Namespace a c -&gt; Namespace b d
</span><a href="#local-6989586621679385372"><span class="hs-identifier hs-var hs-var hs-var hs-var">bimap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) a b c d.
Bitraversable t =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; t a c -&gt; t b d
</span><span class="hs-identifier hs-var">bimapDefault</span></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bitraversable</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-385"></span><span>  </span><span id="local-6989586621679385347"><span class="annot"><span class="annottext">bitraverse :: forall (f :: * -&gt; *) a c b d.
Applicative f =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; Namespace a b -&gt; f (Namespace c d)
</span><a href="#local-6989586621679385347"><span class="hs-identifier hs-var hs-var hs-var hs-var">bitraverse</span></a></span></span><span> </span><span id="local-6989586621679385346"><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385346"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679385345"><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385345"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679385344"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679385344"><span class="hs-identifier hs-var">tl</span></a></span></span><span> </span><span id="local-6989586621679385343"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679385343"><span class="hs-identifier hs-var">dl</span></a></span></span><span> </span><span id="local-6989586621679385342"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679385342"><span class="hs-identifier hs-var">pl</span></a></span></span><span> </span><span id="local-6989586621679385341"><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679385341"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621679385340"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385340"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><span class="annottext">forall text hash.
[text]
-&gt; [hash]
-&gt; [hash]
-&gt; [(hash, hash)]
-&gt; ByteString
-&gt; Namespace text hash
</span><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-var">Namespace</span></a></span><span>
</span><span id="line-387"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; f c
</span><a href="#local-6989586621679385346"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679385344"><span class="hs-identifier hs-var">tl</span></a></span><span>
</span><span id="line-388"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385345"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679385343"><span class="hs-identifier hs-var">dl</span></a></span><span>
</span><span id="line-389"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385345"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621679385342"><span class="hs-identifier hs-var">pl</span></a></span><span>
</span><span id="line-390"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385345"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; f d
</span><a href="#local-6989586621679385345"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(b, b)]
</span><a href="#local-6989586621679385341"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385340"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385333"><span id="local-6989586621679385335"><span id="local-6989586621679385337"><span id="local-6989586621679387385"><span id="local-6989586621679387386"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387386"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387385"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387386"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387385"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-394"></span><span>  </span><span id="local-6989586621679385315"><span class="annot"><span class="annottext">toJSON :: Namespace text hash -&gt; Value
</span><a href="#local-6989586621679385315"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span id="local-6989586621679385314"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385314"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679385313"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385313"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679385312"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385312"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679385311"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385311"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span id="local-6989586621679385310"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385310"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385314"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385313"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385312"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385311"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-400"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385310"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-401"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385307"><span id="local-6989586621679387365"><span id="local-6989586621679387366"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387366"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387365"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387366"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387365"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>  </span><span id="local-6989586621679385287"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Namespace text hash)
</span><a href="#local-6989586621679385287"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Namespace&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385286"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385286"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621679385285"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385285"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385286"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621679385284"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385284"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385286"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621679385283"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385283"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385286"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621679385282"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385282"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385286"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-409"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679385281"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385281"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385286"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Namespace"><span class="hs-identifier hs-type">Namespace</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">[text]
[hash]
[(hash, hash)]
ByteString
bytes :: ByteString
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
$sel:bytes:Namespace :: ByteString
$sel:textLookup:Namespace :: [text]
$sel:childLookup:Namespace :: [(hash, hash)]
$sel:patchLookup:Namespace :: [hash]
$sel:defnLookup:Namespace :: [hash]
</span><a href="#local-6989586621679385281"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-keyword">data</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span> </span><span id="local-6989586621679387412"><span class="annot"><a href="#local-6989586621679387412"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span id="local-6989586621679387413"><span class="annot"><a href="#local-6989586621679387413"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NamespaceDiff"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-var">NamespaceDiff</span></a></span></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aparent%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679387413"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-414"></span><span>    </span><span id="%24sel%3AtextLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [text]
</span><a href="Unison.Sync.Types.html#%24sel%3AtextLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387412"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-415"></span><span>    </span><span id="%24sel%3AdefnLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3AdefnLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387413"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-416"></span><span>    </span><span id="%24sel%3ApatchLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [hash]
</span><a href="Unison.Sync.Types.html#%24sel%3ApatchLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679387413"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-417"></span><span>    </span><span id="%24sel%3AchildLookup%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
</span><a href="Unison.Sync.Types.html#%24sel%3AchildLookup%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387413"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679387413"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- (namespace hash, causal hash)</span><span>
</span><span id="line-418"></span><span>    </span><span id="%24sel%3Abytes%3ANamespaceDiff"><span class="annot"><span class="annottext">forall text hash. NamespaceDiff text hash -&gt; ByteString
</span><a href="Unison.Sync.Types.html#%24sel%3Abytes%3ANamespaceDiff"><span class="hs-identifier hs-var hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385268"><span id="local-6989586621679385277"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
/= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c/= :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
== :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c== :: forall text hash.
(Eq hash, Eq text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385235"><span id="local-6989586621679385237"><span id="local-6989586621679385240"><span id="local-6989586621679385243"><span id="local-6989586621679385246"><span id="local-6989586621679385255"><span id="local-6989586621679385264"><span class="annot"><span class="annottext">NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {text} {hash}.
(Ord hash, Ord text) =&gt;
Eq (NamespaceDiff text hash)
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
min :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmin :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
max :: NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
$cmax :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash
-&gt; NamespaceDiff text hash -&gt; NamespaceDiff text hash
&gt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&gt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&gt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt;= :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt;= :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
&lt; :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
$c&lt; :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Bool
compare :: NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
$ccompare :: forall text hash.
(Ord hash, Ord text) =&gt;
NamespaceDiff text hash -&gt; NamespaceDiff text hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385221"><span id="local-6989586621679385223"><span id="local-6989586621679385233"><span class="annot"><span class="annottext">Int -&gt; NamespaceDiff text hash -&gt; ShowS
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
showList :: [NamespaceDiff text hash] -&gt; ShowS
$cshowList :: forall text hash.
(Show hash, Show text) =&gt;
[NamespaceDiff text hash] -&gt; ShowS
show :: NamespaceDiff text hash -&gt; String
$cshow :: forall text hash.
(Show hash, Show text) =&gt;
NamespaceDiff text hash -&gt; String
showsPrec :: Int -&gt; NamespaceDiff text hash -&gt; ShowS
$cshowsPrec :: forall text hash.
(Show hash, Show text) =&gt;
Int -&gt; NamespaceDiff text hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385214"><span id="local-6989586621679385216"><span id="local-6989586621679385218"><span id="local-6989586621679387383"><span id="local-6989586621679387384"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387384"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387383"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387384"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387383"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-423"></span><span>  </span><span id="local-6989586621679385194"><span class="annot"><span class="annottext">toJSON :: NamespaceDiff text hash -&gt; Value
</span><a href="#local-6989586621679385194"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span id="local-6989586621679385193"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385193"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679385192"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385192"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span id="local-6989586621679385191"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385191"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span id="local-6989586621679385190"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385190"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span id="local-6989586621679385189"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385189"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span id="local-6989586621679385188"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385188"><span class="hs-identifier hs-var">bytes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-425"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385193"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-426"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385192"><span class="hs-identifier hs-var">textLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385191"><span class="hs-identifier hs-var">defnLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-428"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385190"><span class="hs-identifier hs-var">patchLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-429"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385189"><span class="hs-identifier hs-var">childLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-430"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Base64Bytes
</span><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-var">Base64Bytes</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385188"><span class="hs-identifier hs-var">bytes</span></a></span><span>
</span><span id="line-431"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385185"><span id="local-6989586621679387363"><span id="local-6989586621679387364"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387364"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387363"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387364"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387363"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-434"></span><span>  </span><span id="local-6989586621679385163"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NamespaceDiff text hash)
</span><a href="#local-6989586621679385163"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NamespaceDiff&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385162"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-435"></span><span>    </span><span id="local-6989586621679385161"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385161"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span>
</span><span id="line-436"></span><span>    </span><span id="local-6989586621679385160"><span class="annot"><span class="annottext">[text]
</span><a href="#local-6989586621679385160"><span class="hs-identifier hs-var">textLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;text_lookup&quot;</span></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621679385159"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385159"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;defn_lookup&quot;</span></span><span>
</span><span id="line-438"></span><span>    </span><span id="local-6989586621679385158"><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385158"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;patch_lookup&quot;</span></span><span>
</span><span id="line-439"></span><span>    </span><span id="local-6989586621679385157"><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385157"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child_lookup&quot;</span></span><span>
</span><span id="line-440"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#Base64Bytes"><span class="hs-identifier hs-type">Base64Bytes</span></a></span><span> </span><span id="local-6989586621679385156"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679385156"><span class="hs-identifier hs-var">bytes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385162"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;bytes&quot;</span></span><span>
</span><span id="line-441"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
[text]
[hash]
[(hash, hash)]
ByteString
bytes :: ByteString
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
parent :: hash
$sel:bytes:NamespaceDiff :: ByteString
$sel:textLookup:NamespaceDiff :: [text]
$sel:childLookup:NamespaceDiff :: [(hash, hash)]
$sel:patchLookup:NamespaceDiff :: [hash]
$sel:defnLookup:NamespaceDiff :: [hash]
$sel:parent:NamespaceDiff :: hash
</span><a href="#local-6989586621679385156"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span id="local-6989586621679387325"><span id="local-6989586621679387326"><span id="local-6989586621679387327"><span id="local-6989586621679387328"><span class="annot"><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-type">namespaceDiffHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387328"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387327"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387328"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387326"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387325"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387327"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387328"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387325"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387326"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-444"></span><span id="namespaceDiffHashes_"><span class="annot"><span class="annottext">namespaceDiffHashes_ :: forall (m :: * -&gt; *) hash hash' text.
Applicative m =&gt;
(hash -&gt; m hash')
-&gt; NamespaceDiff text hash -&gt; m (NamespaceDiff text hash')
</span><a href="Unison.Sync.Types.html#namespaceDiffHashes_"><span class="hs-identifier hs-var hs-var">namespaceDiffHashes_</span></a></span></span><span> </span><span id="local-6989586621679385141"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385141"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679385135"><span id="local-6989586621679385136"><span id="local-6989586621679385137"><span id="local-6989586621679385138"><span id="local-6989586621679385139"><span id="local-6989586621679385140"><span class="annot"><span class="annottext">hash
[hash]
[text]
[(hash, hash)]
ByteString
bytes :: ByteString
childLookup :: [(hash, hash)]
patchLookup :: [hash]
defnLookup :: [hash]
textLookup :: [text]
parent :: hash
$sel:bytes:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; ByteString
$sel:textLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [text]
$sel:childLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [(hash, hash)]
$sel:patchLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:defnLookup:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; [hash]
$sel:parent:NamespaceDiff :: forall text hash. NamespaceDiff text hash -&gt; hash
</span><a href="#local-6989586621679385135"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-445"></span><span>  </span><span id="local-6989586621679385134"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679385134"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385141"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385140"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679385133"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679385133"><span class="hs-identifier hs-var">defnLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385141"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385138"><span class="hs-identifier hs-var">defnLookup</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span id="local-6989586621679385132"><span class="annot"><span class="annottext">[hash']
</span><a href="#local-6989586621679385132"><span class="hs-identifier hs-var">patchLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385141"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[hash]
</span><a href="#local-6989586621679385137"><span class="hs-identifier hs-var">patchLookup</span></a></span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621679385131"><span class="annot"><span class="annottext">[(hash', hash')]
</span><a href="#local-6989586621679385131"><span class="hs-identifier hs-var">childLookup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) s t a b.
LensLike f s t a b -&gt; LensLike f s t a b
</span><span class="hs-identifier hs-var">traverseOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (r :: * -&gt; * -&gt; *) a b.
Bitraversable r =&gt;
Traversal (r a a) (r b b) a b
</span><span class="hs-identifier hs-var">both</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385141"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(hash, hash)]
</span><a href="#local-6989586621679385136"><span class="hs-identifier hs-var">childLookup</span></a></span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiff"><span class="hs-identifier hs-type">NamespaceDiff</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
[hash']
[text]
[(hash', hash')]
ByteString
childLookup :: [(hash', hash')]
patchLookup :: [hash']
defnLookup :: [hash']
parent :: hash'
bytes :: ByteString
textLookup :: [text]
$sel:bytes:NamespaceDiff :: ByteString
$sel:textLookup:NamespaceDiff :: [text]
$sel:childLookup:NamespaceDiff :: [(hash', hash')]
$sel:patchLookup:NamespaceDiff :: [hash']
$sel:defnLookup:NamespaceDiff :: [hash']
$sel:parent:NamespaceDiff :: hash'
</span><a href="#local-6989586621679385131"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-comment">-- Client _may_ choose not to download the namespace entity in the future, but</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- we still send them the hash/hashjwt.</span><span>
</span><span id="line-453"></span><span class="hs-keyword">data</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span> </span><span id="local-6989586621679387414"><span class="annot"><a href="#local-6989586621679387414"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Causal"><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-var">Causal</span></a></span></span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AnamespaceHash%3ACausal"><span class="annot"><span class="annottext">forall hash. Causal hash -&gt; hash
</span><a href="Unison.Sync.Types.html#%24sel%3AnamespaceHash%3ACausal"><span class="hs-identifier hs-var hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679387414"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-455"></span><span>    </span><span id="%24sel%3Aparents%3ACausal"><span class="annot"><span class="annottext">forall hash. Causal hash -&gt; Set hash
</span><a href="Unison.Sync.Types.html#%24sel%3Aparents%3ACausal"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679387414"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385124"><span id="local-6989586621679385129"><span class="annot"><span class="annottext">Causal hash -&gt; Causal hash -&gt; Bool
forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Causal hash -&gt; Causal hash -&gt; Bool
$c/= :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
== :: Causal hash -&gt; Causal hash -&gt; Bool
$c== :: forall hash. Eq hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385100"><span id="local-6989586621679385102"><span id="local-6989586621679385105"><span id="local-6989586621679385108"><span id="local-6989586621679385111"><span id="local-6989586621679385115"><span id="local-6989586621679385120"><span class="annot"><span class="annottext">Causal hash -&gt; Causal hash -&gt; Bool
Causal hash -&gt; Causal hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {hash}. Ord hash =&gt; Eq (Causal hash)
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
min :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmin :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
max :: Causal hash -&gt; Causal hash -&gt; Causal hash
$cmax :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Causal hash
&gt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&gt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&gt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt;= :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt;= :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
&lt; :: Causal hash -&gt; Causal hash -&gt; Bool
$c&lt; :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Bool
compare :: Causal hash -&gt; Causal hash -&gt; Ordering
$ccompare :: forall hash. Ord hash =&gt; Causal hash -&gt; Causal hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385090"><span id="local-6989586621679385092"><span id="local-6989586621679385098"><span class="annot"><span class="annottext">Int -&gt; Causal hash -&gt; ShowS
forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
forall hash. Show hash =&gt; Causal hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Causal hash] -&gt; ShowS
$cshowList :: forall hash. Show hash =&gt; [Causal hash] -&gt; ShowS
show :: Causal hash -&gt; String
$cshow :: forall hash. Show hash =&gt; Causal hash -&gt; String
showsPrec :: Int -&gt; Causal hash -&gt; ShowS
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; Causal hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span id="local-6989586621679387322"><span id="local-6989586621679387323"><span id="local-6989586621679387324"><span class="annot"><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-type">causalHashes_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679387324"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387323"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679387322"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387323"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387322"><span class="hs-identifier hs-type">hash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387323"><span class="hs-identifier hs-type">hash'</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-460"></span><span id="causalHashes_"><span class="annot"><span class="annottext">causalHashes_ :: forall (m :: * -&gt; *) hash' hash.
(Applicative m, Ord hash') =&gt;
(hash -&gt; m hash') -&gt; Causal hash -&gt; m (Causal hash')
</span><a href="Unison.Sync.Types.html#causalHashes_"><span class="hs-identifier hs-var hs-var">causalHashes_</span></a></span></span><span> </span><span id="local-6989586621679385082"><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385082"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679385080"><span id="local-6989586621679385081"><span class="annot"><span class="annottext">hash
Set hash
parents :: Set hash
namespaceHash :: hash
$sel:parents:Causal :: forall hash. Causal hash -&gt; Set hash
$sel:namespaceHash:Causal :: forall hash. Causal hash -&gt; hash
</span><a href="#local-6989586621679385080"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621679385079"><span class="annot"><span class="annottext">hash'
</span><a href="#local-6989586621679385079"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385082"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385081"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621679385078"><span class="annot"><span class="annottext">Set hash'
</span><a href="#local-6989586621679385078"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) b a.
(Applicative f, Ord b) =&gt;
(a -&gt; f b) -&gt; Set a -&gt; f (Set b)
</span><span class="hs-identifier hs-var">Set.traverse</span></span><span> </span><span class="annot"><span class="annottext">hash -&gt; m hash'
</span><a href="#local-6989586621679385082"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679385080"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash'
Set hash'
parents :: Set hash'
namespaceHash :: hash'
$sel:parents:Causal :: Set hash'
$sel:namespaceHash:Causal :: hash'
</span><a href="#local-6989586621679385078"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385070"><span id="local-6989586621679385072"><span id="local-6989586621679385074"><span id="local-6989586621679387382"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387382"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387382"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-466"></span><span>  </span><span id="local-6989586621679385062"><span class="annot"><span class="annottext">toJSON :: Causal hash -&gt; Value
</span><a href="#local-6989586621679385062"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span id="local-6989586621679385061"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385061"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span id="local-6989586621679385060"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679385060"><span class="hs-identifier hs-var">parents</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-467"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-468"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385061"><span class="hs-identifier hs-var">namespaceHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parents&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679385060"><span class="hs-identifier hs-var">parents</span></a></span><span>
</span><span id="line-470"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385057"><span id="local-6989586621679387362"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387362"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387362"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387362"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-473"></span><span>  </span><span id="local-6989586621679385049"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (Causal hash)
</span><a href="#local-6989586621679385049"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Causal&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679385048"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385048"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-474"></span><span>    </span><span id="local-6989586621679385047"><span class="annot"><span class="annottext">hash
</span><a href="#local-6989586621679385047"><span class="hs-identifier hs-var">namespaceHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385048"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;namespace_hash&quot;</span></span><span>
</span><span id="line-475"></span><span>    </span><span id="local-6989586621679385046"><span class="annot"><span class="annottext">Set hash
</span><a href="#local-6989586621679385046"><span class="hs-identifier hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679385048"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parents&quot;</span></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Causal"><span class="hs-identifier hs-type">Causal</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">hash
Set hash
parents :: Set hash
namespaceHash :: hash
$sel:parents:Causal :: Set hash
$sel:namespaceHash:Causal :: hash
</span><a href="#local-6989586621679385046"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-keyword">data</span><span> </span><span id="EntityType"><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-var">EntityType</span></a></span></span><span>
</span><span id="line-479"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TermComponentType"><span class="annot"><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DeclComponentType"><span class="annot"><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span></span><span>
</span><span id="line-481"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchType"><span class="annot"><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span></span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatchDiffType"><span class="annot"><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span></span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span></span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NamespaceDiffType"><span class="annot"><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span></span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CausalType"><span class="annot"><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679385042"><span id="local-6989586621679385044"><span class="annot"><span class="annottext">EntityType -&gt; EntityType -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EntityType -&gt; EntityType -&gt; Bool
$c/= :: EntityType -&gt; EntityType -&gt; Bool
== :: EntityType -&gt; EntityType -&gt; Bool
$c== :: EntityType -&gt; EntityType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385023"><span id="local-6989586621679385025"><span id="local-6989586621679385028"><span id="local-6989586621679385031"><span id="local-6989586621679385034"><span id="local-6989586621679385036"><span id="local-6989586621679385038"><span class="annot"><span class="annottext">Eq EntityType
EntityType -&gt; EntityType -&gt; Bool
EntityType -&gt; EntityType -&gt; Ordering
EntityType -&gt; EntityType -&gt; EntityType
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: EntityType -&gt; EntityType -&gt; EntityType
$cmin :: EntityType -&gt; EntityType -&gt; EntityType
max :: EntityType -&gt; EntityType -&gt; EntityType
$cmax :: EntityType -&gt; EntityType -&gt; EntityType
&gt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&gt;= :: EntityType -&gt; EntityType -&gt; Bool
&gt; :: EntityType -&gt; EntityType -&gt; Bool
$c&gt; :: EntityType -&gt; EntityType -&gt; Bool
&lt;= :: EntityType -&gt; EntityType -&gt; Bool
$c&lt;= :: EntityType -&gt; EntityType -&gt; Bool
&lt; :: EntityType -&gt; EntityType -&gt; Bool
$c&lt; :: EntityType -&gt; EntityType -&gt; Bool
compare :: EntityType -&gt; EntityType -&gt; Ordering
$ccompare :: EntityType -&gt; EntityType -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679385017"><span id="local-6989586621679385019"><span id="local-6989586621679385021"><span class="annot"><span class="annottext">Int -&gt; EntityType -&gt; ShowS
[EntityType] -&gt; ShowS
EntityType -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EntityType] -&gt; ShowS
$cshowList :: [EntityType] -&gt; ShowS
show :: EntityType -&gt; String
$cshow :: EntityType -&gt; String
showsPrec :: Int -&gt; EntityType -&gt; ShowS
$cshowsPrec :: Int -&gt; EntityType -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679385010"><span id="local-6989586621679385012"><span id="local-6989586621679385014"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-489"></span><span>  </span><span id="local-6989586621679385001"><span class="annot"><span class="annottext">toJSON :: EntityType -&gt; Value
</span><a href="#local-6989586621679385001"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-490"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-491"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span>
</span><span id="line-492"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span>
</span><span id="line-493"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span>
</span><span id="line-494"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span>
</span><span id="line-495"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span>
</span><span id="line-497"></span><span>      </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384998"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#EntityType"><span class="hs-identifier hs-type">EntityType</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-500"></span><span>  </span><span id="local-6989586621679384972"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser EntityType
</span><a href="#local-6989586621679384972"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EntityType&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-501"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;term_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#TermComponentType"><span class="hs-identifier hs-var">TermComponentType</span></a></span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;decl_component&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#DeclComponentType"><span class="hs-identifier hs-var">DeclComponentType</span></a></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchType"><span class="hs-identifier hs-var">PatchType</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;patch_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#PatchDiffType"><span class="hs-identifier hs-var">PatchDiffType</span></a></span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceType"><span class="hs-identifier hs-var">NamespaceType</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;namespace_diff&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#NamespaceDiffType"><span class="hs-identifier hs-var">NamespaceDiffType</span></a></span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;causal&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EntityType
</span><a href="Unison.Sync.Types.html#CausalType"><span class="hs-identifier hs-var">CausalType</span></a></span><span>
</span><span id="line-508"></span><span>    </span><span id="local-6989586621679384971"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384971"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected entity type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384971"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- Request/response types</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- Get causal hash by path</span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-keyword">newtype</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-var">GetCausalHashByPathRequest</span></a></span></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AGetCausalHashByPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384960"><span id="local-6989586621679384962"><span id="local-6989586621679384966"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
[GetCausalHashByPathRequest] -&gt; ShowS
GetCausalHashByPathRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GetCausalHashByPathRequest] -&gt; ShowS
$cshowList :: [GetCausalHashByPathRequest] -&gt; ShowS
show :: GetCausalHashByPathRequest -&gt; String
$cshow :: GetCausalHashByPathRequest -&gt; String
showsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; GetCausalHashByPathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384955"><span id="local-6989586621679384958"><span class="annot"><span class="annottext">GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c/= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c== :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384934"><span id="local-6989586621679384936"><span id="local-6989586621679384939"><span id="local-6989586621679384942"><span id="local-6989586621679384945"><span id="local-6989586621679384948"><span id="local-6989586621679384951"><span class="annot"><span class="annottext">Eq GetCausalHashByPathRequest
GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmin :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
max :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
$cmax :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest
&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&gt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt;= :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
$c&lt; :: GetCausalHashByPathRequest -&gt; GetCausalHashByPathRequest -&gt; Bool
compare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
$ccompare :: GetCausalHashByPathRequest
-&gt; GetCausalHashByPathRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384927"><span id="local-6989586621679384929"><span id="local-6989586621679384931"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-522"></span><span>  </span><span id="local-6989586621679384923"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathRequest -&gt; Value
</span><a href="#local-6989586621679384923"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span id="local-6989586621679384922"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384922"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-523"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384922"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-525"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384919"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-528"></span><span>  </span><span id="local-6989586621679384915"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathRequest
</span><a href="#local-6989586621679384915"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384914"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384914"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-529"></span><span>    </span><span id="local-6989586621679384913"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384913"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384914"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathRequest"><span class="hs-identifier hs-type">GetCausalHashByPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:GetCausalHashByPathRequest :: Path
</span><a href="#local-6989586621679384913"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="hs-keyword">data</span><span> </span><span id="GetCausalHashByPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-var">GetCausalHashByPathResponse</span></a></span></span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="GetCausalHashByPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span></span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GetCausalHashByPathInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384894"><span id="local-6989586621679384896"><span id="local-6989586621679384907"><span class="annot"><span class="annottext">Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
[GetCausalHashByPathResponse] -&gt; ShowS
GetCausalHashByPathResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GetCausalHashByPathResponse] -&gt; ShowS
$cshowList :: [GetCausalHashByPathResponse] -&gt; ShowS
show :: GetCausalHashByPathResponse -&gt; String
$cshow :: GetCausalHashByPathResponse -&gt; String
showsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; GetCausalHashByPathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384883"><span id="local-6989586621679384891"><span class="annot"><span class="annottext">GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c/= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c== :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384860"><span id="local-6989586621679384862"><span id="local-6989586621679384864"><span id="local-6989586621679384866"><span id="local-6989586621679384868"><span id="local-6989586621679384870"><span id="local-6989586621679384878"><span class="annot"><span class="annottext">Eq GetCausalHashByPathResponse
GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmin :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
max :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
$cmax :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse
&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&gt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt;= :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
$c&lt; :: GetCausalHashByPathResponse -&gt; GetCausalHashByPathResponse -&gt; Bool
compare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
$ccompare :: GetCausalHashByPathResponse
-&gt; GetCausalHashByPathResponse -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384852"><span id="local-6989586621679384854"><span id="local-6989586621679384856"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-540"></span><span>  </span><span id="local-6989586621679384837"><span class="annot"><span class="annottext">toJSON :: GetCausalHashByPathResponse -&gt; Value
</span><a href="#local-6989586621679384837"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-541"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-type">GetCausalHashByPathSuccess</span></a></span><span> </span><span id="local-6989586621679384836"><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679384836"><span class="hs-identifier hs-var">hashJWT</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT
</span><a href="#local-6989586621679384836"><span class="hs-identifier hs-var">hashJWT</span></a></span><span>
</span><span id="line-542"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-type">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span id="local-6989586621679384834"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384834"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384834"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-type">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679384833"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384833"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679384832"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384832"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384833"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384832"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384829"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#GetCausalHashByPathResponse"><span class="hs-identifier hs-type">GetCausalHashByPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-547"></span><span>  </span><span id="local-6989586621679384799"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser GetCausalHashByPathResponse
</span><a href="#local-6989586621679384799"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GetCausalHashByPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384798"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384798"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-548"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384798"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe HashJWT -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathSuccess"><span class="hs-identifier hs-var">GetCausalHashByPathSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384798"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-550"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Path -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathNoReadPermission"><span class="hs-identifier hs-var">GetCausalHashByPathNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384798"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-551"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathUserNotFound"><span class="hs-identifier hs-var">GetCausalHashByPathUserNotFound</span></a></span><span>
</span><span id="line-552"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; GetCausalHashByPathResponse
</span><a href="Unison.Sync.Types.html#GetCausalHashByPathInvalidRepoInfo"><span class="hs-identifier hs-var">GetCausalHashByPathInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384798"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-553"></span><span>      </span><span id="local-6989586621679384796"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384796"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected GetCausalHashByPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384796"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-556"></span><span class="hs-comment">-- Download entities</span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-var">DownloadEntitiesRequest</span></a></span></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-560"></span><span>    </span><span id="%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; NESet HashJWT
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3ADownloadEntitiesRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-561"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384782"><span id="local-6989586621679384784"><span id="local-6989586621679384791"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesRequest -&gt; ShowS
[DownloadEntitiesRequest] -&gt; ShowS
DownloadEntitiesRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DownloadEntitiesRequest] -&gt; ShowS
$cshowList :: [DownloadEntitiesRequest] -&gt; ShowS
show :: DownloadEntitiesRequest -&gt; String
$cshow :: DownloadEntitiesRequest -&gt; String
showsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; DownloadEntitiesRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384774"><span id="local-6989586621679384780"><span class="annot"><span class="annottext">DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c/= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c== :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384748"><span id="local-6989586621679384750"><span id="local-6989586621679384753"><span id="local-6989586621679384756"><span id="local-6989586621679384759"><span id="local-6989586621679384764"><span id="local-6989586621679384770"><span class="annot"><span class="annottext">Eq DownloadEntitiesRequest
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmin :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
max :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
$cmax :: DownloadEntitiesRequest
-&gt; DownloadEntitiesRequest -&gt; DownloadEntitiesRequest
&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&gt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt;= :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
$c&lt; :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Bool
compare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
$ccompare :: DownloadEntitiesRequest -&gt; DownloadEntitiesRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384741"><span id="local-6989586621679384743"><span id="local-6989586621679384745"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-565"></span><span>  </span><span id="local-6989586621679384732"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesRequest -&gt; Value
</span><a href="#local-6989586621679384732"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679384731"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384731"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679384730"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679384730"><span class="hs-identifier hs-var">hashes</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-567"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384731"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-568"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679384730"><span class="hs-identifier hs-var">hashes</span></a></span><span>
</span><span id="line-569"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384727"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-572"></span><span>  </span><span id="local-6989586621679384709"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesRequest
</span><a href="#local-6989586621679384709"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384708"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384708"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-573"></span><span>    </span><span id="local-6989586621679384707"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384707"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-574"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384708"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-575"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-576"></span><span>        </span><span id="local-6989586621679384705"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384705"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384708"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-577"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384705"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-578"></span><span>    </span><span id="local-6989586621679384704"><span class="annot"><span class="annottext">NESet HashJWT
</span><a href="#local-6989586621679384704"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384708"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesRequest"><span class="hs-identifier hs-type">DownloadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet HashJWT
RepoInfo
hashes :: NESet HashJWT
repoInfo :: RepoInfo
$sel:hashes:DownloadEntitiesRequest :: NESet HashJWT
$sel:repoInfo:DownloadEntitiesRequest :: RepoInfo
</span><a href="#local-6989586621679384704"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-var">DownloadEntitiesResponse</span></a></span></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DownloadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-type">DownloadEntitiesError</span></a></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span class="hs-keyword">data</span><span> </span><span id="DownloadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesError"><span class="hs-identifier hs-var">DownloadEntitiesError</span></a></span></span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DownloadEntitiesNoReadPermission"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-587"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | msg, repoInfo</span><span>
</span><span id="line-588"></span><span>    </span><span id="DownloadEntitiesInvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-589"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | userHandle</span><span>
</span><span id="line-590"></span><span>    </span><span id="DownloadEntitiesUserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | project shorthand</span><span>
</span><span id="line-592"></span><span>    </span><span id="DownloadEntitiesProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-593"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384689"><span id="local-6989586621679384696"><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c/= :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
$c== :: DownloadEntitiesError -&gt; DownloadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384674"><span id="local-6989586621679384676"><span id="local-6989586621679384687"><span class="annot"><span class="annottext">Int -&gt; DownloadEntitiesError -&gt; ShowS
[DownloadEntitiesError] -&gt; ShowS
DownloadEntitiesError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DownloadEntitiesError] -&gt; ShowS
$cshowList :: [DownloadEntitiesError] -&gt; ShowS
show :: DownloadEntitiesError -&gt; String
$cshow :: DownloadEntitiesError -&gt; String
showsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
$cshowsPrec :: Int -&gt; DownloadEntitiesError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384667"><span id="local-6989586621679384669"><span id="local-6989586621679384671"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-596"></span><span>  </span><span id="local-6989586621679384648"><span class="annot"><span class="annottext">toJSON :: DownloadEntitiesResponse -&gt; Value
</span><a href="#local-6989586621679384648"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-597"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-type">DownloadEntitiesSuccess</span></a></span><span> </span><span id="local-6989586621679384647"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679384647"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
</span><a href="#local-6989586621679384647"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-type">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span id="local-6989586621679384646"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384646"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384646"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-type">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679384645"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384645"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679384644"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384644"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384645"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384644"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-type">DownloadEntitiesUserNotFound</span></a></span><span> </span><span id="local-6989586621679384643"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384643"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384643"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-type">DownloadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-type">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span id="local-6989586621679384642"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384642"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384642"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384639"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#DownloadEntitiesResponse"><span class="hs-identifier hs-type">DownloadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>  </span><span id="local-6989586621679384596"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser DownloadEntitiesResponse
</span><a href="#local-6989586621679384596"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DownloadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384595"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-605"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-606"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 HashJWT)
-&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesSuccess"><span class="hs-identifier hs-var">DownloadEntitiesSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-607"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_read_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesNoReadPermission"><span class="hs-identifier hs-var">DownloadEntitiesNoReadPermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesInvalidRepoInfo"><span class="hs-identifier hs-var">DownloadEntitiesInvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesUserNotFound"><span class="hs-identifier hs-var">DownloadEntitiesUserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-610"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DownloadEntitiesError -&gt; DownloadEntitiesResponse
</span><a href="Unison.Sync.Types.html#DownloadEntitiesFailure"><span class="hs-identifier hs-var">DownloadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; DownloadEntitiesError
</span><a href="Unison.Sync.Types.html#DownloadEntitiesProjectNotFound"><span class="hs-identifier hs-var">DownloadEntitiesProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384595"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-611"></span><span>      </span><span id="local-6989586621679384594"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384594"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected DownloadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384594"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-614"></span><span class="hs-comment">-- Upload entities</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesRequest"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-var">UploadEntitiesRequest</span></a></span></span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#%24sel%3ArepoInfo%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-618"></span><span>    </span><span id="%24sel%3Aentities%3AUploadEntitiesRequest"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="Unison.Sync.Types.html#%24sel%3Aentities%3AUploadEntitiesRequest"><span class="hs-identifier hs-var hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#Entity"><span class="hs-identifier hs-type">Entity</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384579"><span id="local-6989586621679384581"><span id="local-6989586621679384589"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesRequest -&gt; ShowS
[UploadEntitiesRequest] -&gt; ShowS
UploadEntitiesRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesRequest] -&gt; ShowS
$cshowList :: [UploadEntitiesRequest] -&gt; ShowS
show :: UploadEntitiesRequest -&gt; String
$cshow :: UploadEntitiesRequest -&gt; String
showsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384568"><span id="local-6989586621679384575"><span class="annot"><span class="annottext">UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c/= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c== :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384538"><span id="local-6989586621679384540"><span id="local-6989586621679384543"><span id="local-6989586621679384546"><span id="local-6989586621679384549"><span id="local-6989586621679384555"><span id="local-6989586621679384562"><span class="annot"><span class="annottext">Eq UploadEntitiesRequest
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmin :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
max :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
$cmax :: UploadEntitiesRequest
-&gt; UploadEntitiesRequest -&gt; UploadEntitiesRequest
&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&gt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt;= :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
$c&lt; :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Bool
compare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
$ccompare :: UploadEntitiesRequest -&gt; UploadEntitiesRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384529"><span id="local-6989586621679384531"><span id="local-6989586621679384533"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-623"></span><span>  </span><span id="local-6989586621679384517"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesRequest -&gt; Value
</span><a href="#local-6989586621679384517"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span id="local-6989586621679384516"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384516"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span id="local-6989586621679384515"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679384515"><span class="hs-identifier hs-var">entities</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-624"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-625"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384516"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-626"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;entities&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679384515"><span class="hs-identifier hs-var">entities</span></a></span><span>
</span><span id="line-627"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-628"></span><span>
</span><span id="line-629"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384512"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-630"></span><span>  </span><span id="local-6989586621679384493"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesRequest
</span><a href="#local-6989586621679384493"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384492"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384492"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-631"></span><span>    </span><span id="local-6989586621679384491"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384491"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-632"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384492"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-633"></span><span>        </span><span class="hs-comment">-- Back-compat by converting old 'repo_name' fields into the new 'repo_info' format.</span><span>
</span><span id="line-634"></span><span>        </span><span id="local-6989586621679384490"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384490"><span class="hs-identifier hs-var">repoName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384492"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;repo_name&quot;</span></span><span>
</span><span id="line-635"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; RepoInfo
</span><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-var">RepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384490"><span class="hs-identifier hs-var">repoName</span></a></span><span>
</span><span id="line-636"></span><span>    </span><span id="local-6989586621679384489"><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
</span><a href="#local-6989586621679384489"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384492"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;entities&quot;</span></span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesRequest"><span class="hs-identifier hs-type">UploadEntitiesRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NEMap Hash32 (Entity Text Hash32 Hash32)
RepoInfo
entities :: NEMap Hash32 (Entity Text Hash32 Hash32)
repoInfo :: RepoInfo
$sel:entities:UploadEntitiesRequest :: NEMap Hash32 (Entity Text Hash32 Hash32)
$sel:repoInfo:UploadEntitiesRequest :: RepoInfo
</span><a href="#local-6989586621679384489"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-638"></span><span>
</span><span id="line-639"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesResponse"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-var">UploadEntitiesResponse</span></a></span></span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span></span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesFailure"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-type">UploadEntitiesError</span></a></span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384479"><span id="local-6989586621679384481"><span id="local-6989586621679384485"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesResponse -&gt; ShowS
[UploadEntitiesResponse] -&gt; ShowS
UploadEntitiesResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesResponse] -&gt; ShowS
$cshowList :: [UploadEntitiesResponse] -&gt; ShowS
show :: UploadEntitiesResponse -&gt; String
$cshow :: UploadEntitiesResponse -&gt; String
showsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384474"><span id="local-6989586621679384477"><span class="annot"><span class="annottext">UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c/= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c== :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384453"><span id="local-6989586621679384455"><span id="local-6989586621679384458"><span id="local-6989586621679384461"><span id="local-6989586621679384464"><span id="local-6989586621679384467"><span id="local-6989586621679384470"><span class="annot"><span class="annottext">Eq UploadEntitiesResponse
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmin :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
max :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
$cmax :: UploadEntitiesResponse
-&gt; UploadEntitiesResponse -&gt; UploadEntitiesResponse
&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&gt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt;= :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
$c&lt; :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Bool
compare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
$ccompare :: UploadEntitiesResponse -&gt; UploadEntitiesResponse -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="hs-keyword">data</span><span> </span><span id="UploadEntitiesError"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError"><span class="hs-identifier hs-var">UploadEntitiesError</span></a></span></span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UploadEntitiesError%27HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | msg, repoInfo</span><span>
</span><span id="line-647"></span><span>    </span><span id="UploadEntitiesError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-648"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UploadEntitiesError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | project shorthand</span><span>
</span><span id="line-651"></span><span>    </span><span id="UploadEntitiesError%27ProjectNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-652"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | userHandle</span><span>
</span><span id="line-653"></span><span>    </span><span id="UploadEntitiesError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384427"><span id="local-6989586621679384429"><span id="local-6989586621679384445"><span class="annot"><span class="annottext">Int -&gt; UploadEntitiesError -&gt; ShowS
[UploadEntitiesError] -&gt; ShowS
UploadEntitiesError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UploadEntitiesError] -&gt; ShowS
$cshowList :: [UploadEntitiesError] -&gt; ShowS
show :: UploadEntitiesError -&gt; String
$cshow :: UploadEntitiesError -&gt; String
showsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
$cshowsPrec :: Int -&gt; UploadEntitiesError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384415"><span id="local-6989586621679384425"><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c/= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c== :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384391"><span id="local-6989586621679384393"><span id="local-6989586621679384395"><span id="local-6989586621679384397"><span id="local-6989586621679384399"><span id="local-6989586621679384401"><span id="local-6989586621679384411"><span class="annot"><span class="annottext">Eq UploadEntitiesError
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmin :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
max :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
$cmax :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; UploadEntitiesError
&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&gt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt;= :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
$c&lt; :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Bool
compare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
$ccompare :: UploadEntitiesError -&gt; UploadEntitiesError -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatchForEntity"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span></span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Asupplied%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Asupplied%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">supplied</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-658"></span><span>    </span><span id="%24sel%3Acomputed%3AHashMismatchForEntity"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Acomputed%3AHashMismatchForEntity"><span class="hs-identifier hs-var hs-var">computed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-659"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-660"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384379"><span id="local-6989586621679384381"><span id="local-6989586621679384386"><span class="annot"><span class="annottext">Int -&gt; HashMismatchForEntity -&gt; ShowS
[HashMismatchForEntity] -&gt; ShowS
HashMismatchForEntity -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashMismatchForEntity] -&gt; ShowS
$cshowList :: [HashMismatchForEntity] -&gt; ShowS
show :: HashMismatchForEntity -&gt; String
$cshow :: HashMismatchForEntity -&gt; String
showsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
$cshowsPrec :: Int -&gt; HashMismatchForEntity -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384373"><span id="local-6989586621679384377"><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c/= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c== :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384350"><span id="local-6989586621679384352"><span id="local-6989586621679384355"><span id="local-6989586621679384358"><span id="local-6989586621679384361"><span id="local-6989586621679384365"><span id="local-6989586621679384369"><span class="annot"><span class="annottext">Eq HashMismatchForEntity
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmin :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
max :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
$cmax :: HashMismatchForEntity
-&gt; HashMismatchForEntity -&gt; HashMismatchForEntity
&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&gt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt;= :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
$c&lt; :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Bool
compare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
$ccompare :: HashMismatchForEntity -&gt; HashMismatchForEntity -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384343"><span id="local-6989586621679384345"><span id="local-6989586621679384347"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-663"></span><span>  </span><span id="local-6989586621679384323"><span class="annot"><span class="annottext">toJSON :: UploadEntitiesResponse -&gt; Value
</span><a href="#local-6989586621679384323"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-664"></span><span>    </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-type">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679384321"><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679384321"><span class="hs-identifier hs-var">mismatch</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity
</span><a href="#local-6989586621679384321"><span class="hs-identifier hs-var">mismatch</span></a></span><span>
</span><span id="line-667"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679384320"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384320"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679384319"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384319"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-668"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384320"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384319"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-type">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span id="local-6989586621679384318"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679384318"><span class="hs-identifier hs-var">nd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679384318"><span class="hs-identifier hs-var">nd</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-type">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679384317"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384317"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384317"><span class="hs-identifier hs-var">repoInfo</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span id="local-6989586621679384316"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384316"><span class="hs-identifier hs-var">projectShorthand</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-672"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384316"><span class="hs-identifier hs-var">projectShorthand</span></a></span><span>
</span><span id="line-673"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-type">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-type">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span id="local-6989586621679384315"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384315"><span class="hs-identifier hs-var">userHandle</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384315"><span class="hs-identifier hs-var">userHandle</span></a></span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384312"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UploadEntitiesResponse"><span class="hs-identifier hs-type">UploadEntitiesResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-676"></span><span>  </span><span id="local-6989586621679384268"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UploadEntitiesResponse
</span><a href="#local-6989586621679384268"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UploadEntitiesResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384267"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-677"></span><span>    </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-678"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesSuccess"><span class="hs-identifier hs-var">UploadEntitiesSuccess</span></a></span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;need_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NeedDependencies"><span class="hs-identifier hs-var">UploadEntitiesError'NeedDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-680"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27NoWritePermission"><span class="hs-identifier hs-var">UploadEntitiesError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-681"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch_for_entity&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-682"></span><span>        </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatchForEntity -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27HashMismatchForEntity"><span class="hs-identifier hs-var">UploadEntitiesError'HashMismatchForEntity</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-683"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-684"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679384266"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384266"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384265"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384265"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-685"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UploadEntitiesError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384266"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384265"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27UserNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'UserNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-687"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;project_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UploadEntitiesError -&gt; UploadEntitiesResponse
</span><a href="Unison.Sync.Types.html#UploadEntitiesFailure"><span class="hs-identifier hs-var">UploadEntitiesFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; UploadEntitiesError
</span><a href="Unison.Sync.Types.html#UploadEntitiesError%27ProjectNotFound"><span class="hs-identifier hs-var">UploadEntitiesError'ProjectNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384267"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-688"></span><span>      </span><span id="local-6989586621679384264"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384264"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UploadEntitiesResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384264"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384257"><span id="local-6989586621679384259"><span id="local-6989586621679384261"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-691"></span><span>  </span><span id="local-6989586621679384250"><span class="annot"><span class="annottext">toJSON :: HashMismatchForEntity -&gt; Value
</span><a href="#local-6989586621679384250"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span><span> </span><span id="local-6989586621679384249"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384249"><span class="hs-identifier hs-var">supplied</span></a></span></span><span> </span><span id="local-6989586621679384248"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384248"><span class="hs-identifier hs-var">computed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-692"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-693"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;supplied&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384249"><span class="hs-identifier hs-var">supplied</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-694"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;computed&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384248"><span class="hs-identifier hs-var">computed</span></a></span><span>
</span><span id="line-695"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384245"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-type">HashMismatchForEntity</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-698"></span><span>  </span><span id="local-6989586621679384238"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatchForEntity
</span><a href="#local-6989586621679384238"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatchForEntity&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384237"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384237"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-700"></span><span>      </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; HashMismatchForEntity
</span><a href="Unison.Sync.Types.html#HashMismatchForEntity"><span class="hs-identifier hs-var">HashMismatchForEntity</span></a></span><span>
</span><span id="line-701"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384237"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;supplied&quot;</span></span><span>
</span><span id="line-702"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384237"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;computed&quot;</span></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-705"></span><span class="hs-comment">-- Fast-forward path</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="hs-comment">-- | A non-empty list of causal hashes, latest first, that show the lineage from wherever the client wants to</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- fast-forward to back to wherever the (client believes the) server is (including the server head, in a separate</span><span>
</span><span id="line-709"></span><span class="hs-comment">-- field).</span><span>
</span><span id="line-710"></span><span class="hs-comment">--</span><span>
</span><span id="line-711"></span><span class="hs-comment">-- For example, if the client wants to update</span><span>
</span><span id="line-712"></span><span class="hs-comment">--</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-714"></span><span class="hs-comment">-- A -&gt; B -&gt; C</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-716"></span><span class="hs-comment">--</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- to</span><span>
</span><span id="line-718"></span><span class="hs-comment">--</span><span>
</span><span id="line-719"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-720"></span><span class="hs-comment">-- A -&gt; B -&gt; C -&gt; D -&gt; E -&gt; F</span><span>
</span><span id="line-721"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-722"></span><span class="hs-comment">--</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- then it would send hashes</span><span>
</span><span id="line-724"></span><span class="hs-comment">--</span><span>
</span><span id="line-725"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-726"></span><span class="hs-comment">-- expectedHash = C</span><span>
</span><span id="line-727"></span><span class="hs-comment">-- hashes = [D, E, F]</span><span>
</span><span id="line-728"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-729"></span><span class="hs-comment">--</span><span>
</span><span id="line-730"></span><span class="hs-comment">-- Note that if the client wants to begin a history at a new path on the server, it would use the &quot;update path&quot; endpoint</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- instead.</span><span>
</span><span id="line-732"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-var">FastForwardPathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathRequest"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-var">FastForwardPathRequest</span></a></span></span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The causal that the client believes exists at `path`</span><span>
</span><span id="line-734"></span><span>    </span><span id="%24sel%3AexpectedHash%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-735"></span><span>    </span><span class="hs-comment">-- | The sequence of causals to fast-forward with, starting from the oldest new causal to the newest new causal</span><span>
</span><span id="line-736"></span><span>    </span><span id="%24sel%3Ahashes%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; NonEmpty Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Ahashes%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-737"></span><span>    </span><span class="hs-comment">-- | The path to fast-forward</span><span>
</span><span id="line-738"></span><span>    </span><span id="%24sel%3Apath%3AFastForwardPathRequest"><span class="annot"><span class="annottext">FastForwardPathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AFastForwardPathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-740"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384223"><span id="local-6989586621679384225"><span id="local-6989586621679384231"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathRequest -&gt; ShowS
[FastForwardPathRequest] -&gt; ShowS
FastForwardPathRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathRequest] -&gt; ShowS
$cshowList :: [FastForwardPathRequest] -&gt; ShowS
show :: FastForwardPathRequest -&gt; String
$cshow :: FastForwardPathRequest -&gt; String
showsPrec :: Int -&gt; FastForwardPathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384216"><span id="local-6989586621679384218"><span id="local-6989586621679384220"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-743"></span><span>  </span><span id="local-6989586621679384206"><span class="annot"><span class="annottext">toJSON :: FastForwardPathRequest -&gt; Value
</span><a href="#local-6989586621679384206"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679384205"><span class="annot"><span class="annottext">Hash32
expectedHash :: Hash32
$sel:expectedHash:FastForwardPathRequest :: FastForwardPathRequest -&gt; Hash32
</span><a href="#local-6989586621679384205"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384204"><span class="annot"><span class="annottext">NonEmpty Hash32
hashes :: NonEmpty Hash32
$sel:hashes:FastForwardPathRequest :: FastForwardPathRequest -&gt; NonEmpty Hash32
</span><a href="#local-6989586621679384204"><span class="hs-identifier hs-var hs-var">hashes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384203"><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:FastForwardPathRequest :: FastForwardPathRequest -&gt; Path
</span><a href="#local-6989586621679384203"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-744"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-745"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384205"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-746"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Hash32
</span><a href="#local-6989586621679384204"><span class="hs-identifier hs-var">hashes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-747"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384203"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-748"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384200"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-751"></span><span>  </span><span id="local-6989586621679384190"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser FastForwardPathRequest
</span><a href="#local-6989586621679384190"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-752"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FastForwardPathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384189"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384189"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-753"></span><span>      </span><span id="local-6989586621679384188"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384188"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384189"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-754"></span><span>      </span><span id="local-6989586621679384187"><span class="annot"><span class="annottext">NonEmpty Hash32
</span><a href="#local-6989586621679384187"><span class="hs-identifier hs-var">hashes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384189"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;hashes&quot;</span></span><span>
</span><span id="line-755"></span><span>      </span><span id="local-6989586621679384186"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384186"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384189"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-756"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathRequest"><span class="hs-identifier hs-type">FastForwardPathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Hash32
expectedHash :: Hash32
$sel:expectedHash:FastForwardPathRequest :: Hash32
</span><a href="#local-6989586621679384188"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonEmpty Hash32
hashes :: NonEmpty Hash32
$sel:hashes:FastForwardPathRequest :: NonEmpty Hash32
</span><a href="#local-6989586621679384187"><span class="hs-identifier hs-var hs-var">hashes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
path :: Path
$sel:path:FastForwardPathRequest :: Path
</span><a href="#local-6989586621679384186"><span class="hs-identifier hs-var hs-var">path</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathResponse"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-var">FastForwardPathResponse</span></a></span></span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span></span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathFailure"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier hs-type">FastForwardPathError</span></a></span><span>
</span><span id="line-761"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384176"><span id="local-6989586621679384178"><span id="local-6989586621679384182"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathResponse -&gt; ShowS
[FastForwardPathResponse] -&gt; ShowS
FastForwardPathResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathResponse] -&gt; ShowS
$cshowList :: [FastForwardPathResponse] -&gt; ShowS
show :: FastForwardPathResponse -&gt; String
$cshow :: FastForwardPathResponse -&gt; String
showsPrec :: Int -&gt; FastForwardPathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="hs-keyword">data</span><span> </span><span id="FastForwardPathError"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError"><span class="hs-identifier hs-var">FastForwardPathError</span></a></span></span><span>
</span><span id="line-764"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FastForwardPathError%27MissingDependencies"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-var">FastForwardPathError'MissingDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-var">FastForwardPathError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This wasn't a fast-forward. Here's a JWT to download the causal head, if you want it.</span><span>
</span><span id="line-767"></span><span>    </span><span id="FastForwardPathError%27NotFastForward"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-var">FastForwardPathError'NotFastForward</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HashJWT</span></span><span>
</span><span id="line-768"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | There was no history at this path; the client should use the &quot;update path&quot; endpoint instead.</span><span>
</span><span id="line-769"></span><span>    </span><span id="FastForwardPathError%27NoHistory"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span></span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | This wasn't a fast-forward. You said the first hash was a parent of the second hash, but I disagree.</span><span>
</span><span id="line-771"></span><span>    </span><span id="FastForwardPathError%27InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-var">FastForwardPathError'InvalidParentage</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span>
</span><span id="line-772"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">FastForwardPathError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FastForwardPathError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span></span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384151"><span id="local-6989586621679384153"><span id="local-6989586621679384167"><span class="annot"><span class="annottext">Int -&gt; FastForwardPathError -&gt; ShowS
[FastForwardPathError] -&gt; ShowS
FastForwardPathError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [FastForwardPathError] -&gt; ShowS
$cshowList :: [FastForwardPathError] -&gt; ShowS
show :: FastForwardPathError -&gt; String
$cshow :: FastForwardPathError -&gt; String
showsPrec :: Int -&gt; FastForwardPathError -&gt; ShowS
$cshowsPrec :: Int -&gt; FastForwardPathError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span class="hs-keyword">data</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="InvalidParentage"><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3Aparent%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Aparent%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span id="%24sel%3Achild%3AInvalidParentage"><span class="annot"><span class="annottext">InvalidParentage -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3Achild%3AInvalidParentage"><span class="hs-identifier hs-var hs-var">child</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">}</span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384139"><span id="local-6989586621679384141"><span id="local-6989586621679384146"><span class="annot"><span class="annottext">Int -&gt; InvalidParentage -&gt; ShowS
[InvalidParentage] -&gt; ShowS
InvalidParentage -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [InvalidParentage] -&gt; ShowS
$cshowList :: [InvalidParentage] -&gt; ShowS
show :: InvalidParentage -&gt; String
$cshow :: InvalidParentage -&gt; String
showsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
$cshowsPrec :: Int -&gt; InvalidParentage -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384132"><span id="local-6989586621679384134"><span id="local-6989586621679384136"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-type">FastForwardPathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-780"></span><span>  </span><span id="local-6989586621679384109"><span class="annot"><span class="annottext">toJSON :: FastForwardPathResponse -&gt; Value
</span><a href="#local-6989586621679384109"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-781"></span><span>    </span><span class="annot"><span class="annottext">FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-type">FastForwardPathError'MissingDependencies</span></a></span><span> </span><span id="local-6989586621679384108"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679384108"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679384108"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-type">FastForwardPathError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679384107"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384107"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679384107"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-type">FastForwardPathError'NotFastForward</span></a></span><span> </span><span id="local-6989586621679384106"><span class="annot"><span class="annottext">HashJWT
</span><a href="#local-6989586621679384106"><span class="hs-identifier hs-var">hashJwt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not_fast_forward&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashJWT
</span><a href="#local-6989586621679384106"><span class="hs-identifier hs-var">hashJwt</span></a></span><span>
</span><span id="line-785"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_history&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-type">FastForwardPathError'InvalidParentage</span></a></span><span> </span><span id="local-6989586621679384105"><span class="annot"><span class="annottext">InvalidParentage
</span><a href="#local-6989586621679384105"><span class="hs-identifier hs-var">invalidParentage</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-787"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_parentage&quot;</span></span><span> </span><span class="annot"><span class="annottext">InvalidParentage
</span><a href="#local-6989586621679384105"><span class="hs-identifier hs-var">invalidParentage</span></a></span><span>
</span><span id="line-788"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-type">FastForwardPathError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679384104"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384104"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679384103"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384103"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-789"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384104"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384103"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-type">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-791"></span><span>      </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384100"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#FastForwardPathResponse"><span class="hs-identifier hs-type">FastForwardPathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-794"></span><span>  </span><span id="local-6989586621679384054"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser FastForwardPathResponse
</span><a href="#local-6989586621679384054"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-795"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FastForwardPathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384053"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-796"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-797"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathSuccess"><span class="hs-identifier hs-var">FastForwardPathSuccess</span></a></span><span>
</span><span id="line-798"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27MissingDependencies"><span class="hs-identifier hs-var">FastForwardPathError'MissingDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-799"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoWritePermission"><span class="hs-identifier hs-var">FastForwardPathError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-800"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;not_fast_forward&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashJWT -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NotFastForward"><span class="hs-identifier hs-var">FastForwardPathError'NotFastForward</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-801"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_history&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27NoHistory"><span class="hs-identifier hs-var">FastForwardPathError'NoHistory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_parentage&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">InvalidParentage -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidParentage"><span class="hs-identifier hs-var">FastForwardPathError'InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-803"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-804"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679384052"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384052"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384051"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384051"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384053"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-805"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">FastForwardPathError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384052"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679384051"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastForwardPathError -&gt; FastForwardPathResponse
</span><a href="Unison.Sync.Types.html#FastForwardPathFailure"><span class="hs-identifier hs-var">FastForwardPathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">FastForwardPathError
</span><a href="Unison.Sync.Types.html#FastForwardPathError%27UserNotFound"><span class="hs-identifier hs-var">FastForwardPathError'UserNotFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>        </span><span id="local-6989586621679384050"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384050"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected FastForwardPathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679384050"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384043"><span id="local-6989586621679384045"><span id="local-6989586621679384047"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-810"></span><span>  </span><span id="local-6989586621679384036"><span class="annot"><span class="annottext">toJSON :: InvalidParentage -&gt; Value
</span><a href="#local-6989586621679384036"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span><span> </span><span id="local-6989586621679384035"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384035"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679384034"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384034"><span class="hs-identifier hs-var">child</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384035"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679384034"><span class="hs-identifier hs-var">child</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679384031"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-type">InvalidParentage</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-813"></span><span>  </span><span id="local-6989586621679384024"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser InvalidParentage
</span><a href="#local-6989586621679384024"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-814"></span><span>    </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;InvalidParentage&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679384023"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384023"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hash32 -&gt; Hash32 -&gt; InvalidParentage
</span><a href="Unison.Sync.Types.html#InvalidParentage"><span class="hs-identifier hs-var">InvalidParentage</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384023"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;parent&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679384023"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;child&quot;</span></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- Update path</span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathRequest"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-var">UpdatePathRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathRequest"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-var">UpdatePathRequest</span></a></span></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-821"></span><span>    </span><span id="%24sel%3AexpectedHash%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Nothing requires empty history at destination</span><span>
</span><span id="line-822"></span><span>    </span><span id="%24sel%3AnewHash%3AUpdatePathRequest"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AnewHash%3AUpdatePathRequest"><span class="hs-identifier hs-var hs-var">newHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-824"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679384008"><span id="local-6989586621679384010"><span id="local-6989586621679384017"><span class="annot"><span class="annottext">Int -&gt; UpdatePathRequest -&gt; ShowS
[UpdatePathRequest] -&gt; ShowS
UpdatePathRequest -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathRequest] -&gt; ShowS
$cshowList :: [UpdatePathRequest] -&gt; ShowS
show :: UpdatePathRequest -&gt; String
$cshow :: UpdatePathRequest -&gt; String
showsPrec :: Int -&gt; UpdatePathRequest -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathRequest -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679384000"><span id="local-6989586621679384006"><span class="annot"><span class="annottext">UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c/= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
== :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c== :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383973"><span id="local-6989586621679383975"><span id="local-6989586621679383978"><span id="local-6989586621679383981"><span id="local-6989586621679383984"><span id="local-6989586621679383990"><span id="local-6989586621679383996"><span class="annot"><span class="annottext">Eq UpdatePathRequest
UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
$cmin :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
max :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
$cmax :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; UpdatePathRequest
&gt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&gt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&gt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&gt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&lt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&lt;= :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
&lt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
$c&lt; :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Bool
compare :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
$ccompare :: UpdatePathRequest -&gt; UpdatePathRequest -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>
</span><span id="line-826"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383966"><span id="local-6989586621679383968"><span id="local-6989586621679383970"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-827"></span><span>  </span><span id="local-6989586621679383955"><span class="annot"><span class="annottext">toJSON :: UpdatePathRequest -&gt; Value
</span><a href="#local-6989586621679383955"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span><span> </span><span id="local-6989586621679383954"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383954"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679383953"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383953"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span id="local-6989586621679383952"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679383952"><span class="hs-identifier hs-var">newHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-828"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-829"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383954"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-830"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383953"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-831"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;new_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679383952"><span class="hs-identifier hs-var">newHash</span></a></span><span>
</span><span id="line-832"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383949"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-835"></span><span>  </span><span id="local-6989586621679383938"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UpdatePathRequest
</span><a href="#local-6989586621679383938"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdatePathRequest&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679383937"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383937"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-836"></span><span>    </span><span id="local-6989586621679383936"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383936"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383937"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-837"></span><span>    </span><span id="local-6989586621679383935"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383935"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383937"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-838"></span><span>    </span><span id="local-6989586621679383934"><span class="annot"><span class="annottext">Hash32
</span><a href="#local-6989586621679383934"><span class="hs-identifier hs-var">newHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383937"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;new_hash&quot;</span></span><span>
</span><span id="line-839"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathRequest"><span class="hs-identifier hs-type">UpdatePathRequest</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe Hash32
Hash32
Path
newHash :: Hash32
expectedHash :: Maybe Hash32
path :: Path
$sel:newHash:UpdatePathRequest :: Hash32
$sel:expectedHash:UpdatePathRequest :: Maybe Hash32
$sel:path:UpdatePathRequest :: Path
</span><a href="#local-6989586621679383934"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathResponse"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-var">UpdatePathResponse</span></a></span></span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathSuccess"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span></span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathFailure"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier hs-type">UpdatePathError</span></a></span><span>
</span><span id="line-844"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679383924"><span id="local-6989586621679383926"><span id="local-6989586621679383930"><span class="annot"><span class="annottext">Int -&gt; UpdatePathResponse -&gt; ShowS
[UpdatePathResponse] -&gt; ShowS
UpdatePathResponse -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathResponse] -&gt; ShowS
$cshowList :: [UpdatePathResponse] -&gt; ShowS
show :: UpdatePathResponse -&gt; String
$cshow :: UpdatePathResponse -&gt; String
showsPrec :: Int -&gt; UpdatePathResponse -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathResponse -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383919"><span id="local-6989586621679383922"><span class="annot"><span class="annottext">UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c/= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
== :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c== :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383898"><span id="local-6989586621679383900"><span id="local-6989586621679383903"><span id="local-6989586621679383906"><span id="local-6989586621679383909"><span id="local-6989586621679383912"><span id="local-6989586621679383915"><span class="annot"><span class="annottext">Eq UpdatePathResponse
UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
$cmin :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
max :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
$cmax :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; UpdatePathResponse
&gt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&gt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&gt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&gt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&lt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&lt;= :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
&lt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
$c&lt; :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Bool
compare :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
$ccompare :: UpdatePathResponse -&gt; UpdatePathResponse -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>
</span><span id="line-846"></span><span class="hs-keyword">data</span><span> </span><span id="UpdatePathError"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError"><span class="hs-identifier hs-var">UpdatePathError</span></a></span></span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UpdatePathError%27HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-var">UpdatePathError'HashMismatch</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span>
</span><span id="line-848"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27InvalidRepoInfo"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UpdatePathError'InvalidRepoInfo</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#RepoInfo"><span class="hs-identifier hs-type">RepoInfo</span></a></span><span> </span><span class="hs-comment">-- err msg, repo info</span><span>
</span><span id="line-849"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27MissingDependencies"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-var">UpdatePathError'MissingDependencies</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27NoWritePermission"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-var">UpdatePathError'NoWritePermission</span></a></span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UpdatePathError%27UserNotFound"><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span></span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679383877"><span id="local-6989586621679383879"><span id="local-6989586621679383891"><span class="annot"><span class="annottext">Int -&gt; UpdatePathError -&gt; ShowS
[UpdatePathError] -&gt; ShowS
UpdatePathError -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [UpdatePathError] -&gt; ShowS
$cshowList :: [UpdatePathError] -&gt; ShowS
show :: UpdatePathError -&gt; String
$cshow :: UpdatePathError -&gt; String
showsPrec :: Int -&gt; UpdatePathError -&gt; ShowS
$cshowsPrec :: Int -&gt; UpdatePathError -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383867"><span id="local-6989586621679383875"><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathError -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c/= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
== :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c== :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383845"><span id="local-6989586621679383847"><span id="local-6989586621679383849"><span id="local-6989586621679383851"><span id="local-6989586621679383853"><span id="local-6989586621679383855"><span id="local-6989586621679383863"><span class="annot"><span class="annottext">Eq UpdatePathError
UpdatePathError -&gt; UpdatePathError -&gt; Bool
UpdatePathError -&gt; UpdatePathError -&gt; Ordering
UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
$cmin :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
max :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
$cmax :: UpdatePathError -&gt; UpdatePathError -&gt; UpdatePathError
&gt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&gt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&gt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&gt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&lt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&lt;= :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
&lt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
$c&lt; :: UpdatePathError -&gt; UpdatePathError -&gt; Bool
compare :: UpdatePathError -&gt; UpdatePathError -&gt; Ordering
$ccompare :: UpdatePathError -&gt; UpdatePathError -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>
</span><span id="line-854"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383838"><span id="local-6989586621679383840"><span id="local-6989586621679383842"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-type">UpdatePathResponse</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-855"></span><span>  </span><span id="local-6989586621679383820"><span class="annot"><span class="annottext">toJSON :: UpdatePathResponse -&gt; Value
</span><a href="#local-6989586621679383820"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-856"></span><span>    </span><span class="annot"><span class="annottext">UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-type">UpdatePathError'HashMismatch</span></a></span><span> </span><span id="local-6989586621679383819"><span class="annot"><span class="annottext">HashMismatch
</span><a href="#local-6989586621679383819"><span class="hs-identifier hs-var">hm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch&quot;</span></span><span> </span><span class="annot"><span class="annottext">HashMismatch
</span><a href="#local-6989586621679383819"><span class="hs-identifier hs-var">hm</span></a></span><span>
</span><span id="line-858"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-type">UpdatePathError'MissingDependencies</span></a></span><span> </span><span id="local-6989586621679383818"><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679383818"><span class="hs-identifier hs-var">md</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32
</span><a href="#local-6989586621679383818"><span class="hs-identifier hs-var">md</span></a></span><span>
</span><span id="line-859"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-type">UpdatePathError'NoWritePermission</span></a></span><span> </span><span id="local-6989586621679383817"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383817"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383817"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-860"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-type">UpdatePathError'InvalidRepoInfo</span></a></span><span> </span><span id="local-6989586621679383816"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383816"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span> </span><span id="local-6989586621679383815"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679383815"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383816"><span class="hs-identifier hs-var">errMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679383815"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>    </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-type">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var">jsonUnion</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Value
</span><span class="hs-identifier hs-var">Object</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>
</span><span id="line-863"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383812"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#UpdatePathResponse"><span class="hs-identifier hs-type">UpdatePathResponse</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-864"></span><span>  </span><span id="local-6989586621679383774"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser UpdatePathResponse
</span><a href="#local-6989586621679383774"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span id="local-6989586621679383773"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679383773"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-865"></span><span>    </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679383773"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdatePathResponse&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679383771"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383771"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-866"></span><span>      </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383771"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withText</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-867"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;success&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathSuccess"><span class="hs-identifier hs-var">UpdatePathSuccess</span></a></span><span>
</span><span id="line-868"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash_mismatch&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashMismatch -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27HashMismatch"><span class="hs-identifier hs-var">UpdatePathError'HashMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383771"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-869"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NeedDependencies Hash32 -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27MissingDependencies"><span class="hs-identifier hs-var">UpdatePathError'MissingDependencies</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383771"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-870"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;no_write_permission&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27NoWritePermission"><span class="hs-identifier hs-var">UpdatePathError'NoWritePermission</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383771"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-871"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;invalid_repo_info&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-872"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679383770"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383770"><span class="hs-identifier hs-var">errMsg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383769"><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679383769"><span class="hs-identifier hs-var">repoInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383771"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span>
</span><span id="line-873"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; RepoInfo -&gt; UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27InvalidRepoInfo"><span class="hs-identifier hs-var">UpdatePathError'InvalidRepoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383770"><span class="hs-identifier hs-var">errMsg</span></a></span><span> </span><span class="annot"><span class="annottext">RepoInfo
</span><a href="#local-6989586621679383769"><span class="hs-identifier hs-var">repoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;user_not_found&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpdatePathError -&gt; UpdatePathResponse
</span><a href="Unison.Sync.Types.html#UpdatePathFailure"><span class="hs-identifier hs-var">UpdatePathFailure</span></a></span><span> </span><span class="annot"><span class="annottext">UpdatePathError
</span><a href="Unison.Sync.Types.html#UpdatePathError%27UserNotFound"><span class="hs-identifier hs-var">UpdatePathError'UserNotFound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>        </span><span id="local-6989586621679383768"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383768"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var">failText</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unexpected UpdatePathResponse type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383768"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-876"></span><span>
</span><span id="line-877"></span><span class="hs-keyword">data</span><span> </span><span id="HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-var">HashMismatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HashMismatch"><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-var">HashMismatch</span></a></span></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Apath%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Path
</span><a href="Unison.Sync.Types.html#%24sel%3Apath%3AHashMismatch"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-879"></span><span>    </span><span id="%24sel%3AexpectedHash%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AexpectedHash%3AHashMismatch"><span class="hs-identifier hs-var hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span class="hs-special">,</span><span>
</span><span id="line-880"></span><span>    </span><span id="%24sel%3AactualHash%3AHashMismatch"><span class="annot"><span class="annottext">HashMismatch -&gt; Maybe Hash32
</span><a href="Unison.Sync.Types.html#%24sel%3AactualHash%3AHashMismatch"><span class="hs-identifier hs-var hs-var">actualHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Hash32</span></span><span>
</span><span id="line-881"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679383753"><span id="local-6989586621679383755"><span id="local-6989586621679383762"><span class="annot"><span class="annottext">Int -&gt; HashMismatch -&gt; ShowS
[HashMismatch] -&gt; ShowS
HashMismatch -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HashMismatch] -&gt; ShowS
$cshowList :: [HashMismatch] -&gt; ShowS
show :: HashMismatch -&gt; String
$cshow :: HashMismatch -&gt; String
showsPrec :: Int -&gt; HashMismatch -&gt; ShowS
$cshowsPrec :: Int -&gt; HashMismatch -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383745"><span id="local-6989586621679383751"><span class="annot"><span class="annottext">HashMismatch -&gt; HashMismatch -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c/= :: HashMismatch -&gt; HashMismatch -&gt; Bool
== :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c== :: HashMismatch -&gt; HashMismatch -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383718"><span id="local-6989586621679383720"><span id="local-6989586621679383723"><span id="local-6989586621679383726"><span id="local-6989586621679383729"><span id="local-6989586621679383735"><span id="local-6989586621679383741"><span class="annot"><span class="annottext">Eq HashMismatch
HashMismatch -&gt; HashMismatch -&gt; Bool
HashMismatch -&gt; HashMismatch -&gt; Ordering
HashMismatch -&gt; HashMismatch -&gt; HashMismatch
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
$cmin :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
max :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
$cmax :: HashMismatch -&gt; HashMismatch -&gt; HashMismatch
&gt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&gt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
&gt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&gt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
&lt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&lt;= :: HashMismatch -&gt; HashMismatch -&gt; Bool
&lt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
$c&lt; :: HashMismatch -&gt; HashMismatch -&gt; Bool
compare :: HashMismatch -&gt; HashMismatch -&gt; Ordering
$ccompare :: HashMismatch -&gt; HashMismatch -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383711"><span id="local-6989586621679383713"><span id="local-6989586621679383715"><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-885"></span><span>  </span><span id="local-6989586621679383700"><span class="annot"><span class="annottext">toJSON :: HashMismatch -&gt; Value
</span><a href="#local-6989586621679383700"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span> </span><span id="local-6989586621679383699"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383699"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679383698"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383698"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span id="local-6989586621679383697"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383697"><span class="hs-identifier hs-var">actualHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-886"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span>
</span><span id="line-887"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383699"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-888"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383698"><span class="hs-identifier hs-var">expectedHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-889"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;actual_hash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383697"><span class="hs-identifier hs-var">actualHash</span></a></span><span>
</span><span id="line-890"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383694"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-893"></span><span>  </span><span id="local-6989586621679383683"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HashMismatch
</span><a href="#local-6989586621679383683"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HashMismatch&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679383682"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383682"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-894"></span><span>    </span><span id="local-6989586621679383681"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679383681"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;path&quot;</span></span><span>
</span><span id="line-895"></span><span>    </span><span id="local-6989586621679383680"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383680"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;expected_hash&quot;</span></span><span>
</span><span id="line-896"></span><span>    </span><span id="local-6989586621679383679"><span class="annot"><span class="annottext">Maybe Hash32
</span><a href="#local-6989586621679383679"><span class="hs-identifier hs-var">actualHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383682"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;actual_hash&quot;</span></span><span>
</span><span id="line-897"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#HashMismatch"><span class="hs-identifier hs-type">HashMismatch</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe Hash32
Path
actualHash :: Maybe Hash32
expectedHash :: Maybe Hash32
path :: Path
$sel:actualHash:HashMismatch :: Maybe Hash32
$sel:expectedHash:HashMismatch :: Maybe Hash32
$sel:path:HashMismatch :: Path
</span><a href="#local-6989586621679383679"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-900"></span><span class="hs-comment">-- Common/shared error types</span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-keyword">data</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span> </span><span id="local-6989586621679387072"><span class="annot"><a href="#local-6989586621679387072"><span class="hs-identifier hs-type">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NeedDependencies"><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-var">NeedDependencies</span></a></span></span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AmissingDependencies%3ANeedDependencies"><span class="annot"><span class="annottext">forall hash. NeedDependencies hash -&gt; NESet hash
</span><a href="Unison.Sync.Types.html#%24sel%3AmissingDependencies%3ANeedDependencies"><span class="hs-identifier hs-var hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NESet</span></span><span> </span><span class="annot"><a href="#local-6989586621679387072"><span class="hs-identifier hs-type">hash</span></a></span><span>
</span><span id="line-904"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-905"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679383669"><span id="local-6989586621679383671"><span id="local-6989586621679383675"><span class="annot"><span class="annottext">Int -&gt; NeedDependencies hash -&gt; ShowS
forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [NeedDependencies hash] -&gt; ShowS
$cshowList :: forall hash. Show hash =&gt; [NeedDependencies hash] -&gt; ShowS
show :: NeedDependencies hash -&gt; String
$cshow :: forall hash. Show hash =&gt; NeedDependencies hash -&gt; String
showsPrec :: Int -&gt; NeedDependencies hash -&gt; ShowS
$cshowsPrec :: forall hash. Show hash =&gt; Int -&gt; NeedDependencies hash -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383664"><span id="local-6989586621679383667"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c/= :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
== :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c== :: forall hash.
Eq hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679383643"><span id="local-6989586621679383645"><span id="local-6989586621679383648"><span id="local-6989586621679383651"><span id="local-6989586621679383654"><span id="local-6989586621679383657"><span id="local-6989586621679383660"><span class="annot"><span class="annottext">NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall {hash}. Ord hash =&gt; Eq (NeedDependencies hash)
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
min :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmin :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
max :: NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
$cmax :: forall hash.
Ord hash =&gt;
NeedDependencies hash
-&gt; NeedDependencies hash -&gt; NeedDependencies hash
&gt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&gt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&gt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt;= :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt;= :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
&lt; :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
$c&lt; :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Bool
compare :: NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
$ccompare :: forall hash.
Ord hash =&gt;
NeedDependencies hash -&gt; NeedDependencies hash -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383636"><span id="local-6989586621679383638"><span id="local-6989586621679383640"><span id="local-6989586621679387069"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387069"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387069"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-908"></span><span>  </span><span id="local-6989586621679383632"><span class="annot"><span class="annottext">toJSON :: NeedDependencies hash -&gt; Value
</span><a href="#local-6989586621679383632"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span id="local-6989586621679383631"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679383631"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-909"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">object</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679383631"><span class="hs-identifier hs-var">missingDependencies</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679383628"><span id="local-6989586621679387067"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387067"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679387067"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387067"><span class="hs-identifier hs-type">hash</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-912"></span><span>  </span><span id="local-6989586621679383624"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser (NeedDependencies hash)
</span><a href="#local-6989586621679383624"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NeedDependencies&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679383623"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383623"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-913"></span><span>    </span><span id="local-6989586621679383622"><span class="annot"><span class="annottext">NESet hash
</span><a href="#local-6989586621679383622"><span class="hs-identifier hs-var">missingDependencies</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679383623"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;missing_dependencies&quot;</span></span><span>
</span><span id="line-914"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Unison.Sync.Types.html#NeedDependencies"><span class="hs-identifier hs-type">NeedDependencies</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">NESet hash
missingDependencies :: NESet hash
$sel:missingDependencies:NeedDependencies :: NESet hash
</span><a href="#local-6989586621679383622"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="hs-comment">------------------------------------------------------------------------------------------------------------------------</span><span>
</span><span id="line-917"></span><span class="hs-comment">-- Misc. helpers</span><span>
</span><span id="line-918"></span><span>
</span><span id="line-919"></span><span id="local-6989586621679387107"><span id="local-6989586621679387108"><span class="annot"><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-type">failText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span> </span><span class="annot"><a href="#local-6989586621679387108"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387108"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679387107"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-920"></span><span id="failText"><span class="annot"><span class="annottext">failText :: forall (m :: * -&gt; *) a. MonadFail m =&gt; Text -&gt; m a
</span><a href="Unison.Sync.Types.html#failText"><span class="hs-identifier hs-var hs-var">failText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span id="local-6989586621679387100"><span class="annot"><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-type">jsonUnion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="annot"><a href="#local-6989586621679387100"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679387100"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span></span><span>
</span><span id="line-923"></span><span id="jsonUnion"><span class="annot"><span class="annottext">jsonUnion :: forall a. ToJSON a =&gt; Text -&gt; a -&gt; Value
</span><a href="Unison.Sync.Types.html#jsonUnion"><span class="hs-identifier hs-var hs-var">jsonUnion</span></a></span></span><span> </span><span id="local-6989586621679383611"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383611"><span class="hs-identifier hs-var">typeName</span></a></span></span><span> </span><span id="local-6989586621679383610"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679383610"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-924"></span><span>  </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><span class="hs-identifier hs-var">Aeson.object</span></span><span>
</span><span id="line-925"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679383611"><span class="hs-identifier hs-var">typeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-926"></span><span>      </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;payload&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall kv v. (KeyValue kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><span class="hs-operator hs-var">.=</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679383610"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-927"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-928"></span></pre></body></html>