<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.CommandLine.DisplayValues</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(^.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ABT</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ABT</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Builtin</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Builtin</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Builtin.Decls</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Codebase.Editor.DisplayObject</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DO</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.CommandLine.OutputMessages.html"><span class="hs-identifier">Unison.CommandLine.OutputMessages</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OutputMessages</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ConstructorReference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">GConstructorReference</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ConstructorReference</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ConstructorReference</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ConstructorType</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CT</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.DataDeclaration</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.PrettyPrintEnv</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PPE</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.PrettyPrintEnv.Util</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PPE</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.PrettyPrintEnvDecl</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PPE</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Reference</span></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Reference</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Referent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Referent</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Referent</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Referent</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Runtime.IOSource</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ShortHash</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SH</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Symbol</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Symbol</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Syntax.DeclPrinter</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DP</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Syntax.NamePrinter</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NP</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Syntax.TermPrinter</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TP</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Syntax.TypePrinter</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TypePrinter</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Term</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Term</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Pretty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.SyntaxText</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Var</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Var</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">type</span><span> </span><span id="Pretty"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-var">Pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">P.Pretty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">P.ColorText</span></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span id="local-6989586621679787017"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-type">displayTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679787017"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="#local-6989586621679787017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span></span><span>
</span><span id="line-50"></span><span id="displayTerm"><span class="annot"><span class="annottext">displayTerm :: forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var hs-var">displayTerm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-var">displayTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">ElideUnit
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- Whether to elide printing of `()` at the end of a block</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- For instance, in:</span><span>
</span><span id="line-54"></span><span class="hs-comment">--</span><span>
</span><span id="line-55"></span><span class="hs-comment">--   id x = x</span><span>
</span><span id="line-56"></span><span class="hs-comment">--   ()</span><span>
</span><span id="line-57"></span><span class="hs-comment">--</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- We could render it as above, with the `()` explicit, or just as:</span><span>
</span><span id="line-59"></span><span class="hs-comment">--</span><span>
</span><span id="line-60"></span><span class="hs-comment">--   id x = x</span><span>
</span><span id="line-61"></span><span class="hs-comment">--</span><span>
</span><span id="line-62"></span><span class="hs-keyword">type</span><span> </span><span id="ElideUnit"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#ElideUnit"><span class="hs-identifier hs-var">ElideUnit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span id="local-6989586621679787007"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-type">displayTerm'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679787007"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#ElideUnit"><span class="hs-identifier hs-type">ElideUnit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787007"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787007"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787007"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679787007"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="#local-6989586621679787007"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span></span><span>
</span><span id="line-74"></span><span id="displayTerm%27"><span class="annot"><span class="annottext">displayTerm' :: forall (m :: * -&gt; *).
Monad m =&gt;
ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-var hs-var">displayTerm'</span></a></span></span><span> </span><span id="local-6989586621679786796"><span class="annot"><span class="annottext">ElideUnit
</span><a href="#local-6989586621679786796"><span class="hs-identifier hs-var">elideUnit</span></a></span></span><span> </span><span id="local-6989586621679786795"><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786795"><span class="hs-identifier hs-var">pped</span></a></span></span><span> </span><span id="local-6989586621679786794"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786794"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621679786793"><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786793"><span class="hs-identifier hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621679786792"><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786792"><span class="hs-identifier hs-var">eval</span></a></span></span><span> </span><span id="local-6989586621679786791"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786791"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679786790"><span class="annot"><span class="annottext">tm :: Term Symbol ()
</span><a href="#local-6989586621679786790"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorReference</span></span><span> </span><span id="local-6989586621679786786"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786786"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term Symbol ()]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786786"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">DD.docRef</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayDoc"><span class="hs-identifier hs-var">displayDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786795"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786794"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786793"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786792"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786791"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786790"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786786"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">DD.doc2Ref</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-78"></span><span>        </span><span class="hs-comment">-- Pretty.get (doc.formatConsole tm)</span><span>
</span><span id="line-79"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786782"><span class="annot"><span class="annottext">tm' :: Term Symbol ()
</span><a href="#local-6989586621679786782"><span class="hs-identifier hs-var hs-var">tm'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-80"></span><span>              </span><span class="annot"><span class="annottext">forall v a vt at ap.
Ord v =&gt;
a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.app</span></span><span>
</span><span id="line-81"></span><span>                </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall v a vt at ap. Ord v =&gt; a -&gt; Reference -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.ref</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">DD.prettyGetRef</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall v a vt at ap.
Ord v =&gt;
a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.app</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall v a vt at ap. Ord v =&gt; a -&gt; Reference -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.ref</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">DD.doc2FormatConsoleRef</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786790"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>        </span><span id="local-6989586621679786777"><span class="annot"><span class="annottext">Maybe (Term Symbol ())
</span><a href="#local-6989586621679786777"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786792"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786782"><span class="hs-identifier hs-var">tm'</span></a></span><span>
</span><span id="line-85"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Term Symbol ())
</span><a href="#local-6989586621679786777"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-86"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Term Symbol ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; Pretty
</span><a href="#local-6989586621679786776"><span class="hs-identifier hs-var">errMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786782"><span class="hs-identifier hs-var">tm'</span></a></span><span>
</span><span id="line-87"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786775"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786775"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786795"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786794"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786793"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786792"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786791"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786775"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786786"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">DD.prettyAnnotatedRef</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-var">displayPretty</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786795"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786794"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786793"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786792"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786791"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786790"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621679786772"><span class="annot"><span class="annottext">tm :: Term Symbol ()
</span><a href="#local-6989586621679786772"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorReference</span></span><span> </span><span id="local-6989586621679786771"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786771"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786771"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">DD.prettyAnnotatedRef</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-var">displayPretty</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786795"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786794"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786793"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786792"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786791"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786772"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621679786770"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786770"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; Pretty
</span><a href="#local-6989586621679786769"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786770"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>    </span><span id="local-6989586621679786776"><span class="annot"><span class="annottext">errMsg :: Term Symbol () -&gt; Pretty
</span><a href="#local-6989586621679786776"><span class="hs-identifier hs-var hs-var">errMsg</span></a></span></span><span> </span><span id="local-6989586621679786768"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786768"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-94"></span><span>      </span><span class="annot"><span class="annottext">forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.fatalCallout</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.lines</span></span><span>
</span><span id="line-96"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.wrap</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-97"></span><span>              </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;I couldn't render this document, because the&quot;</span></span><span>
</span><span id="line-98"></span><span>                </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;rendering function produced an error when&quot;</span></span><span>
</span><span id="line-99"></span><span>                </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;evaluating this expression:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>            </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>            </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; Pretty
</span><a href="#local-6989586621679786769"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786768"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>            </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><span class="annottext">forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.wrap</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-104"></span><span>              </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;Sadly, I don't know the error, but you can evaluate&quot;</span></span><span>
</span><span id="line-105"></span><span>                </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;the above expression in a scratch file to see it.&quot;</span></span><span>
</span><span id="line-106"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-107"></span><span>    </span><span id="local-6989586621679786769"><span class="annot"><span class="annottext">src :: Term Symbol () -&gt; Pretty
</span><a href="#local-6989586621679786769"><span class="hs-identifier hs-var hs-var">src</span></a></span></span><span> </span><span id="local-6989586621679786763"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786763"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall v a.
Var v =&gt;
ElideUnit -&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
</span><span class="hs-identifier hs-var">TP.prettyBlock</span></span><span> </span><span class="annot"><span class="annottext">ElideUnit
</span><a href="#local-6989586621679786796"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786795"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786763"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- assume this is given a</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- Pretty.Annotated ann (Either SpecialForm ConsoleText)</span><span>
</span><span id="line-111"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-type">displayPretty</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679786760"><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Symbol</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="#local-6989586621679786760"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-121"></span><span id="displayPretty"><span class="annot"><span class="annottext">displayPretty :: forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-var hs-var">displayPretty</span></a></span></span><span> </span><span id="local-6989586621679786590"><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span></span><span> </span><span id="local-6989586621679786589"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621679786588"><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621679786587"><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span></span><span> </span><span id="local-6989586621679786586"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span id="local-6989586621679786585"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786585"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786585"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>    </span><span id="local-6989586621679786584"><span class="annot"><span class="annottext">go :: Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier hs-var">DD.PrettyEmpty</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyGroup</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786581"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786581"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786581"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyLit</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.EitherLeft'</span></span><span> </span><span id="local-6989586621679786576"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786576"><span class="hs-identifier hs-var">special</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786575"><span class="hs-identifier hs-var">goSpecial</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786576"><span class="hs-identifier hs-var">special</span></a></span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyLit</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.EitherRight'</span></span><span> </span><span id="local-6989586621679786573"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786573"><span class="hs-identifier hs-var">consoleTxt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786573"><span class="hs-identifier hs-var">consoleTxt</span></a></span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyWrap</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786570"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786570"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; (s -&gt; [Pretty s]) -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.wrap'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. (IsString s, ListLike s Char) =&gt; s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.lit</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786570"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyOrElse</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786565"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786565"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621679786564"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786564"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.orElse</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786565"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786564"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-130"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyIndent</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786561"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786561"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621679786560"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786560"><span class="hs-identifier hs-var">afterNl</span></a></span></span><span> </span><span id="local-6989586621679786559"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786559"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>        </span><span id="local-6989586621679786558"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786558"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786561"><span class="hs-identifier hs-var">initial</span></a></span><span>
</span><span id="line-132"></span><span>        </span><span id="local-6989586621679786557"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786557"><span class="hs-identifier hs-var">afterNl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786560"><span class="hs-identifier hs-var">afterNl</span></a></span><span>
</span><span id="line-133"></span><span>        </span><span id="local-6989586621679786556"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786556"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786559"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786558"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentAfterNewline</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786557"><span class="hs-identifier hs-var">afterNl</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786556"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-135"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyAppend</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786553"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786553"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786553"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.PrettyTable</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786549"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786549"><span class="hs-identifier hs-var">rows</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. (IsString s, ListLike s Char) =&gt; [[Pretty s]] -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.table</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m [Pretty]
</span><a href="#local-6989586621679786547"><span class="hs-identifier hs-var">goRow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786549"><span class="hs-identifier hs-var">rows</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>          </span><span id="local-6989586621679786547"><span class="annot"><span class="annottext">goRow :: Term Symbol () -&gt; m [Pretty]
</span><a href="#local-6989586621679786547"><span class="hs-identifier hs-var hs-var">goRow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621679786545"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786545"><span class="hs-identifier hs-var">row</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786584"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786545"><span class="hs-identifier hs-var">row</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>          </span><span class="annot"><a href="#local-6989586621679786547"><span class="hs-identifier hs-var">goRow</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-141"></span><span>      </span><span id="local-6989586621679786544"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786544"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786544"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621679786543"><span class="annot"><span class="annottext">goSrc :: Seq (Term Symbol ()) -&gt; m Pretty
</span><a href="#local-6989586621679786543"><span class="hs-identifier hs-var hs-var">goSrc</span></a></span></span><span> </span><span id="local-6989586621679786542"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786542"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-144"></span><span>      </span><span class="hs-comment">-- we ignore the annotations; but this could be extended later</span><span>
</span><span id="line-145"></span><span>      </span><span class="hs-comment">-- to do some ascii art rendering</span><span>
</span><span id="line-146"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786541"><span class="annot"><span class="annottext">tys :: [Reference]
</span><a href="#local-6989586621679786541"><span class="hs-identifier hs-var hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786540"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DD.TupleTerm'</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">DD.EitherLeft'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621679786540"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786540"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786537"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786537"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786542"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-147"></span><span>          </span><span id="local-6989586621679786534"><span class="annot"><span class="annottext">toRef :: Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Reference
</span><a href="#local-6989586621679786534"><span class="hs-identifier hs-var hs-var">toRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Ref'</span></span><span> </span><span id="local-6989586621679786532"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786532"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786532"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-148"></span><span>          </span><span class="annot"><a href="#local-6989586621679786534"><span class="hs-identifier hs-var">toRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.RequestOrCtor'</span></span><span> </span><span id="local-6989586621679786530"><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786530"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786530"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">forall r s.
Lens (GConstructorReference r) (GConstructorReference s) r s
</span><span class="hs-identifier hs-var">ConstructorReference.reference_</span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>          </span><span class="annot"><a href="#local-6989586621679786534"><span class="hs-identifier hs-var">toRef</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-150"></span><span>          </span><span id="local-6989586621679786528"><span class="annot"><span class="annottext">tms :: [Reference]
</span><a href="#local-6989586621679786528"><span class="hs-identifier hs-var hs-var">tms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786527"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DD.TupleTerm'</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">DD.EitherRight'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Term</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {typeVar} {typeAnn} {patternAnn} {v} {a}.
Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Reference
</span><a href="#local-6989586621679786534"><span class="hs-identifier hs-var">toRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786527"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786527"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786525"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786525"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786542"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-151"></span><span>      </span><span id="local-6989586621679786524"><span class="annot"><span class="annottext">Map Reference (DisplayObject () (Decl Symbol ()))
</span><a href="#local-6989586621679786524"><span class="hs-identifier hs-var">typeMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-152"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- todo: populate the variable names / kind once BuiltinObject supports that</span><span>
</span><span id="line-153"></span><span>            </span><span id="local-6989586621679786523"><span class="annot"><span class="annottext">go :: Reference -&gt; m (Reference, DisplayObject () (Decl Symbol ()))
</span><a href="#local-6989586621679786523"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679786522"><span class="annot"><span class="annottext">ref :: Reference
</span><a href="#local-6989586621679786522"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786522"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; DisplayObject b a
</span><span class="hs-identifier hs-var">DO.BuiltinObject</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>            </span><span class="annot"><a href="#local-6989586621679786523"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679786519"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786519"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-155"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786519"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>                </span><span id="local-6989586621679786518"><span class="annot"><span class="annottext">Maybe (Decl Symbol ())
</span><a href="#local-6989586621679786518"><span class="hs-identifier hs-var">decl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786519"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-157"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786517"><span class="annot"><span class="annottext">missing :: DisplayObject () (Decl Symbol ())
</span><a href="#local-6989586621679786517"><span class="hs-identifier hs-var hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. ShortHash -&gt; DisplayObject b a
</span><span class="hs-identifier hs-var">DO.MissingObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ShortHash
</span><span class="hs-identifier hs-var">SH.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Text
</span><span class="hs-identifier hs-var">Reference.toText</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786519"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>                </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject () (Decl Symbol ())
</span><a href="#local-6989586621679786517"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. a -&gt; DisplayObject b a
</span><span class="hs-identifier hs-var">DO.UserObject</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Decl Symbol ())
</span><a href="#local-6989586621679786518"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-159"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Reference, DisplayObject () (Decl Symbol ()))
</span><a href="#local-6989586621679786523"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Reference]
</span><a href="#local-6989586621679786541"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-160"></span><span>      </span><span id="local-6989586621679786510"><span class="annot"><span class="annottext">Map Reference (DisplayObject (Type Symbol ()) (Term Symbol ()))
</span><a href="#local-6989586621679786510"><span class="hs-identifier hs-var">termMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-161"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786509"><span class="annot"><span class="annottext">go :: Reference
-&gt; m (Reference, DisplayObject (Type Symbol ()) (Term Symbol ()))
</span><a href="#local-6989586621679786509"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679786508"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786508"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-162"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786508"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786508"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-163"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; (Type Symbol () -&gt; a) -&gt; Reference -&gt; a
</span><span class="hs-identifier hs-var">Builtin.typeOf</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type Symbol ()) (Term Symbol ())
</span><a href="#local-6989586621679786506"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; DisplayObject b a
</span><span class="hs-identifier hs-var">DO.BuiltinObject</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786508"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-164"></span><span>                </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type Symbol ()) (Term Symbol ())
</span><a href="#local-6989586621679786506"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. a -&gt; DisplayObject b a
</span><span class="hs-identifier hs-var">DO.UserObject</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786508"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-165"></span><span>              </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>                </span><span id="local-6989586621679786506"><span class="annot"><span class="annottext">missing :: DisplayObject (Type Symbol ()) (Term Symbol ())
</span><a href="#local-6989586621679786506"><span class="hs-identifier hs-var hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. ShortHash -&gt; DisplayObject b a
</span><span class="hs-identifier hs-var">DO.MissingObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ShortHash
</span><span class="hs-identifier hs-var">SH.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Text
</span><span class="hs-identifier hs-var">Reference.toText</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786508"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Reference
-&gt; m (Reference, DisplayObject (Type Symbol ()) (Term Symbol ()))
</span><a href="#local-6989586621679786509"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Reference]
</span><a href="#local-6989586621679786528"><span class="hs-identifier hs-var">tms</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span class="hs-comment">-- in docs, we use suffixed names everywhere</span><span>
</span><span id="line-169"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786505"><span class="annot"><span class="annottext">pped' :: PrettyPrintEnvDecl
</span><a href="#local-6989586621679786505"><span class="hs-identifier hs-var hs-var">pped'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:unsuffixifiedPPE:PrettyPrintEnvDecl :: PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.unsuffixifiedPPE</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-170"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall v a1.
(Var v, Ord a1) =&gt;
PrettyPrintEnvDecl
-&gt; Map Reference (DisplayObject () (Decl v a1))
-&gt; Map Reference (DisplayObject (Type v a1) (Term v a1))
-&gt; Pretty
</span><a href="Unison.CommandLine.OutputMessages.html#displayDefinitions%27"><span class="hs-identifier hs-var">OutputMessages.displayDefinitions'</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786505"><span class="hs-identifier hs-var">pped'</span></a></span><span> </span><span class="annot"><span class="annottext">Map Reference (DisplayObject () (Decl Symbol ()))
</span><a href="#local-6989586621679786524"><span class="hs-identifier hs-var">typeMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Reference (DisplayObject (Type Symbol ()) (Term Symbol ()))
</span><a href="#local-6989586621679786510"><span class="hs-identifier hs-var">termMap</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621679786575"><span class="annot"><span class="annottext">goSpecial :: Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786575"><span class="hs-identifier hs-var hs-var">goSpecial</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-173"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormFoldedSource</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621679786501"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786501"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ()) -&gt; m Pretty
</span><a href="#local-6989586621679786543"><span class="hs-identifier hs-var">goSrc</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786501"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span class="hs-comment">-- Source [Either Link.Type Doc2.Term]</span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormSource</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621679786499"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786499"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ()) -&gt; m Pretty
</span><a href="#local-6989586621679786543"><span class="hs-identifier hs-var">goSrc</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786499"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span class="hs-comment">-- Example Nat Doc2.Term</span><span>
</span><span id="line-177"></span><span>      </span><span class="hs-comment">-- Examples like `foo x y` are encoded as `Example 2 (_ x y -&gt; foo)`, where</span><span>
</span><span id="line-178"></span><span>      </span><span class="hs-comment">-- 2 is the number of variables that should be dropped from the rendering.</span><span>
</span><span id="line-179"></span><span>      </span><span class="hs-comment">-- So this will render as `foo x y`.</span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormExample</span></span><span> </span><span id="local-6989586621679786497"><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621679786497"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Example</span></span><span> </span><span id="local-6989586621679786495"><span class="annot"><span class="annottext">[Symbol]
</span><a href="#local-6989586621679786495"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679786494"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786494"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-181"></span><span>        </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.backticked</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786492"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-182"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>          </span><span id="local-6989586621679786492"><span class="annot"><span class="annottext">ex :: Term Symbol ()
</span><a href="#local-6989586621679786492"><span class="hs-identifier hs-var hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall v a vt at ap.
Ord v =&gt;
a -&gt; [v] -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.lam'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var">ABT.annotation</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786494"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621679786497"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Symbol]
</span><a href="#local-6989586621679786495"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786494"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-184"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormExampleBlock</span></span><span> </span><span id="local-6989586621679786487"><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621679786487"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Example</span></span><span> </span><span id="local-6989586621679786486"><span class="annot"><span class="annottext">[Symbol]
</span><a href="#local-6989586621679786486"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621679786485"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786485"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-comment">-- todo: maybe do something with `vs` to indicate the variables are free</span><span>
</span><span id="line-186"></span><span>        </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-var">displayTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">ElideUnit
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786484"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>          </span><span id="local-6989586621679786484"><span class="annot"><span class="annottext">ex :: Term Symbol ()
</span><a href="#local-6989586621679786484"><span class="hs-identifier hs-var hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall v a vt at ap.
Ord v =&gt;
a -&gt; [v] -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.lam'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var">ABT.annotation</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786485"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621679786487"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Symbol]
</span><a href="#local-6989586621679786486"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786485"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-comment">-- Link (Either Link.Type Doc2.Term)</span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormLink</span></span><span> </span><span id="local-6989586621679786482"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786482"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-192"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786481"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621679786481"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span>
</span><span id="line-193"></span><span>            </span><span id="local-6989586621679786479"><span class="annot"><span class="annottext">go :: HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621679786479"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.underline</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><span class="hs-identifier hs-var">P.syntaxToColor</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty SyntaxText
</span><span class="hs-identifier hs-var">NP.prettyHashQualified</span></span><span>
</span><span id="line-194"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786482"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">DD.EitherLeft'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621679786475"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786475"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621679786479"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.typeName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786481"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786475"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-196"></span><span>              </span><span class="hs-comment">-- Eta-reduce the term, as the compiler may have eta-expanded it.</span><span>
</span><span id="line-197"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">DD.EitherRight'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Term</span></span><span> </span><span id="local-6989586621679786473"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786473"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall v. Ord v =&gt; Term0 v -&gt; Term0 v
</span><span class="hs-identifier hs-var">Term.etaNormalForm</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786473"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-198"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Term.Ref'</span></span><span> </span><span id="local-6989586621679786471"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786471"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621679786479"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786481"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786471"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Term.Request'</span></span><span> </span><span id="local-6989586621679786467"><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786467"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-200"></span><span>                  </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621679786479"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786481"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GConstructorReference Reference -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786467"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span id="local-6989586621679786464"><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786464"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-202"></span><span>                  </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621679786479"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786481"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GConstructorReference Reference -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786464"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>                </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.red</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786473"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-204"></span><span>              </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.red</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786482"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-205"></span><span>      </span><span class="hs-comment">-- Signature [Doc2.Term]</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormSignature</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621679786460"><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786460"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-207"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786459"><span class="annot"><span class="annottext">referents :: [Referent]
</span><a href="#local-6989586621679786459"><span class="hs-identifier hs-var hs-var">referents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786458"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Term</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {typeVar} {typeAnn} {patternAnn} {v} {a}.
Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Referent
</span><a href="#local-6989586621679786457"><span class="hs-identifier hs-var">toReferent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786458"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786458"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term Symbol ())
</span><a href="#local-6989586621679786460"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-208"></span><span>            </span><span id="local-6989586621679786456"><span class="annot"><span class="annottext">go :: Referent -&gt; m Pretty
</span><a href="#local-6989586621679786456"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679786455"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786455"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621679786454"><span class="hs-identifier hs-var">goSignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786455"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-209"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.sep</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621679786456"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Referent]
</span><a href="#local-6989586621679786459"><span class="hs-identifier hs-var">referents</span></a></span><span>
</span><span id="line-210"></span><span>      </span><span class="hs-comment">-- SignatureInline Doc2.Term</span><span>
</span><span id="line-211"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormSignatureInline</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Term</span></span><span> </span><span id="local-6989586621679786451"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786451"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-212"></span><span>        </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.backticked</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall {typeVar} {typeAnn} {patternAnn} {v} {a}.
Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Referent
</span><a href="#local-6989586621679786457"><span class="hs-identifier hs-var">toReferent</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786451"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-213"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786450"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786450"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621679786454"><span class="hs-identifier hs-var">goSignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786450"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-214"></span><span>          </span><span class="annot"><span class="annottext">Maybe Referent
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786451"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-comment">-- Eval Doc2.Term</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEval</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Term</span></span><span> </span><span id="local-6989586621679786448"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786448"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-217"></span><span>        </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786448"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-218"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Term Symbol ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-219"></span><span>            </span><span id="local-6989586621679786447"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786447"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786448"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-220"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.lines</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786447"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#10728;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.red</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#127384;  An error occured during evaluation&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-221"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786446"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786446"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>            </span><span id="local-6989586621679786445"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786445"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786448"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-223"></span><span>            </span><span id="local-6989586621679786444"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786444"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786446"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-224"></span><span>            </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.lines</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786445"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#10728;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.green</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786444"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>      </span><span class="hs-comment">-- EvalInline Doc2.Term</span><span>
</span><span id="line-227"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEvalInline</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2Term</span></span><span> </span><span id="local-6989586621679786441"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786441"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>        </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786441"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-229"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Term Symbol ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.backticked</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.red</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#127384;  An error occurred during evaluation&quot;</span></span><span>
</span><span id="line-230"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786440"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786440"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.backticked</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786440"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-231"></span><span>      </span><span class="hs-comment">-- Embed Any</span><span>
</span><span id="line-232"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEmbed</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.App'</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679786437"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786437"><span class="hs-identifier hs-var">any</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786437"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679786435"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786435"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>          </span><span class="annot"><span class="annottext">forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.indentN</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;{{ embed {{&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786435"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;}} }}&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-comment">-- EmbedInline Any</span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEmbedInline</span></span><span> </span><span id="local-6989586621679786433"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786433"><span class="hs-identifier hs-var">any</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-237"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786433"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679786432"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786432"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-238"></span><span>          </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;{{ embed {{&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786432"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;}} }}&quot;</span></span><span>
</span><span id="line-239"></span><span>      </span><span id="local-6989586621679786431"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786431"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.red</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786431"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679786457"><span class="annot"><span class="annottext">toReferent :: Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Referent
</span><a href="#local-6989586621679786457"><span class="hs-identifier hs-var hs-var">toReferent</span></a></span></span><span> </span><span id="local-6989586621679786430"><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621679786430"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621679786430"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term.Ref'</span></span><span> </span><span id="local-6989586621679786429"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786429"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786429"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span id="local-6989586621679786428"><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786428"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GConstructorReference Reference -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786428"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term.Request'</span></span><span> </span><span id="local-6989586621679786427"><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786427"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GConstructorReference Reference -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">GConstructorReference Reference
</span><a href="#local-6989586621679786427"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621679786454"><span class="annot"><span class="annottext">goSignature :: Referent -&gt; m Pretty
</span><a href="#local-6989586621679786454"><span class="hs-identifier hs-var hs-var">goSignature</span></a></span></span><span> </span><span id="local-6989586621679786426"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786426"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-248"></span><span>      </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786426"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-249"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Type Symbol ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786426"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-250"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786424"><span class="annot"><span class="annottext">Type Symbol ()
</span><a href="#local-6989586621679786424"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-252"></span><span>            </span><span class="annot"><span class="annottext">forall v a.
Var v =&gt;
PrettyPrintEnv
-&gt; [(Referent, HashQualified Name, Type v a)] -&gt; Pretty
</span><span class="hs-identifier hs-var">TypePrinter.prettySignaturesCTCollapsed</span></span><span>
</span><span id="line-253"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>              </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786426"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786426"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type Symbol ()
</span><a href="#local-6989586621679786424"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621679786422"><span class="annot"><span class="annottext">goColor :: Term (F typeVar typeAnn patternAnn) v a -&gt; Pretty -&gt; Pretty
</span><a href="#local-6989586621679786422"><span class="hs-identifier hs-var hs-var">goColor</span></a></span></span><span> </span><span id="local-6989586621679786421"><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621679786421"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621679786421"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-257"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBlack</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.black</span></span><span>
</span><span id="line-258"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorRed</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.red</span></span><span>
</span><span id="line-259"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorGreen</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.green</span></span><span>
</span><span id="line-260"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorYellow</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.yellow</span></span><span>
</span><span id="line-261"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBlue</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.blue</span></span><span>
</span><span id="line-262"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorMagenta</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.purple</span></span><span>
</span><span id="line-263"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorCyan</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.cyan</span></span><span>
</span><span id="line-264"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorWhite</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.white</span></span><span>
</span><span id="line-265"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightBlack</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiBlack</span></span><span>
</span><span id="line-266"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightRed</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiRed</span></span><span>
</span><span id="line-267"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightGreen</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiGreen</span></span><span>
</span><span id="line-268"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightYellow</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiYellow</span></span><span>
</span><span id="line-269"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightBlue</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiBlue</span></span><span>
</span><span id="line-270"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightMagenta</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiPurple</span></span><span>
</span><span id="line-271"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightCyan</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiCyan</span></span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier hs-var">DD.AnsiColorBrightWhite</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.hiWhite</span></span><span>
</span><span id="line-273"></span><span>      </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span>    </span><span id="local-6989586621679786572"><span class="annot"><span class="annottext">goConsole :: Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var hs-var">goConsole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-276"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.ConsoleTextPlain</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Text'</span></span><span> </span><span id="local-6989586621679786387"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786387"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; Text -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.text</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786387"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-277"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.ConsoleTextForeground</span></span><span> </span><span id="local-6989586621679786384"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786384"><span class="hs-identifier hs-var">color</span></a></span></span><span> </span><span id="local-6989586621679786383"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786383"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall {typeVar} {typeAnn} {patternAnn} {v} {a}.
Term (F typeVar typeAnn patternAnn) v a -&gt; Pretty -&gt; Pretty
</span><a href="#local-6989586621679786422"><span class="hs-identifier hs-var">goColor</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786384"><span class="hs-identifier hs-var">color</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786383"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-278"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.ConsoleTextBackground</span></span><span> </span><span id="local-6989586621679786381"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786381"><span class="hs-identifier hs-var">color</span></a></span></span><span> </span><span id="local-6989586621679786380"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786380"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-279"></span><span>        </span><span id="local-6989586621679786379"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786379"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786380"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span id="local-6989586621679786378"><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="#local-6989586621679786378"><span class="hs-identifier hs-var">color</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall {typeVar} {typeAnn} {patternAnn} {v} {a}.
Term (F typeVar typeAnn patternAnn) v a -&gt; Pretty -&gt; Pretty
</span><a href="#local-6989586621679786422"><span class="hs-identifier hs-var">goColor</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786381"><span class="hs-identifier hs-var">color</span></a></span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.background</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="#local-6989586621679786378"><span class="hs-identifier hs-var">color</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621679786379"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-282"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.ConsoleTextBold</span></span><span> </span><span id="local-6989586621679786375"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786375"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.bold</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786375"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-283"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.ConsoleTextUnderline</span></span><span> </span><span id="local-6989586621679786372"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786372"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.underline</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786372"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">DD.ConsoleTextInvert</span></span><span> </span><span id="local-6989586621679786370"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786370"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.invert</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m Pretty
</span><a href="#local-6989586621679786572"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786370"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-285"></span><span>      </span><span id="local-6989586621679786368"><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786368"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Monad m =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term Symbol ())))
-&gt; (Referent -&gt; m (Maybe (Type Symbol ())))
-&gt; (Term Symbol () -&gt; m (Maybe (Term Symbol ())))
-&gt; (Reference -&gt; m (Maybe (Decl Symbol ())))
-&gt; Term Symbol ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786590"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786589"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type Symbol ()))
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol () -&gt; m (Maybe (Term Symbol ()))
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl Symbol ()))
</span><a href="#local-6989586621679786586"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term Symbol ()
</span><a href="#local-6989586621679786368"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="hs-comment">-- pattern DocBlob txt &lt;- Term.App' (Term.Constructor' DocRef DocBlobId) (Term.Text' txt)</span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayDoc"><span class="hs-identifier hs-type">displayDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679786990"><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679786989"><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679786990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-298"></span><span>  </span><span class="annot"><a href="#local-6989586621679786989"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-299"></span><span id="displayDoc"><span class="annot"><span class="annottext">displayDoc :: forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayDoc"><span class="hs-identifier hs-var hs-var">displayDoc</span></a></span></span><span> </span><span id="local-6989586621679786320"><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span></span><span> </span><span id="local-6989586621679786319"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786319"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621679786318"><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621679786318"><span class="hs-identifier hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621679786317"><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786317"><span class="hs-identifier hs-var">evaluated</span></a></span></span><span> </span><span id="local-6989586621679786316"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621679786316"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621679786315"><span class="annot"><span class="annottext">go :: Term v () -&gt; m Pretty
</span><a href="#local-6989586621679786315"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocJoin</span></span><span> </span><span id="local-6989586621679786313"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621679786313"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621679786313"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocBlob</span></span><span> </span><span id="local-6989586621679786310"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786310"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s. (ListLike s Char, IsString s) =&gt; Text -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.paragraphyText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786310"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocLink</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.LinkTerm</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621679786305"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786305"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-304"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.underline</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786305"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocLink</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.LinkType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621679786303"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786303"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-306"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><span class="hs-identifier hs-var">P.underline</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786303"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocSource</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.LinkTerm</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621679786300"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786300"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; m (Maybe (Term v ()))) -&gt; Referent -&gt; m Pretty
</span><a href="#local-6989586621679786299"><span class="hs-identifier hs-var">prettyTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786319"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786300"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-308"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocSource</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.LinkType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621679786298"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786298"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m Pretty
</span><a href="#local-6989586621679786297"><span class="hs-identifier hs-var">prettyType</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786298"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-309"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocSignature</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621679786295"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786295"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621679786294"><span class="hs-identifier hs-var">prettySignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786295"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-310"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.DocEvaluate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621679786292"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786292"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; m (Maybe (Term v ()))) -&gt; Referent -&gt; m Pretty
</span><a href="#local-6989586621679786291"><span class="hs-identifier hs-var">prettyEval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786317"><span class="hs-identifier hs-var">evaluated</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall v a vt at ap. Ord v =&gt; a -&gt; Reference -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.ref</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786292"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-311"></span><span>    </span><span class="annot"><a href="#local-6989586621679786315"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679786290"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621679786290"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall v a. Var v =&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
</span><span class="hs-identifier hs-var">TP.pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621679786290"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span id="local-6989586621679786294"><span class="annot"><span class="annottext">prettySignature :: Referent -&gt; m Pretty
</span><a href="#local-6989586621679786294"><span class="hs-identifier hs-var hs-var">prettySignature</span></a></span></span><span> </span><span id="local-6989586621679786288"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786288"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-313"></span><span>      </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621679786318"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786288"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-314"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Type v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.unsuffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786288"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-315"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786287"><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621679786287"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-316"></span><span>          </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-317"></span><span>            </span><span class="annot"><span class="annottext">forall v a.
Var v =&gt;
PrettyPrintEnv
-&gt; [(Referent, HashQualified Name, Type v a)] -&gt; Pretty
</span><span class="hs-identifier hs-var">TypePrinter.prettySignaturesCTCollapsed</span></span><span>
</span><span id="line-318"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.suffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span>              </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786288"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.unsuffixifiedPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786288"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621679786287"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-320"></span><span>    </span><span id="local-6989586621679786291"><span class="annot"><span class="annottext">prettyEval :: (Reference -&gt; m (Maybe (Term v ()))) -&gt; Referent -&gt; m Pretty
</span><a href="#local-6989586621679786291"><span class="hs-identifier hs-var hs-var">prettyEval</span></a></span></span><span> </span><span id="local-6989586621679786286"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786286"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621679786285"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786285"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786285"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-321"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span id="local-6989586621679786284"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786284"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><span class="hs-identifier hs-var">P.syntaxToColor</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s. IsString s =&gt; Text -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.text</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786284"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-322"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span id="local-6989586621679786283"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786283"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-323"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786282"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621679786282"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.declarationPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786283"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-324"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786286"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786283"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-325"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Term v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#128566;  Missing term source for: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786282"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786285"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-326"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786280"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621679786280"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall v a. Var v =&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
</span><span class="hs-identifier hs-var">TP.pretty</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786282"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621679786280"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-327"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Referent.Con</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorReference</span></span><span> </span><span id="local-6989586621679786279"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786279"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.declarationPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786279"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786279"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-328"></span><span>    </span><span id="local-6989586621679786299"><span class="annot"><span class="annottext">prettyTerm :: (Reference -&gt; m (Maybe (Term v ()))) -&gt; Referent -&gt; m Pretty
</span><a href="#local-6989586621679786299"><span class="hs-identifier hs-var hs-var">prettyTerm</span></a></span></span><span> </span><span id="local-6989586621679786278"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786278"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621679786277"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786277"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786277"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621679786294"><span class="hs-identifier hs-var">prettySignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786277"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span id="local-6989586621679786276"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786276"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-331"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786275"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621679786275"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.declarationPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786276"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-332"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621679786278"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786276"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-333"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Term v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#128566;  Missing term source for: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786275"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786277"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-334"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786274"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621679786274"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><span class="hs-identifier hs-var">P.syntaxToColor</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall v at ap a.
Var v =&gt;
PrettyPrintEnv
-&gt; HashQualified Name -&gt; Term2 v at ap v a -&gt; Pretty SyntaxText
</span><span class="hs-identifier hs-var">TP.prettyBinding</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786275"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786275"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786277"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621679786274"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-335"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Referent.Con</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConstructorReference</span></span><span> </span><span id="local-6989586621679786272"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786272"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m Pretty
</span><a href="#local-6989586621679786297"><span class="hs-identifier hs-var">prettyType</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786272"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621679786297"><span class="annot"><span class="annottext">prettyType :: Reference -&gt; m Pretty
</span><a href="#local-6989586621679786297"><span class="hs-identifier hs-var hs-var">prettyType</span></a></span></span><span> </span><span id="local-6989586621679786271"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786271"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-337"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786270"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621679786270"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><span class="hs-identifier hs-var">PPE.declarationPPE</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786271"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-338"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621679786316"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786271"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-339"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Decl v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#128566;  Missing type source for: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786270"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786271"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-340"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786269"><span class="annot"><span class="annottext">Decl v ()
</span><a href="#local-6989586621679786269"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><span class="hs-identifier hs-var">P.syntaxToColor</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s. Pretty s -&gt; Pretty s
</span><span class="hs-identifier hs-var">P.group</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall v a.
Var v =&gt;
PrettyPrintEnvDecl
-&gt; Reference -&gt; HashQualified Name -&gt; Decl v a -&gt; Pretty SyntaxText
</span><span class="hs-identifier hs-var">DP.prettyDecl</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621679786320"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786271"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.typeName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786270"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786271"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decl v ()
</span><a href="#local-6989586621679786269"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-type">termName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PPE.PrettyPrintEnv</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-343"></span><span id="termName"><span class="annot"><span class="annottext">termName :: PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var hs-var">termName</span></a></span></span><span> </span><span id="local-6989586621679786267"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786267"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span id="local-6989586621679786266"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786266"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-344"></span><span>  </span><span class="annot"><span class="annottext">forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><span class="hs-identifier hs-var">P.syntaxToColor</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><span class="annottext">(Pretty SyntaxText -&gt; Pretty SyntaxText)
-&gt; HashQualified Name -&gt; Pretty SyntaxText
</span><span class="hs-identifier hs-var">NP.styleHashQualified''</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><span class="hs-identifier hs-var">NP.fmt</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. Referent' r -&gt; Element r
</span><span class="hs-identifier hs-var">S.TermReference</span></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786266"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621679786262"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-347"></span><span>    </span><span id="local-6989586621679786262"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621679786262"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.termName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786267"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621679786266"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PPE.PrettyPrintEnv</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-350"></span><span id="typeName"><span class="annot"><span class="annottext">typeName :: PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var hs-var">typeName</span></a></span></span><span> </span><span id="local-6989586621679786261"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786261"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span id="local-6989586621679786260"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786260"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>  </span><span class="annot"><span class="annottext">forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><span class="hs-identifier hs-var">P.syntaxToColor</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-352"></span><span>    </span><span class="annot"><span class="annottext">(Pretty SyntaxText -&gt; Pretty SyntaxText)
-&gt; HashQualified Name -&gt; Pretty SyntaxText
</span><span class="hs-identifier hs-var">NP.styleHashQualified''</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><span class="hs-identifier hs-var">NP.fmt</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; Element r
</span><span class="hs-identifier hs-var">S.TypeReference</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786260"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621679786258"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-354"></span><span>    </span><span id="local-6989586621679786258"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621679786258"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">PPE.typeName</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621679786261"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621679786260"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-355"></span></pre></body></html>